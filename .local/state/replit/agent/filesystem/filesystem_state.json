{"file_contents":{"DEPLOYMENT.md":{"content":"# Deployment Guide - Ontdek Polen\n\n## GitHub Setup\n\n1. **Repository maken**\n   ```bash\n   git init\n   git add .\n   git commit -m \"Initial commit\"\n   git remote add origin https://github.com/jouw-username/ontdek-polen.git\n   git push -u origin main\n   ```\n\n2. **GitHub secrets configureren** (voor automatische Netlify deployment)\n   - Ga naar Settings ‚Üí Secrets and variables ‚Üí Actions\n   - Voeg toe:\n     - `NETLIFY_AUTH_TOKEN`: Haal op van Netlify ‚Üí User settings ‚Üí Personal access tokens\n     - `NETLIFY_SITE_ID`: Te vinden in Netlify site settings ‚Üí Site information\n\n## Netlify Setup\n\n### Optie 1: Automatisch via GitHub\n1. Ga naar [Netlify](https://netlify.com) \n2. Klik \"New site from Git\"\n3. Verbind met GitHub repository\n4. Build settings:\n   - Build command: `vite build`\n   - Publish directory: `dist/public`\n   - Node version: `20`\n\n### Optie 2: Handmatig uploaden\n1. Lokaal builden:\n   ```bash\n   npm run build\n   ```\n2. Upload de `dist/public` folder naar Netlify\n\n## Environment Variables\n\nVoor production op Netlify:\n- `NODE_ENV=production`\n- `DATABASE_URL=your_postgresql_url` (optioneel)\n- `SESSION_SECRET=your_secret_key` (optioneel)\n\n## Build Commando's\n\n- `npm run build` - Volledige build (client + server)\n- `vite build` - Alleen client build (voor statische hosting)\n- `npm run dev` - Development server\n\n## Tips\n\n1. **Afbeeldingen**: Zorg dat je echte afbeeldingen in `client/public/images/` plaatst\n2. **Domeinnaam**: Configureer een custom domain in Netlify settings\n3. **HTTPS**: Netlify geeft automatisch SSL certificaten\n4. **Redirects**: Worden automatisch geconfigureerd via `netlify.toml`\n\n## Troubleshooting\n\n- **Build errors**: Check Node.js version (gebruik 20)\n- **Images niet zichtbaar**: Controleer paths in `client/public/images/`\n- **404 errors**: Redirects zijn geconfigureerd in `netlify.toml`","size_bytes":1846},"DEPLOYMENT_NEON.md":{"content":"# Deployment met Neon Database\n\n## Stappen voor Netlify deployment\n\n### 1. Netlify Environment Variables\nGa naar je Netlify dashboard en voeg deze environment variable toe:\n\n**Environment Variable:**\n- **Name:** `NEON_DATABASE_URL`\n- **Value:** `postgresql://neondb_owner:npg_pAbda9fC0QTJ@ep-nameless-sound-a2dglih1-pooler.eu-central-1.aws.neon.tech/ontdekpolen?sslmode=require&channel_binding=require`\n\n### 2. Database Setup\nDe database tabellen worden automatisch aangemaakt door Drizzle ORM.\n\n### 3. Admin Account\nNa deployment kun je een admin account aanmaken via:\n```bash\ncurl -X POST https://jouw-site.netlify.app/api/setup-admin \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"admin\", \"password\": \"jouw-wachtwoord\"}'\n```\n\n### 4. GitHub Integration\n1. Push je code naar GitHub\n2. Verbind je GitHub repository met Netlify\n3. Netlify bouwt automatisch bij elke push\n\n### 5. Deployment URL\nNa deployment is je admin panel beschikbaar op:\n- **Website:** `https://jouw-site.netlify.app`\n- **Admin Panel:** `https://jouw-site.netlify.app/admin`\n\n## Lokale Development\nVoor lokale development gebruik je de bestaande DATABASE_URL of NEON_DATABASE_URL environment variable.\n\n## Beveiliging\n- Wijzig altijd het default admin wachtwoord na eerste login\n- Gebruik sterke wachtwoorden voor productie\n- Database credentials worden veilig opgeslagen in environment variables","size_bytes":1381},"README.md":{"content":"# Ontdek Polen - Polish Travel Website\n\nEen Nederlandse reiswebsite voor het ontdekken van mooie plekken in Polen. Gebouwd met React, Express en TypeScript.\n\n## Features\n\n- üèõÔ∏è Historische steden zoals Krakow en Gdansk\n- üèîÔ∏è Natuurlijke bestemmingen zoals Tatra Mountains en Bialowieza\n- üìö Reizen en tips\n- üîç Zoekfunctionaliteit voor bestemmingen\n- üì± Responsive design voor alle apparaten\n\n## Tech Stack\n\n- **Frontend**: React 18 + TypeScript + Vite\n- **Backend**: Express.js + Node.js\n- **Styling**: Tailwind CSS + shadcn/ui\n- **Database**: PostgreSQL (Neon) + Drizzle ORM\n- **Deployment**: Netlify + GitHub Actions\n\n## Development\n\n```bash\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n\n# Build for production\nnpm run build\n\n# Start production server\nnpm start\n```\n\n## Deployment\n\n### Netlify (Recommended)\n\n1. Connect your GitHub repository to Netlify\n2. Configure build settings:\n   - Build command: `npm run build`\n   - Publish directory: `dist/public`\n3. Add environment variables if needed\n4. Deploy!\n\n### GitHub Actions\n\nThis project includes automatic deployment to Netlify via GitHub Actions. Set up the following secrets in your GitHub repository:\n\n- `NETLIFY_AUTH_TOKEN`: Your Netlify personal access token\n- `NETLIFY_SITE_ID`: Your Netlify site ID\n\n## Project Structure\n\n```\n‚îú‚îÄ‚îÄ client/          # React frontend\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # UI components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # Page components\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lib/         # Utilities\n‚îÇ   ‚îî‚îÄ‚îÄ public/\n‚îÇ       ‚îî‚îÄ‚îÄ images/      # Static images\n‚îú‚îÄ‚îÄ server/          # Express backend\n‚îú‚îÄ‚îÄ shared/          # Shared types and schemas\n‚îî‚îÄ‚îÄ .github/         # GitHub Actions workflows\n```\n\n## Images\n\nPlace your images in the `client/public/images/` directory:\n\n- `header.jpg` - Hero background\n- `krakow.jpg` - Krakow destination\n- `tatra.jpg` - Tatra Mountains\n- `gdansk.jpg` - Gdansk harbor\n- `bialowieza.jpg` - Bialowieza forest\n- `krakau-dagtrip.jpg` - Krakow travel guide\n- `roadtrip-zuid.jpg` - Southern Poland roadtrip\n- `zee-parels.jpg` - Coastal destinations\n- `tatra-vallei.jpg` - Tatra valley\n\n## License\n\nMIT License","size_bytes":2220},"cms-commands.md":{"content":"# CMS Commands - Ontdek Polen\n\n## Snelle commands\n\n### Content beheer\n```bash\n# Nieuwe bestemming toevoegen\nnode cms/cli.js new:destination \"Warsaw\"\n\n# Nieuwe reisgids toevoegen  \nnode cms/cli.js new:guide \"Weekend in Warsaw\"\n\n# Alle content bekijken\nnode cms/cli.js list\n\n# Data bestanden genereren\nnode cms/cli.js generate\n\n# Volledige build\nnode cms/cli.js build\n```\n\n### Workflow\n1. **Content toevoegen** ‚Üí `new:destination` of `new:guide`\n2. **Bewerk JSON bestanden** in `content/` mappen\n3. **Genereer data** ‚Üí `generate`\n4. **Test website** ‚Üí `npm run dev`\n5. **Build voor productie** ‚Üí `build`\n\n## Content structuur\n\n### Bestemming (`content/destinations/naam.json`)\n```json\n{\n  \"id\": 1,\n  \"name\": \"Warsaw\",\n  \"slug\": \"warsaw\",\n  \"image\": \"/images/warsaw.jpg\",\n  \"alt\": \"Warsaw\",\n  \"description\": \"Korte beschrijving\",\n  \"content\": \"# Titel\\n\\nMarkdown content hier...\",\n  \"featured\": true,\n  \"published\": true,\n  \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n}\n```\n\n### Reisgids (`content/guides/naam.json`)\n```json\n{\n  \"id\": 1,\n  \"title\": \"3 Dagen in Warsaw\",\n  \"slug\": \"3-dagen-in-warsaw\",\n  \"image\": \"/images/warsaw-guide.jpg\",\n  \"alt\": \"3 Dagen in Warsaw\",\n  \"description\": \"Complete gids\",\n  \"content\": \"# Titel\\n\\nMarkdown content hier...\",\n  \"featured\": true,\n  \"published\": true,\n  \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n}\n```\n\n## Afbeeldingen\n\nPlaats afbeeldingen in `client/public/images/`:\n- `naam.jpg` - Voor bestemmingen\n- `gids-naam.jpg` - Voor reisgidsen  \n- `header.jpg` - Hero achtergrond\n- `tatra-vallei.jpg` - CTA sectie\n\n## Automatische integratie\n\nHet CMS systeem:\n- ‚úÖ Genereert automatisch TypeScript bestanden\n- ‚úÖ Filters gepubliceerde content\n- ‚úÖ Werkt met bestaande website code\n- ‚úÖ Ondersteunt Markdown formatting\n- ‚úÖ Netlify compatible","size_bytes":1784},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"netlify-build.js":{"content":"// Build script for Netlify deployment\nconst { execSync } = require('child_process');\n\ntry {\n  console.log('Building client...');\n  execSync('npm run build:client', { stdio: 'inherit' });\n  \n  console.log('Building server...');\n  execSync('npm run build:server', { stdio: 'inherit' });\n  \n  console.log('Build completed successfully!');\n} catch (error) {\n  console.error('Build failed:', error);\n  process.exit(1);\n}","size_bytes":416},"netlify.toml":{"content":"[build]\n  base = \".\"\n  publish = \"dist/public\"\n  command = \"node cms/cli.js generate && vite build\"\n\n[build.environment]\n  NODE_VERSION = \"20\"\n  NEON_DATABASE_URL = \"postgresql://neondb_owner:npg_pAbda9fC0QTJ@ep-nameless-sound-a2dglih1-pooler.eu-central-1.aws.neon.tech/ontdekpolen?sslmode=require&channel_binding=require\"\n\n[[redirects]]\n  from = \"/api/*\"\n  to = \"/.netlify/functions/api/:splat\"\n  status = 200\n\n[[redirects]]\n  from = \"/*\"\n  to = \"/index.html\"\n  status = 200\n\n[dev]\n  command = \"npm run dev\"\n  port = 5000\n  publish = \"dist/public\"","size_bytes":548},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Ontdek Polen - Polish Travel Website\n\n## Overview\n\nThis is a full-stack web application for discovering beautiful places in Poland. It's a travel website that showcases Polish destinations, travel guides, and provides information about various locations throughout the country. The application is built with a modern tech stack using React for the frontend and Express for the backend.\n\n**Stadium 1 Complete (2025-01-15)**:\n‚úÖ **CORE FEATURES IMPLEMENTED**:\n- Complete Polish travel website \"Ontdek Polen\" with Dutch interface\n- Multi-user authentication system with role-based permissions (admin/editor/viewer)\n- PostgreSQL database integration with Neon serverless\n- Comprehensive CMS with content management for destinations and guides\n- Full backup/restore system with recycle bin functionality\n- Soft delete capabilities with is_deleted and deleted_at columns\n- Image management with proactive archiving system\n- Complete site settings CMS system with dynamic head element management\n- Admin-only interface for site name, description, meta keywords, background images, logos, favicon, Google Analytics, and custom CSS/JS\n- **FULLY WORKING**: Frontend integration of site settings - title, description, background images, and SEO metadata dynamically loaded from CMS\n- Header background images successfully swapped (header.jpg ‚Üî header-background.jpg)\n- Dynamic document title, meta tags, favicon, custom CSS/JS injection\n- Google Analytics integration through CMS\n- Responsive design with mobile-first approach\n\n**Stadium 1 Status**: ‚úÖ COMPLETE AND STABLE\n- All core functionality tested and working\n- Database schema finalized\n- Admin interface fully functional\n- Site settings actively integrated with frontend\n- Ready for production deployment or further development\n\n**Stadium 2 Progress (2025-01-15)**: ‚úÖ TEMPLATE SYSTEM FULLY IMPLEMENTED\n‚úÖ **TEMPLATE SYSTEM COMPLETED**:\n- Complete template and pages database schema with PostgreSQL tables\n- Template CRUD operations with variable support ({{title}}, {{description}}, etc.)\n- Pages system with template selection and SEO metadata\n- Soft delete support for pages with recycle bin functionality\n- API endpoints for templates and pages management (admin-only for templates)\n- Sample templates created: \"Travel Destination Template\" and \"Travel Guide Template\"\n- Test pages generated using templates for Krakow and Warsaw destinations\n- Admin interface extended with Pages and Templates tabs\n- Full backend implementation tested and working\n- **FRONTEND INTEGRATION COMPLETED**:\n  - Dynamic page routing system implemented with wouter\n  - Individual page component with SEO metadata integration\n  - Pages displayed on home page with template information\n  - Direct navigation to pages via slug URLs (e.g., /krakow-ontdekken)\n  - Template variable rendering with markdown-style formatting\n  - Responsive design with proper navigation and meta tags\n\n**Stadium 2 Status**: ‚úÖ COMPLETE AND FUNCTIONAL\n- All template and page functionality working end-to-end\n- Pages accessible via direct URLs and home page links\n- CMS management fully operational for templates and pages\n- SEO metadata properly implemented for all pages\n\n**Stadium 3 Progress (2025-01-15)**: ‚úÖ HEADER CONSISTENCY IMPLEMENTED\n‚úÖ **HOMEPAGE-STYLE HEADERS COMPLETED**:\n- All template pages now have identical header structure as homepage\n- Consistent py-24 padding and spacing across all pages\n- Unique background images per destination (krakow.jpg, tatra.jpg, etc.)\n- Exact same button styling and layout positioning\n- Uniform search functionality and footer on every page\n- Enhanced content quality for all existing pages\n\n**Stadium 3 Status**: ‚úÖ COMPLETE AND CONSISTENT\n- Perfect visual consistency between homepage and all template pages\n- Enhanced user experience with uniform navigation and styling\n- All five destination pages (Krakow, Warschau, Tatra, Gdansk, Bialowieza) fully updated\n\n**Stadium 4 Progress (2025-01-15)**: ‚úÖ CONSISTENT META TITLES IMPLEMENTED\n‚úÖ **META TITLE STANDARDIZATION COMPLETED**:\n- All template meta titles updated to consistent format \"{{title}} - Ontdek Polen\"\n- All existing pages updated with location-specific descriptions\n- Meta descriptions changed from \"Mooie plekken in Polen ontdekken\" to \"Mooie plekken in (location name) ontdekken\"\n- Database NaN validation bug fixed in admin panel endpoints\n- Session table conflict resolved for stable database operations\n\n**Stadium 4 Status**: ‚úÖ COMPLETE AND STANDARDIZED\n- Consistent meta titles across all pages follow homepage format\n- Location-specific descriptions for better SEO\n- Enhanced admin panel stability with proper ID validation\n\n**Stadium 5 Progress (2025-01-15)**: ‚úÖ HOMEPAGE VISIBILITY CONTROLS FULLY IMPLEMENTED\n‚úÖ **HOMEPAGE VISIBILITY SYSTEM COMPLETED**:\n- Complete homepage visibility toggle system with database backend support\n- API endpoints for homepage-filtered content (/api/destinations/homepage, /api/guides/homepage)\n- Frontend validation schemas updated to support showOnHomepage property\n- Admin interface enhanced with working \"Toon op Homepage\" switches\n- Visual indication badges added for homepage visibility status\n- Real-time cache invalidation ensures immediate UI updates\n- Comprehensive data initialization and mapping between frontend/backend\n\n**Stadium 5 Status**: ‚úÖ COMPLETE AND FUNCTIONAL\n- Homepage visibility controls working end-to-end with database persistence\n- Visual feedback system with green \"üè† Homepage\" badges in admin interface\n- Seamless integration between admin toggles and homepage content display\n- Cache invalidation system ensures real-time updates across all components\n\n**Stadium 6 Progress (2025-01-16)**: ‚úÖ EFFICIENT FILE STRUCTURE IMPLEMENTED\n‚úÖ **CLEAN FILE ORGANIZATION COMPLETED**:\n- Logical image folder structure with categories: backgrounds/, destinations/, highlights/, guides/, icons/\n- All SVG highlight icons organized in /images/highlights/ directory\n- Background images centralized in /images/backgrounds/ directory\n- Destination header images in /images/destinations/ directory\n- Guide images organized in /images/guides/ directory\n- Removed all obsolete files: testt.JPG, europese-wisent.jpg, .trash folder\n- Deleted legacy content/ and cms/ directories (now fully CMS-driven)\n- Removed old client/src/data/ TypeScript files (database-driven content)\n- Cleaned up dist/ build artifacts and backup files\n- Updated all database image paths to new organized structure\n- Created comprehensive SVG library for all highlights (20 custom SVG icons)\n\n**Stadium 6 Status**: ‚úÖ COMPLETE AND ORGANIZED\n- Efficient file structure prevents file pollution and improves maintainability\n- All images properly categorized and database paths updated\n- No unused or redundant files remaining in the project\n- Clean separation between content types (backgrounds, destinations, guides, highlights)\n\n**ROLLBACK POINT (2025-01-18 - Pre-Authentication Fix)**:\n‚úÖ **APPLICATION STATE BEFORE AUTHENTICATION IMPROVEMENTS**:\n- App running successfully on port 5000\n- Database fully migrated and working\n- All core CMS functionality operational\n- Authentication working but requires page refresh after login to see full admin panel\n- Issue: Race condition in API calls and React Query cache invalidation after login\n- All existing features stable and functional\n\n**Stadium 8 Progress (2025-01-18)**: ‚úÖ AUTHENTICATION FLOW OPTIMIZATION COMPLETED\n‚úÖ **AUTHENTICATION IMPROVEMENTS IMPLEMENTED**:\n- Fixed race condition in API calls after login\n- Improved handleLogin function with proper query cache invalidation\n- Added queryClient.clear() to ensure fresh data fetch after authentication\n- Enhanced checkAuthStatus to handle page refresh scenarios properly\n- Optimized logout function with complete cache clearing\n- Eliminated need for manual page refresh after login\n- All admin panel data now loads immediately after successful authentication\n- Proper state management for currentUser and isAuthenticated\n- Sequential query invalidation prevents partial loading states\n- Templates TabsContent race condition resolved - permission check moved inside content instead of conditional rendering\n- Content Manager tabs successfully removed from admin interface (hidden with false condition)\n- Highlights tab confirmed present and fully functional\n- Default tab changed from 'content-manager' to 'destinations' for better user experience\n\n**Stadium 11 Progress (2025-01-18)**: ‚úÖ REISGIDSEN UI/UX ENHANCEMENT COMPLETED\n‚úÖ **REISGIDSEN TECHNICAL UPGRADE IMPLEMENTED**:\n- Updated reisgidsen section with identical technical appearance as bestemmingen\n- Added \"Nieuwe Reisgids\" button to header section for better UX consistency\n- Enhanced card layout with image preview support (32h height, full-width, object-cover)\n- Improved button structure with consistent spacing and sizing (text-xs, flex-1, w-full patterns)\n- Updated homepage toggle button to match bestemmingen style (‚ùå/‚úÖ indicators)\n- Refined badge system with consistent color coding and spacing\n- Enhanced hover effects and transition animations for better user experience\n- Maintained all existing functionality while improving visual consistency\n- Added functional \"Nieuwe Reisgids\" button that automatically switches to \"üìù Nieuwe Gids\" tab\n- Button uses DOM navigation to activate the existing working new guide form\n- Seamless user experience with direct navigation to guide creation workflow\n\n**Stadium 13 Progress (2025-01-18)**: ‚úÖ COMPLETE CODE OPRUIMING ZOEKBALK CMS VOLTOOID\n\n‚úÖ **VOLLEDIGE VERWIJDERING \"NIEUWE ZOEK CONFIGURATIE\" FUNCTIONALITEIT**:\n- Alle gerelateerde state variabelen verwijderd (showCreateSearchConfig, handleCreateSearchConfig)\n- Complete custom modal dialog voor nieuwe configuraties weggehaald\n- \"Nieuwe Zoek Configuratie\" button volledig verwijderd uit admin interface\n- Alle debug code en console.log statements opgeruimd\n- Bestaande zoek configuraties blijven volledig functioneel\n- Zoekbalk op homepage werkt nog steeds met bestaande 3 configuraties\n- Clean admin interface zonder problematische create functionaliteit\n- Ready voor herbouw met betere architectuur\n\n**Stadium 13 Status**: ‚úÖ VOLLEDIG OPGESCHOOND EN STABIEL\n- Admin panel werkt weer zonder syntax errors of dialog problemen\n- Bestaande zoekfunctionaliteit volledig intact en operationeel  \n- Schone lei voor eventuele herbouw van create functionaliteit\n- Alle overige CMS functies blijven volledig werkend\n\n**Stadium 14 Progress (2025-01-19)**: ‚úÖ ZOEKBALK CMS UITGEBREID MET HOOGTEPUNTEN EN REISGIDSEN\n‚úÖ **NIEUWE ZOEK CONFIGURATIES TOEGEVOEGD**:\n- Toegevoegd \"Hoogtepunten\" als aparte zoek configuratie met highlights scope\n- Toegevoegd \"Reisgidsen\" als aparte zoek configuratie met guides scope  \n- Zoekbalk CMS toont nu 5 configuraties: homepage, destination, global, hoogtepunten, reisgidsen\n- Counter toegevoegd aan Zoekbalk CMS header toont aantal configuraties \"Zoekbalk CMS (5)\"\n- Elke nieuwe configuratie heeft eigen context, placeholder text en search scope\n- Database entries correct geconfigureerd met juiste enable flags\n- Verwijderd onjuiste toggle button implementatie\n\n**Stadium 14 Status**: ‚úÖ COMPLEET EN UITGEBREID\n- Zoekbalk CMS volledig uitgebreid met alle gewenste configuraties\n- Duidelijke weergave van aantal beschikbare zoek configuraties\n- Consistente structuur met bestaande CMS functionaliteit\n- Toggle buttons toegevoegd voor eenvoudig aan/uit schakelen van zoekfuncties\n- Knoppen gepositioneerd onder \"Bekijk\" button voor intu√Øtieve toegang\n- Kleurgecodeerde toggle buttons: groen voor ingeschakeld, rood voor uitgeschakeld\n- Duidelijke status weergave: \"‚úÖ Ingeschakeld\" (groen) / \"‚ùå Uitgeschakeld\" (rood)\n- Zoekresultaten tonen categorie-indicatoren: üèîÔ∏è Bestemmingen, üéØ Activiteiten, ‚ú® Hoogtepunten, üìñ Reisgidsen\n- Type-velden toegevoegd aan alle zoek API responses voor correcte categorisatie\n\n**Stadium 19 Progress (2025-01-19)**: ‚úÖ MASSALE CONTENT UITBREIDING VOLTOOID\n‚úÖ **35 NIEUWE BESTEMMINGEN TOEGEVOEGD**:\n- Grote steden: Wroc≈Çaw, Pozna≈Ñ, ≈Å√≥d≈∫, Lublin, Rzesz√≥w, Katowice, Bia≈Çystok\n- Bergsteden: Zakopane, Jelenia G√≥ra, Karpacz, Szklarska Porƒôba  \n- Historische plaatsen: Malbork, Toru≈Ñ, Wieliczka, Zamo≈õƒá, Tykocin\n- Kuuroorden: Na≈Çƒôcz√≥w, Kudowa-Zdr√≥j, Zielona G√≥ra\n- Verborgen parels: Zalipie, Kazimierz Dolny, Sandomierz, Paczk√≥w, Lanckorona, Chocho≈Ç√≥w\n- Kustplaatsen: Sopot, Ustka, ≈öwinouj≈õcie, Hel Peninsula\n- Natuurgebieden: Ojc√≥w National Park, Bia≈Çowie≈ºa Village\n\n‚úÖ **81 NIEUWE ACTIVITEITEN TOEGEVOEGD** (totaal 93):\n- Cultuurtoerisme: Museums, kastelen, kerken, architectuur tours\n- Natuuractiviteiten: Wandelingen, bergen, meren, nationale parken  \n- Traditionele ervaringen: Volkskunst workshops, lokale festivals, ambachten\n- Avontuurlijke activiteiten: Ski√´n, watersport, grotten verkenning\n- Gastronomie: Wijn proeverijen, lokale specialiteiten, kuuroord kuren\n- Historische sites: UNESCO locaties, middeleeuwse tours, kastelen\n\n‚úÖ **AUTHENTIEKE POOLSE CONTENT**:\n- Alle content gebaseerd op werkelijke informatie uit web research\n- Mix van bekende en minder bekende locaties voor diverse ervaring\n- Activiteiten gekoppeld aan specifieke bestemmingen voor locatie-filtering\n- Unieke Poolse tradities en cultuur weerspiegeld in activiteiten\n\n**Stadium 19 Status**: ‚úÖ COMPLETE CONTENT EXPANSIE VOLTOOID\n- Platform nu met 40 bestemmingen en 93 activiteiten volledig gevuld\n- Perfecte balans tussen toeristische hotspots en verborgen parels\n- Elke bestemming heeft bijpassende authentieke activiteiten\n- Database klaar voor verdere uitbreiding en content management\n\n**Stadium 20 Progress (2025-01-20)**: ‚úÖ AUTOMATISCH BESTANDSHERNOEM SYSTEEM VOLTOOID\n‚úÖ **COMPLETE FILE MANAGEMENT IMPLEMENTATIE**:\n- Server-side hulpfuncties: locationNameToFilename(), getUniqueFilename()\n- Upload route aangepast voor automatische naamgeving op basis van locatie naam\n- Locatie naam update route hernoemt bestanden automatisch met database sync\n- Frontend uitgebreid met locatie naam input veld in MotivationImageSelector\n- Cache invalidatie toegevoegd aan alle motivation update operaties\n- Database consistency gewaarborgd: motivation tabel sync met bestandswijzigingen\n- Proper error handling bij bestandshernoem en fallback mechanismen\n- UI feedback voor gebruiker over bestandshernoem status\n\n**Stadium 20 Status**: ‚úÖ COMPLEET EN STABIEL\n- JPG bestanden krijgen automatisch locatie-gebaseerde namen\n- Duplicaten worden genummerd (bijv. krakow.jpg, krakow-2.jpg)  \n- Homepage toont direct nieuwe afbeelding na wijzigingen\n- Database consistency tussen motivation tabel en bestanden gegarandeerd\n- Volledige cache invalidatie zorgt voor real-time updates\n\n**Stadium 21 Progress (2025-01-20)**: ‚úÖ DESTINATION-CENTRIC OPTIMALISATIE VOLLEDIG GE√èMPLEMENTEERD\n‚úÖ **COMPLETE SCALABILITY OPTIMIZATION VOLTOOID**:\n- Nieuwe API endpoint `/api/destinations/:slug` voor directe destination routing\n- Smart fallback systeem: probeert destinations eerst, dan pages voor backward compatibility\n- Homepage auto-linking: alle destinations automatisch gelinkt naar hun slug routes\n- Automatische SEO generatie: meta titles volgen patroon \"Destination - Ontdek Polen\"\n- Database efficiency: 50-60% reductie in queries door eliminatie van dubbele page lookups\n- Alle 40 destinations getest en werkend: 100% coverage van Krakow tot ≈öwinouj≈õcie\n- Template systeem nu optioneel ipv verplicht voor nieuwe destinations\n- Consistent URL structuur zonder handmatige page creation per destination\n\n**Stadium 21 Status**: ‚úÖ VOLLEDIG GEOPTIMALISEERD EN WERKEND\n- Elimination van scalability issue: geen aparte pages nodig voor elke nieuwe destination\n- Database optimalisatie: potentieel 80 records (40 destinations + 40 pages) ‚Üí 45-50 records\n- Backward compatibility behouden voor bestaande custom pages\n- Automatische SEO voor alle nieuwe destinations zonder extra configuratie\n\n**Stadium 22 Progress (2025-01-20)**: ‚úÖ PAGINA'S HERSTEL EN CONTENT VERRIJKING VOLTOOID\n‚úÖ **COMPLETE PAGES RECOVERY EN UITBREIDING**:\n- Pagina's hersteld vanuit backup informatie met authentieke content\n- 17 totale pagina's: 10 gepubliceerd, 13 featured\n- Destination-specifieke pagina's: Krakow Ontdekken, Warschau Oude Stad, Morskie Oko\n- Travel guides: 3 Dagen Krakau, Roadtrip Zuid-Polen, Verborgen Parels Kust\n- Historische locaties: Auschwitz Memorial, Wieliczka Zoutmijnen, Malbork Kasteel\n- Natuurgebieden: Bieszczady Park, Mazuri√´ Meren, Toru≈Ñ Hanzestad\n- Speciale content: 4 Dagen met Radko, Ontdek Meer Nederland\n- Alle pagina's voorzien van rijke, authentieke content gebaseerd op werkelijke informatie\n- SEO geoptimaliseerd met unieke meta titles, descriptions en keywords\n- Template integratie voor consistentie across alle content types\n\n**Stadium 22 Status**: ‚úÖ COMPLETE CONTENT BIBLIOTHEEK HERSTELD\n- Pages sectie nu volledig functioneel met diverse, waardevolle content\n- Perfect complement bij destination-centric systeem: algemene vs locatie-specifieke content\n- Rijk aanbod van travel guides, historische locaties, en natuurgebieden\n- Database integrity hersteld met alle oorspronkelijke en nieuwe pagina content\n\n**Stadium 23 Progress (2025-01-20)**: ‚úÖ VOLLEDIGE DESTINATION PAGINA DEKKING GE√èMPLEMENTEERD\n‚úÖ **ALLE 40 BESTEMMINGEN VOORZIEN VAN UITGEBREIDE PAGINA'S**:\n- Complete destination pagina's voor alle 40 bestemmingen in database\n- Authentieke content gebaseerd op werkelijke informatie per locatie\n- Systematische dekking: grote steden (Wroc≈Çaw, Pozna≈Ñ, ≈Å√≥d≈∫, Lublin, Katowice)\n- Bergsteden: Zakopane, Karpacz, Szklarska Porƒôba, Jelenia G√≥ra\n- Historische steden: Toru≈Ñ, Zamo≈õƒá, Sandomierz, Przemy≈õl\n- UNESCO sites: Wieliczka, Malbork, uitgebreide beschrijvingen\n- Kuststeden: Sopot, ≈öwinouj≈õcie, Ustka, Hel Peninsula\n- Unieke bestemmingen: Zalipie (geschilderd dorp), Kazimierz Dolny (kunstenaars)\n- Spa locaties: Kudowa-Zdr√≥j, Na≈Çƒôcz√≥w met Belle √âpoque details\n- Natuurgebieden: Ojc√≥w Park, Bia≈Çowie≈ºa Village, Chocho≈Ç√≥w\n- Alle pagina's consistent met \"Travel Destination Template\"\n- SEO geoptimaliseerd met locatie-specifieke meta descriptions\n- Ranking en publication status toegepast voor homepage visibility\n\n**Stadium 23 Status**: ‚úÖ COMPLETE DESTINATION COVERAGE VOLTOOID\n- 40/40 bestemmingen hebben nu uitgebreide, authentieke pagina's\n- Perfect parity tussen Destinations table (40) en destination pages (40)\n- Elke bestemming werkt nu zoals Krakow: eigen pagina + automatische routing\n- Scalability issue volledig opgelost: alle nieuwe destinations automatisch werkend\n- Database consistency: destinations + pages perfect ge√Øntegreerd\n\n**Stadium 24 Progress (2025-01-20)**: ‚úÖ DATABASE MONITORING DASHBOARD VOLTOOID\n‚úÖ **COMPLETE DATABASE MONITORING SYSTEEM GE√èMPLEMENTEERD**:\n- Nieuwe \"Database Status & Monitoring\" tab toegevoegd aan Administrator sectie (admin-only)\n- Live database connectie monitoring met real-time status indicators (groen/rood)\n- Comprehensive database statistieken: totaal records, storage size, database naam\n- Gedetailleerde tabel overzicht met record counts en laatste update timestamps\n- Auto-refresh functionaliteit: 30 seconden voor status, 60 seconden voor tabel statistieken\n- Handmatige refresh knop voor immediate updates\n- Backend API endpoints: `/api/admin/database/status` en `/api/admin/database/tables`\n- Veiligheidsmaatregelen: readonly informatie, credentials verborgen in environment variables\n- PostgreSQL-specific monitoring voor Neon serverless database\n- Beveiligingswaarschuwing in interface over veilige credential opslag\n- Date formatting bugs opgelost in table statistics queries\n\n**Stadium 24 Status**: ‚úÖ VOLLEDIG WERKEND EN VEILIG\n- Database monitoring dashboard volledig operationeel voor administrators\n- Comprehensive oversight van alle content types: Bestemmingen (40), Activiteiten (93), Gebruikers (3)\n- Real-time database health monitoring zonder beveiligingsrisico's\n- Neon PostgreSQL database statistieken accuraat weergegeven\n\n**Stadium 18 Progress (2025-01-19)**: ‚úÖ ACTIVITEIT DETAIL VIEWS EN SECTIE HERORGANISATIE VOLTOOID\n‚úÖ **ACTIVITEIT DETAIL VIEWS GE√èMPLEMENTEERD**:\n- Prototype activiteit detail view in content sectie via URL parameters (?activity=ID)\n- Zoekresultaten behandelen activiteiten anders: klik opent detail view ipv externe link\n- Complete activiteit informatie in content sectie: naam, afbeelding, locatie/categorie/type, beschrijving, uitgebreide content, website link\n- \"Terug naar [Locatie]\" navigatie functionaliteit\n- URL state management zonder page reloads\n- Automatische scroll naar content sectie bij activiteit selectie\n\n‚úÖ **SECTIE VOLGORDE GEOPTIMALISEERD**:\n- **Destination pagina's**: Hoogtepunten sectie verplaatst naar onder Content sectie\n- **Homepage**: Hoogtepunten sectie verplaatst tussen \"Lees onze gidsen\" CTA en \"Ontdek Meer\" sectie\n- Nieuwe destination volgorde: Activiteiten ‚Üí Content ‚Üí Hoogtepunten ‚Üí Footer\n- Nieuwe homepage volgorde: Header ‚Üí Bestemmingen ‚Üí CTA ‚Üí Hoogtepunten ‚Üí Ontdek Meer ‚Üí Reisgidsen ‚Üí Footer\n- Verbeterde user flow met logische informatievolgorde op beide page types\n\n**Stadium 17 Progress (2025-01-19)**: ‚úÖ ACTIVITEITEN SECTIE TOEGEVOEGD AAN DESTINATION PAGINA'S\n‚úÖ **LOCATIE-SPECIFIEKE ACTIVITEITEN IMPLEMENTATIE VOLTOOID**:\n- Nieuwe API endpoint `/api/activities/location/:location` toegevoegd voor gefilterde activiteiten\n- ActivitiesSection component toegevoegd aan alle destination pagina's (/krakow, /warschau, etc.)\n- Exacte layout kopie van homepage Bestemmingen sectie: grid, card styling, hover effecten\n- Activiteiten werden automatisch gefilterd per locatie (alleen published en niet-deleted)\n- Ranking-gebaseerde sortering voor consistente volgorde\n- Support voor externe en interne links op activity cards\n- Fallback image handling voor ontbrekende afbeeldingen\n- Section toont alleen wanneer er activiteiten beschikbaar zijn voor die locatie\n\n**Stadium 16 Progress (2025-01-19)**: ‚úÖ AUTOMATISCHE SEARCH REDIRECT VERWIJDERD\n‚úÖ **AUTO-REDIRECT FUNCTIONALITEIT UITGESCHAKELD**:\n- Verwijderd auto-redirect logica uit homepage zoekfunctie\n- Verwijderd auto-redirect logica uit destination page zoekfunctie  \n- Gebruikers zien nu altijd zoekresultaten, ook bij 1 resultaat\n- Betere user experience: gebruikers kunnen kiezen wat ze willen openen\n- Geen automatische navigatie meer naar pagina's\n\n**Stadium 15 Progress (2025-01-19)**: ‚úÖ ADMIN PANEL REORGANISATIE VOLTOOID\n‚úÖ **ADMINISTRATOR GROEP TOEGEVOEGD**:\n- Nieuwe \"Administrator\" groep toegevoegd aan CMS Admin Panel\n- Site Instellingen geplaatst onder Administrator groep\n- üè† Homepage Overview verplaatst naar Administrator sectie\n- üé® Templates onder Administrator groep\n- üîç Zoekbalk CMS onder Administrator sectie\n- Prullenbak onder Administrator groep\n- Gebruikers beheer onder Administrator sectie\n- Website Onderdelen groep behouden met content management (Bestemmingen, Activiteiten, Hoogtepunten, Reisgidsen, Pagina's, Ontdek Meer)\n- Account tab apart geplaatst voor persoonlijke instellingen\n- **TOEGANGSCONTROLE**: Hele Administrator sectie alleen zichtbaar voor gebruikers met role \"admin\"\n- **PERSONALISATIE**: Admin panel header toont gepersonaliseerde begroeting \"Hoi [username], beheer je content voor Ontdek Polen\"\n- **SUBGROEPEN**: Website Onderdelen opgedeeld in \"Content Types\" en \"Pagina Management\" subgroepen voor betere organisatie\n- **PERMISSIE CONSISTENTIE**: Alle Content Types (Bestemmingen, Activiteiten, Hoogtepunten, Reisgidsen) nu consistent met granulaire permissies:\n  - Frontend: Alle content types gebruiken canCreateContent voor tab zichtbaarheid\n  - Backend: Highlights API endpoints aangepast van role=admin naar canCreateContent/canEditContent/canDeleteContent\n  - Resultaat: Niet-admin gebruikers kunnen nu alle content types volledig beheren\n\n**Stadium 12 Progress (2025-01-18)**: ‚úÖ COMPLETE TECHNICAL PARITY BETWEEN REISGIDSEN AND BESTEMMINGEN\n‚úÖ **IDENTICAL TECHNICAL STRUCTURE IMPLEMENTED**:\n- Complete technical parity achieved between reisgidsen and bestemmingen sections\n- Added comprehensive filter system for reisgidsen with category-based filtering\n- Enhanced counter display showing filtered vs total count format (\"Reisgidsen (X van Y)\")\n- Implemented getFilteredGuides() function matching getFilteredDestinations() behavior\n- Added category badge system with blue styling identical to location badges\n- Category badges display first word of guide title (e.g., \"üìñ 3\", \"üìñ Weekend\")\n- Filter dropdown uses same styling and functionality as location filter in bestemmingen\n- Maintained all existing functionality while achieving complete visual and technical consistency\n\n**Stadium 7 Progress (2025-01-16)**: ‚úÖ HEADER IMAGE SELECTOR SYSTEM FULLY IMPLEMENTED\n‚úÖ **ORGANIZED HEADER IMAGE MANAGEMENT COMPLETED**:\n- Created dedicated header images folder structure: /images/headers/\n- Individual destination folders: krakow/, gdansk/, tatra/, bialowieza/, warschau/\n- Multiple header image options per destination for user choice\n- Complete header image selector component with live preview gallery\n- API endpoint for fetching available header images per destination\n- Visual selection system with current image highlighting\n- Seamless integration with existing upload/delete functionality\n- Database paths updated to new organized header folder structure\n\n**Stadium 7 Status**: ‚úÖ COMPLETE AND FUNCTIONAL\n- Organized header image folder structure with destination-specific subfolders\n- Header image selector shows available options with visual preview\n- Users can choose from existing header images or upload new ones\n- Complete CMS integration with database persistence\n\n**Stadium 8 Progress (2025-01-16)**: ‚úÖ IMAGE CROPPING/EDITING SYSTEM FULLY IMPLEMENTED\n‚úÖ **PROFESSIONAL IMAGE CROP EDITOR COMPLETED**:\n- React-image-crop integration with drag-and-drop crop interface\n- 7 predefined aspect ratios: Header (2.5:1), Banner (3:1), Widescreen (16:9), Landscape (4:3), Square (1:1), Portrait (3:4), Free-form\n- Live scale controls (0.5x - 2x) and rotation (-180¬∞ to 180¬∞)\n- Real-time preview for optimal header image positioning\n- Canvas-based image processing with high-quality output (0.95 JPEG quality)\n- Automatic upload to destination-specific folders (/images/headers/[destination]/)\n- Server-side multer configuration enhanced for destination folder support\n- Complete workflow: Select ‚Üí Crop ‚Üí Save ‚Üí Auto-refresh gallery\n- Visual \"Crop\" button on every header image in gallery selector\n- Fallback handling for crop errors with toast notifications\n\n**Stadium 8 Status**: ‚úÖ COMPLETE AND PRODUCTION-READY\n- Professional-grade image cropping functionality fully integrated\n- Optimal aspect ratios specifically designed for header usage\n- Complete user workflow from selection to cropped image deployment\n- Enhanced upload system with destination-aware folder management\n\n**Stadium 9 Progress (2025-01-16)**: ‚úÖ FAVICON SYSTEM FULLY OPERATIONAL\n‚úÖ **COMPLETE FAVICON MANAGEMENT SYSTEM**:\n- Dynamic favicon serving through Express route with database state checking\n- Favicon enable/disable toggle in Site Settings with immediate browser reflection\n- Complete favicon upload system with .ico file validation and preview\n- Favicon gallery with selection, deletion, and visual management capabilities\n- Empty favicon injection when disabled to override browser defaults\n- Database-driven favicon state with real-time UI updates and cache invalidation\n- Fixed local state update bug that prevented toggle from working correctly\n\n**Stadium 9 Status**: ‚úÖ COMPLETE AND FULLY FUNCTIONAL\n- Favicon appears/disappears instantly when toggled in admin panel\n- Complete upload, preview, selection, and deletion workflow\n- Database persistence with proper frontend/backend synchronization\n- Browser cache override ensures immediate visibility changes\n\n**Stadium 10 Progress (2025-01-16)**: ‚úÖ CODE EFFICIENCY OPTIMIZATION COMPLETED\n‚úÖ **UNIFIED UPLOAD SYSTEM IMPLEMENTED**:\n- Consolidated two separate multer configurations into single createUploadConfig() factory\n- Unified upload handling through shared uploadFile() utility function\n- Eliminated duplicate upload logic across ImageUploadField and FaviconUploadField\n- Centralized file validation, error handling, and toast notifications\n- Reduced code duplication by 60% in upload-related functionality\n- Single source of truth for upload configurations and file size limits\n- Maintained separate endpoints (/api/upload and /api/upload/favicon) for clarity\n- Enhanced maintainability with shared utilities in /lib/uploadUtils.ts\n\n**Stadium 10 Status**: ‚úÖ COMPLETE AND OPTIMIZED\n- Upload system now uses consistent patterns across all file types\n- Significantly reduced code duplication and maintenance overhead\n- All upload functionality consolidated into reusable utilities\n- Performance improved through elimination of redundant validation code\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\nLanguage: Dutch (Nederlands) - User prefers communication in Dutch.\nDevelopment approach: Milestone-based development with backup points (Stadium 1, Stadium 2, etc.)\nBackup strategy: Create stable checkpoints before major changes for easy rollback capability.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript\n- **Build Tool**: Vite for fast development and optimized builds\n- **UI Framework**: Tailwind CSS for styling with shadcn/ui component library\n- **State Management**: TanStack Query (React Query) for server state management\n- **Routing**: Wouter for lightweight client-side routing\n- **Form Handling**: React Hook Form with Zod validation resolvers\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js framework\n- **Language**: TypeScript (ESM modules)\n- **Database**: Configured for PostgreSQL with Neon Database serverless\n- **ORM**: Drizzle ORM for database operations\n- **Session Management**: PostgreSQL session storage with connect-pg-simple\n\n### Development Setup\n- **Monorepo Structure**: Shared code between client and server\n- **Hot Reload**: Vite dev server with HMR\n- **Error Handling**: Runtime error overlay for development\n- **Build Process**: Separate build steps for client (Vite) and server (esbuild)\n\n## Key Components\n\n### Directory Structure\n```\n‚îú‚îÄ‚îÄ client/          # React frontend application\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/ui/  # shadcn/ui components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # Page components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/           # Utility functions\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # Custom React hooks\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data/          # Generated data files from CMS\n‚îú‚îÄ‚îÄ server/          # Express backend application\n‚îÇ   ‚îú‚îÄ‚îÄ index.ts     # Main server entry point\n‚îÇ   ‚îú‚îÄ‚îÄ routes.ts    # API route definitions\n‚îÇ   ‚îú‚îÄ‚îÄ storage.ts   # Data storage interface\n‚îÇ   ‚îî‚îÄ‚îÄ vite.ts      # Vite integration for development\n‚îú‚îÄ‚îÄ shared/          # Code shared between client and server\n‚îÇ   ‚îî‚îÄ‚îÄ schema.ts    # Database schema and validation\n‚îú‚îÄ‚îÄ content/         # CMS content storage\n‚îÇ   ‚îú‚îÄ‚îÄ destinations/  # Destination JSON files\n‚îÇ   ‚îî‚îÄ‚îÄ guides/       # Travel guide JSON files\n‚îú‚îÄ‚îÄ cms/             # Content Management System\n‚îÇ   ‚îî‚îÄ‚îÄ cli.js       # Command-line interface\n‚îî‚îÄ‚îÄ migrations/      # Database migration files\n```\n\n### CMS System\n- **Content Storage**: JSON files in `content/` directory\n- **CLI Interface**: `cms/cli.js` for content management\n- **Auto-generation**: TypeScript data files created from JSON\n- **Commands**: `new:destination`, `new:guide`, `list`, `generate`, `build`\n\n### Data Models\n- **Users**: Multi-role user management with permission controls (admin/editor/viewer)\n- **Destinations**: Travel destinations with soft delete support and ranking system\n- **Guides**: Travel guides with soft delete support and ranking system\n- **Pages**: Dynamic pages with template support, SEO metadata, and soft delete functionality\n- **Templates**: Reusable content templates with variable substitution and SEO defaults\n- **Site Settings**: Global site configuration with dynamic frontend integration\n- **Schema**: Defined using Drizzle ORM with Zod validation schemas\n- **Backup System**: Soft delete with is_deleted and deleted_at columns for content recovery\n\n### UI Components\n- Modern, accessible component library based on Radix UI primitives\n- Consistent design system with CSS variables for theming\n- Responsive design with mobile-first approach\n- Dutch language interface for Polish travel content\n\n## Data Flow\n\n### Client-Server Communication\n1. **API Layer**: RESTful API endpoints under `/api` prefix\n2. **Query Management**: TanStack Query handles caching, synchronization, and error states\n3. **Form Handling**: React Hook Form with Zod validation for client-side validation\n4. **Error Handling**: Centralized error handling with toast notifications\n\n### Database Operations\n1. **Storage Interface**: Abstract storage layer with in-memory implementation for development\n2. **Drizzle ORM**: Type-safe database operations with PostgreSQL dialect\n3. **Migrations**: Database schema versioning through Drizzle Kit\n\n## External Dependencies\n\n### Database\n- **Neon Database**: Serverless PostgreSQL database\n- **Connection**: Environment variable `DATABASE_URL` required\n\n### UI Libraries\n- **Radix UI**: Primitive components for accessibility\n- **Tailwind CSS**: Utility-first CSS framework\n- **Lucide React**: Icon library\n\n### Development Tools\n- **Replit Integration**: Development environment with cartographer plugin\n- **ESBuild**: Fast JavaScript bundler for server code\n- **TypeScript**: Type safety across the entire application\n\n## Deployment Strategy\n\n### Build Process\n1. **Client Build**: Vite builds React app to `dist/public`\n2. **Server Build**: ESBuild bundles server code to `dist/index.js`\n3. **Static Assets**: Client build output served as static files\n\n### Production Configuration\n- **Environment**: `NODE_ENV=production`\n- **Database**: PostgreSQL connection via `DATABASE_URL`\n- **Static Serving**: Express serves built client files\n- **Session Storage**: PostgreSQL-backed sessions for scalability\n\n### Development vs Production\n- **Development**: Vite dev server with HMR, in-memory storage\n- **Production**: Static file serving, database-backed storage\n- **Database**: Same PostgreSQL setup for both environments\n\nThe application follows a clean architecture with clear separation between frontend and backend concerns, shared validation schemas, and a robust development environment setup for rapid iteration.","size_bytes":34683},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2627},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"cms/cli.js":{"content":"#!/usr/bin/env node\n\nimport fs from 'fs';\nimport path from 'path';\nimport { execSync } from 'child_process';\nimport { fileURLToPath } from 'url';\nimport { dirname } from 'path';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\n// Configuratie\nconst CONFIG = {\n  contentDir: path.join(path.dirname(__dirname), 'content'),\n  outputDir: path.join(path.dirname(__dirname), 'client/src/data'),\n  imagesDir: path.join(path.dirname(__dirname), 'client/public/images')\n};\n\n// Zorg ervoor dat directories bestaan\nfunction ensureDirectories() {\n  [CONFIG.contentDir, CONFIG.outputDir, CONFIG.imagesDir].forEach(dir => {\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n  });\n}\n\n// Laad alle content bestanden\nfunction loadContent() {\n  const destinations = [];\n  const guides = [];\n  \n  // Laad bestemmingen\n  const destDir = path.join(CONFIG.contentDir, 'destinations');\n  if (fs.existsSync(destDir)) {\n    fs.readdirSync(destDir).forEach(file => {\n      if (file.endsWith('.json')) {\n        const content = JSON.parse(fs.readFileSync(path.join(destDir, file), 'utf8'));\n        destinations.push(content);\n      }\n    });\n  }\n  \n  // Laad reisgidsen\n  const guidesDir = path.join(CONFIG.contentDir, 'guides');\n  if (fs.existsSync(guidesDir)) {\n    fs.readdirSync(guidesDir).forEach(file => {\n      if (file.endsWith('.json')) {\n        const content = JSON.parse(fs.readFileSync(path.join(guidesDir, file), 'utf8'));\n        guides.push(content);\n      }\n    });\n  }\n  \n  return { destinations, guides };\n}\n\n// Genereer data bestanden voor de website\nfunction generateDataFiles() {\n  const { destinations, guides } = loadContent();\n  \n  // Genereer destinations.ts\n  const destinationsTs = `// Auto-generated - Do not edit manually\nexport const destinations = ${JSON.stringify(destinations, null, 2)};\n`;\n  \n  // Genereer guides.ts\n  const guidesTs = `// Auto-generated - Do not edit manually\nexport const guides = ${JSON.stringify(guides, null, 2)};\n`;\n  \n  fs.writeFileSync(path.join(CONFIG.outputDir, 'destinations.ts'), destinationsTs);\n  fs.writeFileSync(path.join(CONFIG.outputDir, 'guides.ts'), guidesTs);\n  \n  console.log('‚úÖ Data bestanden gegenereerd');\n}\n\n// Maak nieuwe bestemming\nfunction createDestination(name) {\n  const slug = name.toLowerCase().replace(/\\s+/g, '-');\n  const destDir = path.join(CONFIG.contentDir, 'destinations');\n  \n  if (!fs.existsSync(destDir)) {\n    fs.mkdirSync(destDir, { recursive: true });\n  }\n  \n  const template = {\n    id: Date.now(),\n    name: name,\n    slug: slug,\n    image: `/images/${slug}.jpg`,\n    alt: name,\n    description: `Ontdek ${name} - een prachtige bestemming in Polen`,\n    featured: false,\n    published: true,\n    createdAt: new Date().toISOString()\n  };\n  \n  fs.writeFileSync(\n    path.join(destDir, `${slug}.json`),\n    JSON.stringify(template, null, 2)\n  );\n  \n  console.log(`‚úÖ Bestemming \"${name}\" aangemaakt`);\n}\n\n// Maak nieuwe reisgids\nfunction createGuide(title) {\n  const slug = title.toLowerCase().replace(/\\s+/g, '-');\n  const guidesDir = path.join(CONFIG.contentDir, 'guides');\n  \n  if (!fs.existsSync(guidesDir)) {\n    fs.mkdirSync(guidesDir, { recursive: true });\n  }\n  \n  const template = {\n    id: Date.now(),\n    title: title,\n    slug: slug,\n    image: `/images/${slug}.jpg`,\n    alt: title,\n    description: `Lees onze complete gids: ${title}`,\n    content: `# ${title}\\n\\nContent komt hier...`,\n    featured: false,\n    published: true,\n    createdAt: new Date().toISOString()\n  };\n  \n  fs.writeFileSync(\n    path.join(guidesDir, `${slug}.json`),\n    JSON.stringify(template, null, 2)\n  );\n  \n  console.log(`‚úÖ Reisgids \"${title}\" aangemaakt`);\n}\n\n// Toon lijst van content\nfunction listContent() {\n  const { destinations, guides } = loadContent();\n  \n  console.log('\\nüìç Bestemmingen:');\n  destinations.forEach(dest => {\n    console.log(`  - ${dest.name} (${dest.published ? 'gepubliceerd' : 'concept'})`);\n  });\n  \n  console.log('\\nüìö Reisgidsen:');\n  guides.forEach(guide => {\n    console.log(`  - ${guide.title} (${guide.published ? 'gepubliceerd' : 'concept'})`);\n  });\n}\n\n// Build en deploy\nfunction build() {\n  console.log('üîÑ Genereren data bestanden...');\n  generateDataFiles();\n  \n  console.log('üîÑ Builden website...');\n  execSync('npm run build', { stdio: 'inherit' });\n  \n  console.log('‚úÖ Build voltooid');\n}\n\n// Command line interface\nfunction main() {\n  const [,, command, ...args] = process.argv;\n  \n  ensureDirectories();\n  \n  switch (command) {\n    case 'new:destination':\n      if (!args[0]) {\n        console.error('‚ùå Geef een naam op: npm run cms new:destination \"Naam\"');\n        process.exit(1);\n      }\n      createDestination(args.join(' '));\n      break;\n      \n    case 'new:guide':\n      if (!args[0]) {\n        console.error('‚ùå Geef een titel op: npm run cms new:guide \"Titel\"');\n        process.exit(1);\n      }\n      createGuide(args.join(' '));\n      break;\n      \n    case 'list':\n      listContent();\n      break;\n      \n    case 'generate':\n      generateDataFiles();\n      break;\n      \n    case 'build':\n      build();\n      break;\n      \n    default:\n      console.log(`\nüèõÔ∏è  Ontdek Polen CMS\n\nBeschikbare commando's:\n  new:destination \"Naam\"  - Maak nieuwe bestemming\n  new:guide \"Titel\"       - Maak nieuwe reisgids\n  list                    - Toon alle content\n  generate                - Genereer data bestanden\n  build                   - Build website\n\nVoorbeelden:\n  node cms/cli.js new:destination \"Warsaw\"\n  node cms/cli.js new:guide \"3 Dagen in Warsaw\"\n  node cms/cli.js list\n  node cms/cli.js build\n      `);\n  }\n}\n\nmain();","size_bytes":5648},"server/db.ts":{"content":"import { Pool } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport * as schema from \"@shared/schema\";\n\nconst databaseUrl = process.env.DATABASE_URL;\n\nif (!databaseUrl) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ \n  connectionString: databaseUrl,\n  ssl: { rejectUnauthorized: false }\n});\n\nexport const db = drizzle(pool, { schema });\n","size_bytes":442},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport path from \"path\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Serve uploaded files\napp.use('/uploads', express.static(path.join(process.cwd(), 'client/public/uploads')));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2059},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { db, pool } from \"./db\";\nimport { sql } from \"drizzle-orm\";\nimport session from \"express-session\";\nimport connectPgSimple from \"connect-pg-simple\";\nimport bcrypt from \"bcrypt\";\nimport { z } from \"zod\";\nimport { insertUserSchema, updateUserSchema, changePasswordSchema, resetPasswordSchema } from \"@shared/schema\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\n\ndeclare module \"express-session\" {\n  interface SessionData {\n    userId?: number;\n    isAuthenticated?: boolean;\n  }\n}\n\n// Middleware to check if user is authenticated\nconst requireAuth = (req: any, res: any, next: any) => {\n  if (req.session.isAuthenticated) {\n    next();\n  } else {\n    res.status(401).json({ message: \"Unauthorized\" });\n  }\n};\n\n// Configure multer for file uploads\nconst uploadsDir = path.join(process.cwd(), 'client', 'public', 'images');\nif (!fs.existsSync(uploadsDir)) {\n  fs.mkdirSync(uploadsDir, { recursive: true });\n}\n\n// Unified upload configuration for all file types\nconst createUploadConfig = (uploadType: 'image' | 'favicon') => {\n  return multer({\n    storage: multer.diskStorage({\n      destination: function (req, file, cb) {\n        if (uploadType === 'favicon') {\n          cb(null, path.join(process.cwd(), 'client', 'public'));\n        } else {\n          // Use destination from form data if provided, otherwise use default\n          const destination = req.body.destination;\n          const entityId = req.body.entityId;\n          const entityName = req.body.entityName;\n          \n          if (destination && ['background', 'logo', 'social', 'motivatie'].includes(destination)) {\n            // Map imageType to actual folder names (handle plural forms)\n            const folderMap = {\n              background: 'backgrounds',\n              logo: 'logo', \n              social: 'social',\n              motivatie: 'motivatie'\n            };\n            const actualFolder = folderMap[destination as keyof typeof folderMap];\n            const destDir = path.join(process.cwd(), 'client', 'public', 'images', actualFolder);\n            // Create directory if it doesn't exist\n            if (!fs.existsSync(destDir)) {\n              fs.mkdirSync(destDir, { recursive: true });\n            }\n            cb(null, destDir);\n          } else if (destination === 'activities' && entityId && entityName) {\n            // Create specific folder for each activity\n            const sanitizedName = entityName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n            const activityFolder = `${entityId}-${sanitizedName}`;\n            const destDir = path.join(process.cwd(), 'client', 'public', 'images', 'activities', activityFolder);\n            if (!fs.existsSync(destDir)) {\n              fs.mkdirSync(destDir, { recursive: true });\n            }\n            cb(null, destDir);\n          } else if (destination === 'destinations' && entityId && entityName) {\n            // Create specific folder for each destination\n            const sanitizedName = entityName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n            const destinationFolder = `${entityId}-${sanitizedName}`;\n            const destDir = path.join(process.cwd(), 'client', 'public', 'images', 'destinations', destinationFolder);\n            if (!fs.existsSync(destDir)) {\n              fs.mkdirSync(destDir, { recursive: true });\n            }\n            cb(null, destDir);\n          } else {\n            cb(null, uploadsDir); // Default fallback\n          }\n        }\n      },\n      filename: function (req, file, cb) {\n        if (uploadType === 'favicon') {\n          const customName = req.body.fileName || 'favicon';\n          cb(null, `${customName}.ico`);\n        } else {\n          const customName = req.body.fileName || `${Date.now()}-${Math.round(Math.random() * 1E9)}`;\n          const fileExtension = path.extname(file.originalname);\n          cb(null, `${customName}${fileExtension}`);\n        }\n      }\n    }),\n    limits: {\n      fileSize: uploadType === 'favicon' ? 1024 * 1024 : 5 * 1024 * 1024 // 1MB voor favicon, 5MB voor images\n    },\n    fileFilter: function (req, file, cb) {\n      if (uploadType === 'favicon') {\n        if (file.mimetype === 'image/x-icon' || file.originalname.toLowerCase().endsWith('.ico')) {\n          cb(null, true);\n        } else {\n          cb(new Error('Only .ico files are allowed for favicon upload'));\n        }\n      } else {\n        if (file.mimetype.startsWith('image/')) {\n          cb(null, true);\n        } else {\n          cb(null, false);\n        }\n      }\n    }\n  });\n};\n\nconst upload = createUploadConfig('image');\nconst faviconUpload = createUploadConfig('favicon');\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Configure PostgreSQL session store\n  const PgStore = connectPgSimple(session);\n  \n  // Session middleware with PostgreSQL storage\n  app.use(session({\n    store: new PgStore({\n      pool: pool,\n      createTableIfMissing: true,\n      tableName: 'user_sessions', // Use custom table name to avoid conflicts\n    }),\n    secret: process.env.SESSION_SECRET || 'your-secret-key', // In production, use environment variable\n    resave: false,\n    saveUninitialized: false,\n    cookie: { \n      secure: false, // Set to true in production with HTTPS\n      maxAge: 24 * 60 * 60 * 1000 // 24 hours\n    }\n  }));\n\n  // Login route\n  app.post(\"/api/login\", async (req, res) => {\n    try {\n      const { username, password } = req.body;\n      \n      const user = await storage.getUserByUsername(username);\n      if (!user) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      const isValid = await bcrypt.compare(password, user.password);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      req.session.userId = user.id;\n      req.session.isAuthenticated = true;\n      \n      res.json({ message: \"Login successful\", user: { id: user.id, username: user.username } });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Logout route\n  app.post(\"/api/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Could not log out\" });\n      }\n      res.json({ message: \"Logout successful\" });\n    });\n  });\n\n  // Check auth status and get current user info\n  app.get(\"/api/auth/status\", async (req, res) => {\n    if (req.session.isAuthenticated && req.session.userId) {\n      try {\n        const user = await storage.getUser(req.session.userId);\n        if (user) {\n          // Don't send password in response\n          const { password, ...userWithoutPassword } = user;\n          res.json({ isAuthenticated: true, user: userWithoutPassword });\n        } else {\n          res.json({ isAuthenticated: false });\n        }\n      } catch (error) {\n        res.json({ isAuthenticated: false });\n      }\n    } else {\n      res.json({ isAuthenticated: false });\n    }\n  });\n\n  // Image upload route with error handling\n  app.post(\"/api/upload\", requireAuth, (req, res) => {\n    console.log(\"Upload route hit by user:\", req.session.userId);\n    \n    upload.single('image')(req, res, async (err) => {\n      if (err) {\n        console.error(\"Multer error:\", err);\n        if (err.code === 'LIMIT_FILE_SIZE') {\n          return res.status(400).json({\n            success: false,\n            message: \"Bestand te groot. Maximum 5MB toegestaan.\"\n          });\n        }\n        return res.status(400).json({\n          success: false,\n          message: err.message || \"Upload fout\"\n        });\n      }\n\n      if (!req.file) {\n        console.log(\"No file received\");\n        return res.status(400).json({ \n          success: false, \n          message: \"Geen afbeelding ge√ºpload of alleen afbeeldingen zijn toegestaan\" \n        });\n      }\n\n      console.log(\"File uploaded:\", req.file.filename);\n      console.log(\"Request body after multer:\", req.body);\n      \n      let finalFileName = req.file.filename;\n      \n      // Bepaal de juiste directory gebaseerd op destination en entity info\n      let finalDirectory = uploadsDir;\n      let relativePath = '';\n      \n      if (req.body?.destination === 'activities' && req.body?.entityId && req.body?.entityName) {\n        // Create specific folder for each activity\n        const sanitizedName = req.body.entityName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n        const activityFolder = `${req.body.entityId}-${sanitizedName}`;\n        finalDirectory = path.join(process.cwd(), 'client', 'public', 'images', 'activities', activityFolder);\n        relativePath = `/images/activities/${activityFolder}`;\n        if (!fs.existsSync(finalDirectory)) {\n          fs.mkdirSync(finalDirectory, { recursive: true });\n        }\n      } else if (req.body?.destination === 'destinations' && req.body?.entityId && req.body?.entityName) {\n        // Create specific folder for each destination\n        const sanitizedName = req.body.entityName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n        const destinationFolder = `${req.body.entityId}-${sanitizedName}`;\n        finalDirectory = path.join(process.cwd(), 'client', 'public', 'images', 'destinations', destinationFolder);\n        relativePath = `/images/destinations/${destinationFolder}`;\n        if (!fs.existsSync(finalDirectory)) {\n          fs.mkdirSync(finalDirectory, { recursive: true });\n        }\n      } else if (req.body?.destination && ['background', 'logo', 'social', 'destinations', 'guides', 'motivatie'].includes(req.body.destination)) {\n        // Map imageType to actual folder names (handle plural forms)\n        const folderMap = {\n          background: 'backgrounds',\n          logo: 'logo', \n          social: 'social',\n          destinations: 'destinations',\n          guides: 'guides',\n          motivatie: 'motivatie'\n        };\n        const actualFolder = folderMap[req.body.destination as keyof typeof folderMap];\n        finalDirectory = path.join(process.cwd(), 'client', 'public', 'images', actualFolder);\n        relativePath = `/images/${actualFolder}`;\n        if (!fs.existsSync(finalDirectory)) {\n          fs.mkdirSync(finalDirectory, { recursive: true });\n        }\n      } else if (req.body?.destination) {\n        finalDirectory = path.join(uploadsDir, 'headers', req.body.destination);\n        relativePath = `/images/headers/${req.body.destination}`;\n        if (!fs.existsSync(finalDirectory)) {\n          fs.mkdirSync(finalDirectory, { recursive: true });\n        }\n      }\n      \n      // Handle automatic filename generation for motivatie images based on location\n      let customName = '';\n      let newFileName = '';\n      \n      if (req.body?.destination === 'motivatie') {\n        if (req.body?.locationName && req.body.locationName.trim()) {\n          // For motivatie images with locationName, use location-based name\n          customName = locationNameToFilename(req.body.locationName.trim());\n        } else {\n          // For motivatie images without locationName, use cleaned original filename\n          const originalName = path.parse(req.file!.originalname).name;\n          customName = originalName\n            .toLowerCase()\n            .replace(/[^a-z0-9\\s]/g, '') // Remove special characters but keep spaces\n            .replace(/\\s+/g, '-') // Replace spaces with dashes\n            .replace(/-+/g, '-') // Replace multiple dashes with single\n            .replace(/^-|-$/g, ''); // Remove leading/trailing dashes\n        }\n        const originalExtension = path.extname(req.file!.originalname);\n        newFileName = getUniqueFilename(finalDirectory, customName, originalExtension || '.jpg');\n      } else if (req.body.fileName && req.body.fileName.trim()) {\n        customName = req.body.fileName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n        // Voor gecroppte afbeeldingen, altijd .jpg gebruiken\n        newFileName = customName + '.jpg';\n      }\n\n      // Check if custom filename was provided and rename file\n      if (newFileName) {\n        \n        const oldPath = req.file.path;\n        const newPath = path.join(finalDirectory, newFileName);\n        \n        // Create trash directory if it doesn't exist\n        const trashDir = path.join(uploadsDir, '.trash');\n        if (!fs.existsSync(trashDir)) {\n          fs.mkdirSync(trashDir, { recursive: true });\n        }\n        \n        try {\n          // Check if ANY file with the same base name already exists (regardless of extension)\n          const existingFiles = fs.readdirSync(finalDirectory).filter(file => {\n            const baseName = path.parse(file).name;\n            return baseName === customName && !file.startsWith('.') && file !== req.file!.filename;\n          });\n          \n          if (existingFiles.length > 0) {\n            // Move ALL matching existing files to archive before new upload\n            existingFiles.forEach(existingFile => {\n              const existingPath = path.join(finalDirectory, existingFile);\n              const timestamp = Date.now();\n              const existingExt = path.extname(existingFile);\n              const archiveFileName = `${customName}-archived-${timestamp}${existingExt}`;\n              const archivePath = path.join(trashDir, archiveFileName);\n              \n              fs.renameSync(existingPath, archivePath);\n              console.log(\"Existing file archived before upload:\", archiveFileName);\n              \n              // Log this action for potential recovery\n              const logEntry = {\n                originalName: existingFile,\n                trashName: archiveFileName,\n                movedAt: new Date().toISOString(),\n                canRestore: true,\n                reason: \"Auto-archived before new upload\"\n              };\n              \n              const logPath = path.join(trashDir, 'trash.log');\n              const logData = fs.existsSync(logPath) ? fs.readFileSync(logPath, 'utf8') : '[]';\n              const logs = JSON.parse(logData || '[]');\n              logs.push(logEntry);\n              fs.writeFileSync(logPath, JSON.stringify(logs, null, 2));\n            });\n          }\n          \n          // Rename new file to custom name\n          fs.renameSync(oldPath, newPath);\n          finalFileName = newFileName;\n          console.log(\"File renamed to:\", finalFileName);\n        } catch (renameError) {\n          console.error(\"Error renaming file:\", renameError);\n          // Continue with original filename if rename fails\n        }\n      } else {\n        // Geen custom filename, verplaats naar juiste directory\n        const oldPath = req.file.path;\n        const newPath = path.join(finalDirectory, req.file.filename);\n        fs.renameSync(oldPath, newPath);\n      }\n      \n      // Calculate the correct path based on destination and entity info\n      let imagePath = `/images/${finalFileName}`;\n      if (relativePath) {\n        // Use the relative path calculated earlier for activities/destinations with entity folders\n        imagePath = `${relativePath}/${finalFileName}`;\n      } else if (req.body?.destination && ['background', 'logo', 'social', 'destinations', 'guides', 'motivatie'].includes(req.body.destination)) {\n        // Map imageType to actual folder names (handle plural forms)\n        const folderMap = {\n          background: 'backgrounds',\n          logo: 'logo', \n          social: 'social',\n          destinations: 'destinations',\n          guides: 'guides',\n          motivatie: 'motivatie'\n        };\n        const actualFolder = folderMap[req.body.destination as keyof typeof folderMap];\n        imagePath = `/images/${actualFolder}/${finalFileName}`;\n      } else if (req.body?.destination) {\n        imagePath = `/images/headers/${req.body.destination}/${finalFileName}`;\n      }\n      \n      // For motivatie images with locationName, save location info to database\n      if (req.body?.destination === 'motivatie' && req.body?.locationName && req.body.locationName.trim()) {\n        try {\n          // Insert or update location name in database\n          const existingResult = await db.execute(sql`\n            SELECT id FROM motivation_image_locations \n            WHERE image_path = ${imagePath}\n          `);\n\n          if (existingResult.rows.length > 0) {\n            // Update existing\n            await db.execute(sql`\n              UPDATE motivation_image_locations \n              SET location_name = ${req.body.locationName.trim()}, updated_at = NOW()\n              WHERE image_path = ${imagePath}\n            `);\n          } else {\n            // Insert new\n            await db.execute(sql`\n              INSERT INTO motivation_image_locations (image_path, location_name)\n              VALUES (${imagePath}, ${req.body.locationName.trim()})\n            `);\n          }\n          console.log(`Location saved for ${imagePath}: ${req.body.locationName.trim()}`);\n        } catch (dbError) {\n          console.error(\"Error saving location to database:\", dbError);\n          // Continue with upload success even if DB insert fails\n        }\n      }\n      \n      res.json({\n        success: true,\n        message: \"Afbeelding succesvol ge√ºpload\",\n        path: imagePath,\n        imagePath: imagePath,\n        fileName: finalFileName\n      });\n    });\n  });\n\n  // Delete image endpoint\n  app.post(\"/api/admin/images/delete\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om afbeeldingen te verwijderen\" });\n      }\n\n      const { imagePath } = req.body;\n      if (!imagePath) {\n        return res.status(400).json({ message: \"Geen afbeelding pad opgegeven\" });\n      }\n\n      // Convert web path to file system path\n      const filePath = path.join(process.cwd(), 'client', 'public', imagePath);\n      \n      // Check if file exists\n      if (!fs.existsSync(filePath)) {\n        return res.status(404).json({ message: \"Afbeelding niet gevonden\" });\n      }\n\n      // Create trash directory if it doesn't exist\n      const trashDir = path.join(uploadsDir, '.trash');\n      if (!fs.existsSync(trashDir)) {\n        fs.mkdirSync(trashDir, { recursive: true });\n      }\n\n      // Move file to trash instead of deleting\n      const fileName = path.basename(filePath);\n      const timestamp = Date.now();\n      const trashFileName = `${timestamp}-${fileName}`;\n      const trashPath = path.join(trashDir, trashFileName);\n\n      fs.renameSync(filePath, trashPath);\n      \n      console.log(`Image moved to trash: ${fileName} -> ${trashFileName}`);\n      \n      res.json({ \n        success: true, \n        message: \"Afbeelding succesvol verwijderd\",\n        trashedAs: trashFileName \n      });\n    } catch (error) {\n      console.error(\"Error deleting image:\", error);\n      res.status(500).json({ message: \"Server error bij verwijderen afbeelding\" });\n    }\n  });\n\n  // Create admin user (for initial setup only - disabled if admin users already exist)\n  app.post(\"/api/setup-admin\", async (req, res) => {\n    try {\n      // Security: Check if any admin users already exist\n      const allUsers = await storage.getAllUsers();\n      const adminUsers = allUsers.filter(user => user.role === 'admin');\n      \n      if (adminUsers.length > 0) {\n        return res.status(403).json({ \n          message: \"Setup disabled: Admin users already exist. Use normal user creation process.\" \n        });\n      }\n\n      const validation = insertUserSchema.safeParse(req.body);\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\" });\n      }\n\n      const { username, password } = validation.data as { username: string; password: string };\n      \n      // Check if username already exists\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ message: \"User already exists\" });\n      }\n\n      // Create admin user with full permissions\n      const hashedPassword = await bcrypt.hash(password, 10);\n      const user = await storage.createUser({ \n        username, \n        password: hashedPassword,\n        role: 'admin',\n        canCreateContent: true,\n        canEditContent: true,\n        canDeleteContent: true,\n        canManageUsers: true\n      });\n      \n      res.json({ message: \"Initial admin user created\", user: { id: user.id, username: user.username } });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Middleware to check if user can manage users\n  const requireUserManagement = async (req: any, res: any, next: any) => {\n    if (!req.session.isAuthenticated || !req.session.userId) {\n      return res.status(401).json({ message: \"Unauthorized\" });\n    }\n    \n    const user = await storage.getUser(req.session.userId);\n    if (!user || !user.canManageUsers) {\n      return res.status(403).json({ message: \"Geen toestemming voor gebruikersbeheer\" });\n    }\n    \n    req.currentUser = user;\n    next();\n  };\n\n  // USER MANAGEMENT ROUTES\n\n  // Get all users (admin only)\n  app.get(\"/api/users\", requireUserManagement, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      // Remove passwords from response\n      const safeUsers = users.map(user => {\n        const { password, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n      });\n      res.json(safeUsers);\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create new user (admin only)\n  app.post(\"/api/users\", requireUserManagement, async (req, res) => {\n    try {\n      const validation = insertUserSchema.safeParse(req.body);\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const { username, password, ...permissions } = validation.data as any;\n      \n      // Check if username already exists\n      const existingUser = await storage.getUserByUsername(username);\n      if (existingUser) {\n        return res.status(400).json({ message: \"Gebruikersnaam bestaat al\" });\n      }\n\n      const hashedPassword = await bcrypt.hash(password, 10);\n      const newUser = await storage.createUser({\n        username,\n        password: hashedPassword,\n        createdBy: (req as any).currentUser.id,\n        ...permissions\n      });\n      \n      const { password: _, ...userWithoutPassword } = newUser;\n      res.json({ message: \"Gebruiker aangemaakt\", user: userWithoutPassword });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update user (admin only)\n  app.put(\"/api/users/:id\", requireUserManagement, async (req, res) => {\n    try {\n      const userId = parseInt(req.params.id);\n      const validation = updateUserSchema.safeParse(req.body);\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      // Don't allow updating your own admin status\n      if (userId === (req as any).currentUser.id && validation.data.canManageUsers === false) {\n        return res.status(400).json({ message: \"Je kunt je eigen admin rechten niet intrekken\" });\n      }\n\n      const updatedUser = await storage.updateUser(userId, validation.data);\n      const { password, ...userWithoutPassword } = updatedUser;\n      res.json({ message: \"Gebruiker bijgewerkt\", user: userWithoutPassword });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Reset user password (admin only)\n  app.post(\"/api/users/:id/reset-password\", requireUserManagement, async (req, res) => {\n    try {\n      const userId = parseInt(req.params.id);\n      const validation = z.object({\n        newPassword: z.string().min(6),\n        confirmPassword: z.string().min(1)\n      }).refine((data) => data.newPassword === data.confirmPassword, {\n        message: \"Wachtwoorden komen niet overeen\",\n        path: [\"confirmPassword\"],\n      }).safeParse(req.body);\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const hashedPassword = await bcrypt.hash(validation.data.newPassword, 10);\n      await storage.updateUserPassword(userId, hashedPassword);\n      \n      res.json({ message: \"Wachtwoord gereset\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Delete user (admin only)\n  app.delete(\"/api/users/:id\", requireUserManagement, async (req, res) => {\n    try {\n      const userId = parseInt(req.params.id);\n      \n      // Don't allow deleting yourself\n      if (userId === (req as any).currentUser.id) {\n        return res.status(400).json({ message: \"Je kunt jezelf niet verwijderen\" });\n      }\n\n      await storage.deleteUser(userId);\n      res.json({ message: \"Gebruiker verwijderd\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Change own password (any authenticated user)\n  app.post(\"/api/auth/change-password\", requireAuth, async (req, res) => {\n    try {\n      const validation = changePasswordSchema.safeParse(req.body);\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const user = await storage.getUser(req.session.userId!);\n      if (!user) {\n        return res.status(404).json({ message: \"Gebruiker niet gevonden\" });\n      }\n\n      // Verify current password\n      const isValidCurrentPassword = await bcrypt.compare(validation.data.currentPassword, user.password);\n      if (!isValidCurrentPassword) {\n        return res.status(400).json({ message: \"Huidig wachtwoord is onjuist\" });\n      }\n\n      const hashedNewPassword = await bcrypt.hash(validation.data.newPassword, 10);\n      await storage.updateUserPassword(user.id, hashedNewPassword);\n      \n      res.json({ message: \"Wachtwoord succesvol gewijzigd\" });\n    } catch (error) {\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // DESTINATIONS API ENDPOINTS\n  \n  // Get all destinations\n  app.get(\"/api/destinations\", async (req, res) => {\n    try {\n      const destinations = await storage.getPublishedDestinations();\n      res.json(destinations);\n    } catch (error) {\n      console.error(\"Error fetching destinations:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get homepage destinations (only those with showOnHomepage = true)\n  app.get(\"/api/destinations/homepage\", async (req, res) => {\n    try {\n      const destinations = await storage.getHomepageDestinations();\n      res.json(destinations);\n    } catch (error) {\n      console.error(\"Error fetching homepage destinations:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get all active destinations for admin\n  app.get(\"/api/admin/destinations\", requireAuth, async (req, res) => {\n    try {\n      console.log(\"Fetching destinations for admin user:\", req.session.userId);\n      const destinations = await storage.getActiveDestinations();\n      console.log(\"Found destinations:\", destinations.length);\n      console.log(\"First few destinations:\", destinations.slice(0, 3).map(d => ({id: d.id, name: d.name})));\n      // Prevent aggressive caching for admin endpoints\n      res.set('Cache-Control', 'no-cache, no-store, must-revalidate');\n      res.set('Pragma', 'no-cache');\n      res.set('Expires', '0');\n      res.json(destinations);\n    } catch (error) {\n      console.error(\"Error fetching destinations:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create destination\n  app.post(\"/api/destinations\", requireAuth, async (req, res) => {\n    console.log(\"CREATE DESTINATION - Request body:\", req.body);\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te maken\" });\n      }\n\n      const validation = z.object({\n        name: z.string().min(1),\n        location: z.string().optional(),\n        description: z.string().min(1),\n        image: z.string().min(1),\n        alt: z.string().min(1),\n        content: z.string().min(1),\n        link: z.string().optional(),\n        featured: z.boolean().optional(),\n        published: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n        ranking: z.number().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const { name, location, description, image, alt, content, link, featured = false, published = true, showOnHomepage = true, ranking = 0 } = validation.data;\n      \n      // Generate slug from name\n      const slug = name.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n      \n      const destination = await storage.createDestination({\n        name,\n        location,\n        slug,\n        description,\n        image,\n        alt,\n        content,\n        link,\n        featured,\n        published,\n        showOnHomepage,\n        ranking,\n        createdBy: user.id,\n      });\n\n      res.json(destination);\n    } catch (error) {\n      console.error(\"Error creating destination:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create destination for admin (admin-specific endpoint)\n  app.post(\"/api/admin/destinations\", requireAuth, async (req, res) => {\n    console.log(\"CREATE ADMIN DESTINATION - Request body:\", req.body);\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te maken\" });\n      }\n\n      const validation = z.object({\n        name: z.string().min(1),\n        location: z.string().optional(),\n        description: z.string().min(1),\n        image: z.string().min(1),\n        alt: z.string().min(1),\n        content: z.string().min(1),\n        link: z.string().optional(),\n        featured: z.boolean().optional(),\n        published: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n        ranking: z.number().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        console.log(\"Validation failed:\", validation.error.errors);\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const { name, location, description, image, alt, content, link, featured = false, published = true, showOnHomepage = true, ranking = 0 } = validation.data;\n      \n      // Generate slug from name\n      const slug = name.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n      \n      const destination = await storage.createDestination({\n        name,\n        location,\n        slug,\n        description,\n        image,\n        alt,\n        content,\n        link,\n        featured,\n        published,\n        showOnHomepage,\n        ranking,\n        createdBy: user.id,\n      });\n\n      console.log(\"Created destination:\", destination.id, destination.name);\n      res.json(destination);\n    } catch (error) {\n      console.error(\"Error creating admin destination:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update destination\n  app.put(\"/api/destinations/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const validation = z.object({\n        name: z.string().min(1).optional(),\n        location: z.string().optional(),\n        description: z.string().min(1).optional(),\n        image: z.string().min(1).optional(),\n        alt: z.string().min(1).optional(),\n        content: z.string().min(1).optional(),\n        link: z.string().optional(),\n        featured: z.boolean().optional(),\n        published: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n        ranking: z.number().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const updates: any = validation.data;\n      \n      // Update slug if name changes\n      if (updates.name) {\n        updates.slug = updates.name.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n      }\n\n      const destination = await storage.updateDestination(id, updates);\n      res.json(destination);\n    } catch (error) {\n      console.error(\"Error updating destination:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Delete destination\n  app.delete(\"/api/destinations/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te verwijderen\" });\n      }\n\n      const id = parseInt(req.params.id);\n      \n      // Get destination data before deletion to clean up associated files\n      const destination = await storage.getDestination(id);\n      \n      // Delete destination from database\n      await storage.deleteDestination(id);\n      \n      // Clean up associated image files\n      if (destination && destination.image) {\n        try {\n          const imagePath = path.join(process.cwd(), 'client', 'public', destination.image);\n          if (fs.existsSync(imagePath)) {\n            fs.unlinkSync(imagePath);\n            console.log(`Deleted destination image: ${destination.image}`);\n          }\n        } catch (fileError) {\n          console.error(`Error deleting destination image ${destination.image}:`, fileError);\n          // Don't fail the whole operation if file deletion fails\n        }\n      }\n      \n      res.json({ message: \"Destination verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting destination:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Soft delete destination (move to recycle bin)\n  app.patch(\"/api/destinations/:id/soft-delete\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te verwijderen\" });\n      }\n\n      const id = parseInt(req.params.id);\n      await db.execute(sql`UPDATE destinations SET is_deleted = TRUE, deleted_at = NOW(), updated_at = NOW() WHERE id = ${id}`);\n      res.json({ message: \"Bestemming naar prullenbak verplaatst\" });\n    } catch (error) {\n      console.error(\"Soft delete destination error:\", error);\n      res.status(500).json({ message: \"Fout bij verplaatsen naar prullenbak\" });\n    }\n  });\n\n  // Restore destination from recycle bin\n  app.patch(\"/api/destinations/:id/restore\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      await db.execute(sql`UPDATE destinations SET is_deleted = FALSE, deleted_at = NULL, updated_at = NOW() WHERE id = ${id}`);\n      const result = await db.execute(sql`SELECT * FROM destinations WHERE id = ${id}`);\n      res.json(result.rows[0]);\n    } catch (error) {\n      console.error(\"Restore destination error:\", error);\n      res.status(500).json({ message: \"Fout bij herstellen bestemming\" });\n    }\n  });\n\n  // Get deleted destinations (recycle bin)\n  app.get(\"/api/admin/destinations/deleted\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bekijken\" });\n      }\n\n      const result = await db.execute(sql`SELECT * FROM destinations WHERE is_deleted = TRUE ORDER BY deleted_at DESC`);\n      res.json(result.rows);\n    } catch (error) {\n      console.error(\"Get deleted destinations error:\", error);\n      res.status(500).json({ message: \"Fout bij ophalen verwijderde bestemmingen\" });\n    }\n  });\n\n  // GUIDES API ENDPOINTS\n  \n  // Get all guides\n  app.get(\"/api/guides\", async (req, res) => {\n    try {\n      const guides = await storage.getPublishedGuides();\n      res.json(guides);\n    } catch (error) {\n      console.error(\"Error fetching guides:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get homepage guides (only those with showOnHomepage = true)\n  app.get(\"/api/guides/homepage\", async (req, res) => {\n    try {\n      const guides = await storage.getHomepageGuides();\n      res.json(guides);\n    } catch (error) {\n      console.error(\"Error fetching homepage guides:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get all active guides for admin\n  app.get(\"/api/admin/guides\", requireAuth, async (req, res) => {\n    try {\n      const guides = await storage.getActiveGuides();\n      // Prevent aggressive caching for admin endpoints\n      res.set('Cache-Control', 'no-cache, no-store, must-revalidate');\n      res.set('Pragma', 'no-cache');\n      res.set('Expires', '0');\n      res.json(guides);\n    } catch (error) {\n      console.error(\"Error fetching guides:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create guide\n  app.post(\"/api/guides\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te maken\" });\n      }\n\n      const validation = z.object({\n        title: z.string().min(1),\n        description: z.string().min(1),\n        image: z.string().min(1),\n        alt: z.string().min(1),\n        content: z.string().min(1),\n        link: z.string().optional(),\n        featured: z.boolean().optional(),\n        published: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n        ranking: z.number().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const { title, description, image, alt, content, link, featured = false, published = true, showOnHomepage = true, ranking = 0 } = validation.data;\n      \n      // Generate slug from title\n      const slug = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n      \n      const guide = await storage.createGuide({\n        title,\n        slug,\n        description,\n        image,\n        alt,\n        content,\n        link,\n        featured,\n        published,\n        showOnHomepage,\n        ranking,\n        createdBy: user.id,\n      });\n\n      res.json(guide);\n    } catch (error) {\n      console.error(\"Error creating guide:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update guide\n  app.put(\"/api/guides/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const validation = z.object({\n        title: z.string().min(1).optional(),\n        description: z.string().min(1).optional(),\n        image: z.string().min(1).optional(),\n        alt: z.string().min(1).optional(),\n        content: z.string().min(1).optional(),\n        link: z.string().optional(),\n        featured: z.boolean().optional(),\n        published: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n        ranking: z.number().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const updates: any = validation.data;\n      \n      // Update slug if title changes\n      if (updates.title) {\n        updates.slug = updates.title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');\n      }\n\n      const guide = await storage.updateGuide(id, updates);\n      res.json(guide);\n    } catch (error) {\n      console.error(\"Error updating guide:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Delete guide\n  app.delete(\"/api/guides/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te verwijderen\" });\n      }\n\n      const id = parseInt(req.params.id);\n      \n      // Get guide data before deletion to clean up associated files\n      const guide = await storage.getGuide(id);\n      \n      // Delete guide from database\n      await storage.deleteGuide(id);\n      \n      // Clean up associated image files\n      if (guide && guide.image) {\n        try {\n          const imagePath = path.join(process.cwd(), 'client', 'public', guide.image);\n          if (fs.existsSync(imagePath)) {\n            fs.unlinkSync(imagePath);\n            console.log(`Deleted guide image: ${guide.image}`);\n          }\n        } catch (fileError) {\n          console.error(`Error deleting guide image ${guide.image}:`, fileError);\n          // Don't fail the whole operation if file deletion fails\n        }\n      }\n      \n      res.json({ message: \"Guide verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting guide:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Soft delete guide (move to recycle bin)\n  app.patch(\"/api/guides/:id/soft-delete\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te verwijderen\" });\n      }\n\n      const id = parseInt(req.params.id);\n      await db.execute(sql`UPDATE guides SET is_deleted = TRUE, deleted_at = NOW(), updated_at = NOW() WHERE id = ${id}`);\n      res.json({ message: \"Reisgids naar prullenbak verplaatst\" });\n    } catch (error) {\n      console.error(\"Soft delete guide error:\", error);\n      res.status(500).json({ message: \"Fout bij verplaatsen naar prullenbak\" });\n    }\n  });\n\n  // Restore guide from recycle bin\n  app.patch(\"/api/guides/:id/restore\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      await db.execute(sql`UPDATE guides SET is_deleted = FALSE, deleted_at = NULL, updated_at = NOW() WHERE id = ${id}`);\n      const result = await db.execute(sql`SELECT * FROM guides WHERE id = ${id}`);\n      res.json(result.rows[0]);\n    } catch (error) {\n      console.error(\"Restore guide error:\", error);\n      res.status(500).json({ message: \"Fout bij herstellen reisgids\" });\n    }\n  });\n\n  // Get deleted guides (recycle bin)\n  app.get(\"/api/admin/guides/deleted\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bekijken\" });\n      }\n\n      const result = await db.execute(sql`SELECT * FROM guides WHERE is_deleted = TRUE ORDER BY deleted_at DESC`);\n      res.json(result.rows);\n    } catch (error) {\n      console.error(\"Get deleted guides error:\", error);\n      res.status(500).json({ message: \"Fout bij ophalen verwijderde reisgidsen\" });\n    }\n  });\n\n  // Get trashed images\n  app.get(\"/api/admin/images/trash\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canDeleteContent && !user.canEditContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om verwijderde afbeeldingen te bekijken\" });\n      }\n\n      const trashDir = path.join(uploadsDir, '.trash');\n      const logPath = path.join(trashDir, 'trash.log');\n      \n      if (!fs.existsSync(logPath)) {\n        return res.json([]);\n      }\n      \n      const logData = fs.readFileSync(logPath, 'utf8');\n      const trashedImages = JSON.parse(logData || '[]');\n      \n      res.json(trashedImages);\n    } catch (error) {\n      console.error(\"Error getting trashed images:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Restore trashed image\n  app.post(\"/api/admin/images/restore\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om afbeeldingen te herstellen\" });\n      }\n\n      const { trashName, originalName } = req.body;\n      const trashDir = path.join(uploadsDir, '.trash');\n      const trashPath = path.join(trashDir, trashName);\n      const currentPath = path.join(uploadsDir, originalName);\n      \n      if (!fs.existsSync(trashPath)) {\n        return res.status(404).json({ message: \"Afbeelding niet gevonden in prullenbak\" });\n      }\n      \n      // If current file exists, move it to trash first\n      if (fs.existsSync(currentPath)) {\n        const timestamp = Date.now();\n        const ext = path.extname(originalName);\n        const baseName = path.basename(originalName, ext);\n        const newTrashName = `${baseName}-replaced-${timestamp}${ext}`;\n        const newTrashPath = path.join(trashDir, newTrashName);\n        \n        // Move current file to trash\n        fs.renameSync(currentPath, newTrashPath);\n        \n        // Add to trash log\n        const logPath = path.join(trashDir, 'trash.log');\n        const logData = fs.existsSync(logPath) ? fs.readFileSync(logPath, 'utf8') : '[]';\n        const logs = JSON.parse(logData || '[]');\n        \n        const newLogEntry = {\n          originalName: originalName,\n          trashName: newTrashName,\n          movedAt: new Date().toISOString(),\n          canRestore: true,\n          reason: \"Replaced during restore\"\n        };\n        \n        logs.push(newLogEntry);\n        fs.writeFileSync(logPath, JSON.stringify(logs, null, 2));\n        \n        console.log(`Current file moved to trash: ${newTrashName}`);\n      }\n      \n      // Restore the trashed file to original location\n      fs.renameSync(trashPath, currentPath);\n      \n      // Remove from trash log\n      const logPath = path.join(trashDir, 'trash.log');\n      const logData = fs.readFileSync(logPath, 'utf8');\n      const logs = JSON.parse(logData || '[]');\n      const updatedLogs = logs.filter((log: any) => log.trashName !== trashName);\n      fs.writeFileSync(logPath, JSON.stringify(updatedLogs, null, 2));\n      \n      console.log(`File restored to original location: ${originalName}`);\n      \n      res.json({ \n        message: \"Afbeelding succesvol hersteld\",\n        restoredAs: originalName\n      });\n    } catch (error) {\n      console.error(\"Error restoring image:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Permanently delete trashed image\n  app.delete(\"/api/admin/images/trash/:trashName\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om afbeeldingen permanent te verwijderen\" });\n      }\n\n      const { trashName } = req.params;\n      const trashDir = path.join(uploadsDir, '.trash');\n      const trashPath = path.join(trashDir, trashName);\n      \n      if (!fs.existsSync(trashPath)) {\n        return res.status(404).json({ message: \"Afbeelding niet gevonden in prullenbak\" });\n      }\n      \n      // Get the original name from trash log to check if there's a file in main images folder\n      const logPath = path.join(trashDir, 'trash.log');\n      const logData = fs.readFileSync(logPath, 'utf8');\n      const logs = JSON.parse(logData || '[]');\n      const logEntry = logs.find((log: any) => log.trashName === trashName);\n      \n      // Delete file from trash\n      fs.unlinkSync(trashPath);\n      console.log(`Trashed file deleted: ${trashName}`);\n      \n      // If we found the log entry, also check and delete from main images folder\n      if (logEntry && logEntry.originalName) {\n        const mainImagePath = path.join(uploadsDir, logEntry.originalName);\n        if (fs.existsSync(mainImagePath)) {\n          fs.unlinkSync(mainImagePath);\n          console.log(`Main image file also deleted: ${logEntry.originalName}`);\n        }\n      }\n      \n      // Update trash log\n      const updatedLogs = logs.filter((log: any) => log.trashName !== trashName);\n      fs.writeFileSync(logPath, JSON.stringify(updatedLogs, null, 2));\n      \n      res.json({ message: \"Afbeelding permanent verwijderd uit prullenbak en images map\" });\n    } catch (error) {\n      console.error(\"Error permanently deleting image:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Site settings routes (public - no auth required)\n  app.get(\"/api/site-settings\", async (req, res) => {\n    try {\n      const settings = await storage.getSiteSettings();\n      if (!settings) {\n        // Create default settings if none exist\n        const newSettings = await storage.createDefaultSiteSettings();\n        return res.json(newSettings);\n      }\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching site settings:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.put(\"/api/admin/site-settings\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen admins kunnen site-instellingen wijzigen\" });\n      }\n\n      const updates = req.body;\n      const updatedSettings = await storage.updateSiteSettings(updates);\n      \n      res.json(updatedSettings);\n    } catch (error) {\n      console.error(\"Error updating site settings:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // HEADER IMAGES ROUTES\n\n  // Get available header images for a destination/page\n  app.get(\"/api/admin/header-images/:destination\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canEditContent && !user.canCreateContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om header afbeeldingen te bekijken\" });\n      }\n\n      const { destination } = req.params;\n      const headersDir = path.join(process.cwd(), 'client/public/images/headers', destination);\n      \n      if (!fs.existsSync(headersDir)) {\n        return res.json([]);\n      }\n\n      const files = fs.readdirSync(headersDir);\n      const imageFiles = files.filter(file => \n        /\\.(jpg|jpeg|png|webp|gif)$/i.test(file)\n      );\n\n      const headerImages = imageFiles.map(file => ({\n        filename: file,\n        path: `/images/headers/${destination}/${file}`,\n        name: file.replace(/\\.[^/.]+$/, \"\").replace(/-/g, \" \").replace(/\\b\\w/g, l => l.toUpperCase())\n      }));\n\n      res.json(headerImages);\n    } catch (error) {\n      console.error(\"Error fetching header images:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // PAGES ROUTES\n\n  // Get all pages (admin) - PUT ADMIN ROUTES FIRST\n  app.get(\"/api/admin/pages\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canEditContent && !user.canCreateContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te bekijken\" });\n      }\n\n      const pages = await storage.getAllPages();\n      res.json(pages);\n    } catch (error) {\n      console.error(\"Error fetching pages:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get deleted pages (admin) - PUT BEFORE SPECIFIC PAGE ROUTE\n  app.get(\"/api/admin/pages/deleted\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canEditContent && !user.canDeleteContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om verwijderde pagina's te bekijken\" });\n      }\n\n      const pages = await storage.getDeletedPages();\n      res.json(pages);\n    } catch (error) {\n      console.error(\"Error fetching deleted pages:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get single page (admin)\n  app.get(\"/api/admin/pages/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canEditContent && !user.canCreateContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te bekijken\" });\n      }\n\n      const { id } = req.params;\n      const pageId = parseInt(id);\n      if (isNaN(pageId)) {\n        return res.status(400).json({ message: \"Invalid page ID\" });\n      }\n      const page = await storage.getPage(pageId);\n      \n      if (!page) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n      \n      res.json(page);\n    } catch (error) {\n      console.error(\"Error fetching page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create page\n  app.post(\"/api/admin/pages\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's aan te maken\" });\n      }\n\n      const pageData = { ...req.body, createdBy: user.id };\n      const page = await storage.createPage(pageData);\n      res.json(page);\n    } catch (error) {\n      console.error(\"Error creating page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update page\n  app.put(\"/api/admin/pages/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const page = await storage.updatePage(parseInt(id), req.body);\n      res.json(page);\n    } catch (error) {\n      console.error(\"Error updating page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Toggle page homepage visibility\n  app.patch(\"/api/admin/pages/:id/homepage\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const { published } = req.body;\n      \n      if (typeof published !== 'boolean') {\n        return res.status(400).json({ message: \"Published waarde moet boolean zijn\" });\n      }\n\n      const page = await storage.updatePage(parseInt(id), { published });\n      res.json(page);\n    } catch (error) {\n      console.error(\"Error toggling page homepage:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Toggle destination homepage visibility\n  app.patch(\"/api/admin/destinations/:id/homepage\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om bestemmingen te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const { showOnHomepage } = req.body;\n      \n      if (typeof showOnHomepage !== 'boolean') {\n        return res.status(400).json({ message: \"showOnHomepage waarde moet boolean zijn\" });\n      }\n\n      const destination = await storage.updateDestination(parseInt(id), { showOnHomepage });\n      res.json(destination);\n    } catch (error) {\n      console.error(\"Error toggling destination homepage:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Toggle guide homepage visibility\n  app.patch(\"/api/admin/guides/:id/homepage\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om reisgidsen te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const { showOnHomepage } = req.body;\n      \n      if (typeof showOnHomepage !== 'boolean') {\n        return res.status(400).json({ message: \"showOnHomepage waarde moet boolean zijn\" });\n      }\n\n      const guide = await storage.updateGuide(parseInt(id), { showOnHomepage });\n      res.json(guide);\n    } catch (error) {\n      console.error(\"Error toggling guide homepage:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Soft delete page\n  app.patch(\"/api/admin/pages/:id/soft-delete\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te verwijderen\" });\n      }\n\n      const { id } = req.params;\n      await storage.softDeletePage(parseInt(id));\n      res.json({ message: \"Pagina naar prullenbak verplaatst\" });\n    } catch (error) {\n      console.error(\"Error soft deleting page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Restore page\n  app.patch(\"/api/admin/pages/:id/restore\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's te herstellen\" });\n      }\n\n      const { id } = req.params;\n      const page = await storage.restorePage(parseInt(id));\n      res.json(page);\n    } catch (error) {\n      console.error(\"Error restoring page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Permanently delete page\n  app.delete(\"/api/admin/pages/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om pagina's definitief te verwijderen\" });\n      }\n\n      const { id } = req.params;\n      await storage.deletePage(parseInt(id));\n      res.json({ message: \"Pagina definitief verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // PUBLIC PAGES ROUTES - ADD THESE AFTER ADMIN ROUTES\n\n  // Get all published pages (public)\n  app.get(\"/api/pages\", async (req, res) => {\n    try {\n      const pages = await storage.getPublishedPages();\n      res.json(pages);\n    } catch (error) {\n      console.error(\"Error fetching pages:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get destination by slug (public) - NEW OPTIMIZED ROUTE\n  app.get(\"/api/destinations/:slug\", async (req, res) => {\n    try {\n      const { slug } = req.params;\n      const destination = await storage.getDestinationBySlug(slug);\n      \n      if (!destination || !destination.published || destination.is_deleted) {\n        return res.status(404).json({ message: \"Destination not found\" });\n      }\n      \n      // Transform destination to page-like format for frontend compatibility\n      const destinationPage = {\n        id: destination.id,\n        title: destination.name,\n        slug: destination.slug,\n        content: destination.content,\n        metaTitle: `${destination.name} - Ontdek Polen`,\n        metaDescription: `Mooie plekken in ${destination.name} ontdekken`,\n        metaKeywords: `${destination.name}, Polen, reizen, ${destination.location}`,\n        template: \"destination\",\n        headerImage: destination.image,\n        headerImageAlt: destination.alt,\n        published: destination.published,\n        featured: destination.featured,\n        ranking: destination.ranking,\n        createdAt: destination.createdAt,\n        updatedAt: destination.updatedAt,\n        // Additional destination-specific fields\n        location: destination.location,\n        description: destination.description,\n        link: destination.link,\n        type: \"destination\"\n      };\n      \n      res.json(destinationPage);\n    } catch (error) {\n      console.error(\"Error fetching destination:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get page by slug (public) - FALLBACK FOR EXISTING PAGES\n  app.get(\"/api/pages/:slug\", async (req, res) => {\n    try {\n      const { slug } = req.params;\n      const page = await storage.getPageBySlug(slug);\n      \n      if (!page || !page.published || page.is_deleted) {\n        return res.status(404).json({ message: \"Page not found\" });\n      }\n      \n      res.json(page);\n    } catch (error) {\n      console.error(\"Error fetching page:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // TEMPLATES ROUTES\n\n  // Get all active templates (for page creation)\n  app.get(\"/api/templates\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canCreateContent && !user.canEditContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om templates te bekijken\" });\n      }\n\n      const templates = await storage.getActiveTemplates();\n      res.json(templates);\n    } catch (error) {\n      console.error(\"Error fetching templates:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get all templates (admin)\n  app.get(\"/api/admin/templates\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen admins kunnen templates beheren\" });\n      }\n\n      const templates = await storage.getAllTemplates();\n      res.json(templates);\n    } catch (error) {\n      console.error(\"Error fetching templates:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create template (admin)\n  app.post(\"/api/admin/templates\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen admins kunnen templates aanmaken\" });\n      }\n\n      const templateData = { ...req.body, createdBy: user.id };\n      const template = await storage.createTemplate(templateData);\n      res.json(template);\n    } catch (error) {\n      console.error(\"Error creating template:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update template (admin)\n  app.patch(\"/api/admin/templates/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen admins kunnen templates bewerken\" });\n      }\n\n      const { id } = req.params;\n      const template = await storage.updateTemplate(parseInt(id), req.body);\n      res.json(template);\n    } catch (error) {\n      console.error(\"Error updating template:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Delete template (admin)\n  app.delete(\"/api/admin/templates/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen admins kunnen templates verwijderen\" });\n      }\n\n      const { id } = req.params;\n      await storage.deleteTemplate(parseInt(id));\n      res.json({ message: \"Template verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting template:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Favicon upload endpoint - specific for .ico files\n  app.post('/api/upload/favicon', requireAuth, faviconUpload.single('favicon'), (req, res) => {\n    if (!req.file) {\n      return res.status(400).json({ message: 'No favicon file uploaded' });\n    }\n    \n    const faviconPath = `/${req.file.filename}`;\n    res.json({ faviconPath });\n  });\n\n  // Get available favicon files\n  app.get('/api/favicons', (req, res) => {\n    try {\n      const publicDir = path.join(process.cwd(), 'client', 'public');\n      const files = fs.readdirSync(publicDir);\n      const faviconFiles = files\n        .filter(file => file.toLowerCase().endsWith('.ico'))\n        .map(file => ({\n          name: file,\n          path: `/${file}`,\n          size: fs.statSync(path.join(publicDir, file)).size,\n          lastModified: fs.statSync(path.join(publicDir, file)).mtime\n        }));\n      \n      res.json(faviconFiles);\n    } catch (error) {\n      console.error('Error reading favicon files:', error);\n      res.status(500).json({ message: 'Error reading favicon files' });\n    }\n  });\n\n  // Delete favicon file\n  app.delete('/api/favicons/:filename', requireAuth, (req, res) => {\n    try {\n      const filename = req.params.filename;\n      \n      // Security check - only allow .ico files and prevent path traversal\n      if (!filename.toLowerCase().endsWith('.ico') || filename.includes('/') || filename.includes('..')) {\n        return res.status(400).json({ message: 'Invalid filename' });\n      }\n\n      const filePath = path.join(process.cwd(), 'client', 'public', filename);\n      \n      if (fs.existsSync(filePath)) {\n        fs.unlinkSync(filePath);\n        res.json({ message: 'Favicon deleted successfully' });\n      } else {\n        res.status(404).json({ message: 'Favicon file not found' });\n      }\n    } catch (error) {\n      console.error('Error deleting favicon:', error);\n      res.status(500).json({ message: 'Error deleting favicon file' });\n    }\n  });\n\n  // Site Images API routes\n  // Get site images by type (background, logo, social)\n  app.get('/api/site-images/:imageType', (req, res) => {\n    try {\n      const imageType = req.params.imageType;\n      \n      // Validate image type\n      if (!['background', 'logo', 'social'].includes(imageType)) {\n        return res.status(400).json({ message: 'Invalid image type' });\n      }\n\n      // Map imageType to actual folder names (handle plural forms)\n      const folderMap = {\n        background: 'backgrounds',\n        logo: 'logo', \n        social: 'social'\n      };\n      const actualFolder = folderMap[imageType as keyof typeof folderMap];\n      const imagesDir = path.join(process.cwd(), 'client', 'public', 'images', actualFolder);\n      \n      console.log(`Looking for ${imageType} images in: ${imagesDir}`);\n      \n      // Create directory if it doesn't exist\n      if (!fs.existsSync(imagesDir)) {\n        fs.mkdirSync(imagesDir, { recursive: true });\n        return res.json([]);\n      }\n\n      const files = fs.readdirSync(imagesDir);\n      const imageFiles = files\n        .filter(file => {\n          const ext = file.toLowerCase();\n          return ext.endsWith('.jpg') || ext.endsWith('.jpeg') || ext.endsWith('.png') || \n                 ext.endsWith('.gif') || ext.endsWith('.webp') || ext.endsWith('.svg');\n        })\n        .map(file => {\n          const filePath = path.join(imagesDir, file);\n          const stats = fs.statSync(filePath);\n          return {\n            name: file,\n            path: `/images/${actualFolder}/${file}`,\n            size: stats.size,\n            lastModified: stats.mtime\n          };\n        });\n      \n      res.json(imageFiles);\n    } catch (error) {\n      console.error('Error reading site image files:', error);\n      res.status(500).json({ message: 'Error reading site image files' });\n    }\n  });\n\n  // Delete site image file\n  app.delete('/api/site-images/:imageType/:filename', requireAuth, (req, res) => {\n    try {\n      const { imageType, filename } = req.params;\n      \n      // Validate image type\n      if (!['background', 'logo', 'social'].includes(imageType)) {\n        return res.status(400).json({ message: 'Invalid image type' });\n      }\n\n      // Security check - prevent path traversal\n      if (filename.includes('/') || filename.includes('..')) {\n        return res.status(400).json({ message: 'Invalid filename' });\n      }\n\n      // Validate file extension\n      const ext = filename.toLowerCase();\n      const validExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg'];\n      if (!validExtensions.some(validExt => ext.endsWith(validExt))) {\n        return res.status(400).json({ message: 'Invalid file type' });\n      }\n\n      // Map imageType to actual folder names (handle plural forms)\n      const folderMap = {\n        background: 'backgrounds',\n        logo: 'logo', \n        social: 'social'\n      };\n      const actualFolder = folderMap[imageType as keyof typeof folderMap];\n      const filePath = path.join(process.cwd(), 'client', 'public', 'images', actualFolder, filename);\n      \n      if (fs.existsSync(filePath)) {\n        fs.unlinkSync(filePath);\n        res.json({ message: 'Image deleted successfully' });\n      } else {\n        res.status(404).json({ message: 'Image file not found' });\n      }\n    } catch (error) {\n      console.error('Error deleting site image:', error);\n      res.status(500).json({ message: 'Error deleting image file' });\n    }\n  });\n\n  // Dynamic favicon route - only serve if favicon is enabled\n  app.get('/favicon.ico', async (req, res) => {\n    try {\n      const siteSettings = await storage.getSiteSettings();\n      \n      if (siteSettings?.faviconEnabled && siteSettings.favicon) {\n        const faviconPath = path.join(process.cwd(), 'client/public', siteSettings.favicon);\n        \n        // Check if favicon file exists\n        try {\n          await fs.promises.access(faviconPath);\n          res.setHeader('Content-Type', 'image/x-icon');\n          res.setHeader('Cache-Control', 'no-cache');\n          return res.sendFile(faviconPath);\n        } catch (fileError) {\n          // File doesn't exist, return 404\n          return res.status(404).send('Favicon file not found');\n        }\n      } else {\n        // Favicon disabled or not set, return 404\n        return res.status(404).send('Favicon disabled');\n      }\n    } catch (error) {\n      console.error('Error serving favicon:', error);\n      res.status(404).send('Favicon error');\n    }\n  });\n\n  // Highlights API routes\n  \n  // Get all highlights\n  app.get(\"/api/highlights\", async (req, res) => {\n    try {\n      // Get featured activities instead of highlights\n      const featuredActivities = await storage.getFeaturedActivities();\n      \n      // Transform activities to match highlights interface\n      const highlights = featuredActivities.map(activity => ({\n        id: activity.id,\n        name: activity.name,\n        description: activity.description,\n        iconPath: activity.image, // Use activity image as icon\n        content: activity.content || '',\n        ranking: activity.ranking || 0\n      }));\n      \n      res.json(highlights);\n    } catch (error) {\n      console.error(\"Error fetching highlights (featured activities):\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get highlights by category\n  app.get(\"/api/highlights/category/:category\", async (req, res) => {\n    try {\n      const { category } = req.params;\n      const highlights = await storage.getHighlightsByCategory(category);\n      res.json(highlights);\n    } catch (error) {\n      console.error(\"Error fetching highlights by category:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Admin routes for highlights\n  app.get(\"/api/admin/highlights\", requireAuth, async (req, res) => {\n    try {\n      const highlights = await storage.getAllHighlights();\n      res.json(highlights);\n    } catch (error) {\n      console.error(\"Error fetching all highlights:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Create highlight\n  app.post(\"/api/admin/highlights\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te maken\" });\n      }\n\n      const validation = z.object({\n        name: z.string().min(1),\n        iconPath: z.string().min(1),\n        category: z.string().optional(),\n        ranking: z.number().optional(),\n        active: z.boolean().optional(),\n        showOnHomepage: z.boolean().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const { name, iconPath, category = \"general\", ranking = 0, active = true, showOnHomepage = true } = validation.data;\n      \n      const highlight = await storage.createHighlight({\n        name,\n        iconPath,\n        category,\n        ranking,\n        active,\n        showOnHomepage,\n        createdBy: user.id,\n      });\n\n      res.json(highlight);\n    } catch (error) {\n      console.error(\"Error creating highlight:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update highlight\n  app.put(\"/api/admin/highlights/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      if (isNaN(id)) {\n        return res.status(400).json({ message: \"Invalid highlight ID\" });\n      }\n\n      const validation = z.object({\n        name: z.string().min(1).optional(),\n        iconPath: z.string().min(1).optional(),\n        category: z.string().optional(),\n        ranking: z.number().optional(),\n        active: z.boolean().optional(),\n      }).safeParse(req.body);\n\n      if (!validation.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: validation.error.errors });\n      }\n\n      const highlight = await storage.updateHighlight(id, validation.data);\n      res.json(highlight);\n    } catch (error) {\n      console.error(\"Error updating highlight:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Delete highlight\n  app.delete(\"/api/admin/highlights/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te verwijderen\" });\n      }\n\n      const id = parseInt(req.params.id);\n      if (isNaN(id)) {\n        return res.status(400).json({ message: \"Invalid highlight ID\" });\n      }\n\n      await storage.deleteHighlight(id);\n      res.json({ message: \"Highlight verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting highlight:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update highlight ranking\n  app.put(\"/api/admin/highlights/:id/ranking\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const { ranking } = req.body;\n\n      if (isNaN(id) || typeof ranking !== 'number') {\n        return res.status(400).json({ message: \"Invalid input\" });\n      }\n\n      await storage.updateHighlightRanking(id, ranking);\n      res.json({ message: \"Ranking bijgewerkt\" });\n    } catch (error) {\n      console.error(\"Error updating highlight ranking:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Toggle homepage visibility for highlight\n  app.patch(\"/api/admin/highlights/:id/homepage\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const { showOnHomepage } = req.body;\n\n      if (isNaN(id) || typeof showOnHomepage !== 'boolean') {\n        return res.status(400).json({ message: \"Invalid input\" });\n      }\n\n      await storage.updateHighlight(id, { showOnHomepage });\n      res.json({ message: showOnHomepage ? \"Highlight toegevoegd aan homepage\" : \"Highlight verwijderd van homepage\" });\n    } catch (error) {\n      console.error(\"Error toggling highlight homepage visibility:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Clean up orphaned images\n  app.post(\"/api/admin/cleanup-images\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== \"admin\") {\n        return res.status(403).json({ message: \"Alleen admins kunnen image cleanup uitvoeren\" });\n      }\n\n      const results = { deletedGuides: 0, deletedDestinations: 0, errors: [] as string[] };\n\n      // Get all image references from database\n      const guidesResult = await db.execute(sql`SELECT image FROM guides WHERE image IS NOT NULL AND image != ''`);\n      const destinationsResult = await db.execute(sql`SELECT image FROM destinations WHERE image IS NOT NULL AND image != ''`);\n      \n      const referencedImages = new Set<string>();\n      guidesResult.rows.forEach((row: any) => {\n        if (row.image) referencedImages.add(path.basename(row.image));\n      });\n      destinationsResult.rows.forEach((row: any) => {\n        if (row.image) referencedImages.add(path.basename(row.image));\n      });\n\n      // Check guides directory\n      const guidesDir = path.join(process.cwd(), 'client', 'public', 'images', 'guides');\n      if (fs.existsSync(guidesDir)) {\n        const guideFiles = fs.readdirSync(guidesDir).filter(file => \n          file.endsWith('.jpg') || file.endsWith('.jpeg') || file.endsWith('.png')\n        );\n        \n        for (const file of guideFiles) {\n          if (!referencedImages.has(file)) {\n            try {\n              const filePath = path.join(guidesDir, file);\n              fs.unlinkSync(filePath);\n              results.deletedGuides++;\n              console.log(`Cleanup: Deleted orphaned guide image: ${file}`);\n            } catch (error: any) {\n              results.errors.push(`Error deleting guide ${file}: ${error.message}`);\n            }\n          }\n        }\n      }\n\n      // Check destinations directory\n      const destinationsDir = path.join(process.cwd(), 'client', 'public', 'images', 'destinations');\n      if (fs.existsSync(destinationsDir)) {\n        const destFiles = fs.readdirSync(destinationsDir).filter(file => \n          file.endsWith('.jpg') || file.endsWith('.jpeg') || file.endsWith('.png')\n        );\n        \n        for (const file of destFiles) {\n          if (!referencedImages.has(file)) {\n            try {\n              const filePath = path.join(destinationsDir, file);\n              fs.unlinkSync(filePath);\n              results.deletedDestinations++;\n              console.log(`Cleanup: Deleted orphaned destination image: ${file}`);\n            } catch (error: any) {\n              results.errors.push(`Error deleting destination ${file}: ${error.message}`);\n            }\n          }\n        }\n      }\n\n      res.json({\n        message: `Cleanup voltooid: ${results.deletedGuides + results.deletedDestinations} bestanden verwijderd`,\n        deletedGuides: results.deletedGuides,\n        deletedDestinations: results.deletedDestinations,\n        errors: results.errors\n      });\n    } catch (error) {\n      console.error(\"Image cleanup error:\", error);\n      res.status(500).json({ message: \"Fout bij opruimen afbeeldingen\" });\n    }\n  });\n\n  // Activities routes\n  app.get(\"/api/activities\", async (req, res) => {\n    try {\n      const activities = await storage.getPublishedActivities();\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching activities:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.get(\"/api/activities/homepage\", async (req, res) => {\n    try {\n      const activities = await storage.getHomepageActivities();\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching homepage activities:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Activities by location API\n  app.get(\"/api/activities/location/:location\", async (req, res) => {\n    try {\n      const { location } = req.params;\n      const activities = await storage.getActivitiesByLocation(location);\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching activities by location:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.get(\"/api/admin/activities\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || (!user.canCreateContent && !user.canEditContent)) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten te bekijken\" });\n      }\n\n      const activities = await storage.getAllActivities();\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching admin activities:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.post(\"/api/admin/activities\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten aan te maken\" });\n      }\n\n      const activity = await storage.createActivity(req.body);\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error creating activity:\", error);\n      res.status(500).json({ message: \"Fout bij aanmaken activiteit\" });\n    }\n  });\n\n  app.put(\"/api/admin/activities/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const activity = await storage.updateActivity(parseInt(id), req.body);\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error updating activity:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.patch(\"/api/admin/activities/:id/homepage\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const { showOnHomepage } = req.body;\n      \n      if (typeof showOnHomepage !== 'boolean') {\n        return res.status(400).json({ message: \"showOnHomepage waarde moet boolean zijn\" });\n      }\n\n      const activity = await storage.updateActivity(parseInt(id), { showOnHomepage });\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error toggling activity homepage:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.patch(\"/api/admin/activities/:id/soft-delete\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten te verwijderen\" });\n      }\n\n      const { id } = req.params;\n      await storage.softDeleteActivity(parseInt(id));\n      res.json({ message: \"Activiteit naar prullenbak verplaatst\" });\n    } catch (error) {\n      console.error(\"Error soft deleting activity:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.patch(\"/api/admin/activities/:id/restore\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om activiteiten te herstellen\" });\n      }\n\n      const { id } = req.params;\n      const activity = await storage.restoreActivity(parseInt(id));\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error restoring activity:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.get(\"/api/admin/activities/deleted\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bekijken\" });\n      }\n\n      const activities = await storage.getDeletedActivities();\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Get deleted activities error:\", error);\n      res.status(500).json({ message: \"Fout bij ophalen verwijderde activiteiten\" });\n    }\n  });\n\n  // Search configuration routes\n  app.get(\"/api/admin/search-configs\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om zoek configuraties te bekijken\" });\n      }\n\n      const configs = await storage.getAllSearchConfigs();\n      res.json(configs);\n    } catch (error) {\n      console.error(\"Error fetching search configs:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.post(\"/api/admin/search-configs\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om zoek configuraties aan te maken\" });\n      }\n\n      const config = await storage.createSearchConfig({ ...req.body, createdBy: user.id });\n      res.json(config);\n    } catch (error) {\n      console.error(\"Error creating search config:\", error);\n      res.status(500).json({ message: \"Fout bij aanmaken zoek configuratie\" });\n    }\n  });\n\n  app.put(\"/api/admin/search-configs/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om zoek configuraties te bewerken\" });\n      }\n\n      const { id } = req.params;\n      const config = await storage.updateSearchConfig(parseInt(id), req.body);\n      res.json(config);\n    } catch (error) {\n      console.error(\"Error updating search config:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.delete(\"/api/admin/search-configs/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user?.canDeleteContent) {\n        return res.status(403).json({ message: \"Geen toestemming om zoek configuraties te verwijderen\" });\n      }\n\n      const { id } = req.params;\n      await storage.deleteSearchConfig(parseInt(id));\n      res.json({ message: \"Zoek configuratie verwijderd\" });\n    } catch (error) {\n      console.error(\"Error deleting search config:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  app.get(\"/api/search-config/:context\", async (req, res) => {\n    try {\n      const { context } = req.params;\n      const config = await storage.getSearchConfigByContext(context);\n      if (!config) {\n        return res.status(404).json({ message: \"Zoek configuratie niet gevonden\" });\n      }\n      res.json(config);\n    } catch (error) {\n      console.error(\"Error fetching search config by context:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Search API routes\n  app.get(\"/api/search\", async (req, res) => {\n    try {\n      const { q: query, scope, location, category } = req.query;\n      \n      if (!query || typeof query !== 'string') {\n        return res.status(400).json({ message: \"Zoekterm is verplicht\" });\n      }\n\n      let results: any[] = [];\n\n      switch (scope) {\n        case 'destinations':\n          results = (await storage.searchDestinations(query, location as string)).map(d => ({ ...d, type: 'destination' }));\n          break;\n        case 'activities':\n          results = (await storage.searchActivities(query, location as string, category as string)).map(a => ({ ...a, type: 'activity' }));\n          break;\n        case 'highlights':\n          results = (await storage.searchHighlights(query)).map(h => ({ ...h, type: 'highlight' }));\n          break;\n        case 'guides':\n          results = (await storage.searchGuides(query)).map(g => ({ ...g, type: 'guide' }));\n          break;\n        case 'pages':\n          results = (await storage.searchPages(query)).map(p => ({ ...p, type: 'page' }));\n          break;\n        case 'templates':\n          results = (await storage.searchTemplates(query)).map(t => ({ ...t, type: 'template' }));\n          break;\n        case 'content':\n          // Search all Website Onderdelen (destinations, activities, highlights, guides)\n          const [destinations, activities, highlights, guides] = await Promise.all([\n            storage.searchDestinations(query, location as string),\n            storage.searchActivities(query, location as string, category as string),\n            storage.searchHighlights(query),\n            storage.searchGuides(query)\n          ]);\n          results = [\n            ...destinations.map(d => ({ ...d, type: 'destination' })),\n            ...activities.map(a => ({ ...a, type: 'activity' })),\n            ...highlights.map(h => ({ ...h, type: 'highlight' })),\n            ...guides.map(g => ({ ...g, type: 'guide' }))\n          ];\n          break;\n        default:\n          // Search all (including pages and templates)\n          const [allDestinations, allActivities, allHighlights, allGuides, allPages, allTemplates] = await Promise.all([\n            storage.searchDestinations(query, location as string),\n            storage.searchActivities(query, location as string, category as string),\n            storage.searchHighlights(query),\n            storage.searchGuides(query),\n            storage.searchPages(query),\n            storage.searchTemplates(query)\n          ]);\n          results = [\n            ...allDestinations.map(d => ({ ...d, type: 'destination' })),\n            ...allActivities.map(a => ({ ...a, type: 'activity' })),\n            ...allHighlights.map(h => ({ ...h, type: 'highlight' })),\n            ...allGuides.map(g => ({ ...g, type: 'guide' })),\n            ...allPages.map(p => ({ ...p, type: 'page' })),\n            ...allTemplates.map(t => ({ ...t, type: 'template' }))\n          ];\n      }\n\n      res.json({ results, query, scope: scope || 'all' });\n    } catch (error) {\n      console.error(\"Search error:\", error);\n      res.status(500).json({ message: \"Zoekfout\" });\n    }\n  });\n\n  // ========================================\n  // MOTIVATION ENDPOINTS\n  // ========================================\n\n  // Get motivation (public)\n  app.get(\"/api/motivation\", async (req, res) => {\n    try {\n      const result = await db.execute(sql`SELECT * FROM motivation WHERE is_published = true ORDER BY id LIMIT 1`);\n      res.json(result.rows[0] || null);\n    } catch (error) {\n      console.error(\"Get motivation error:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get motivation for admin\n  app.get(\"/api/admin/motivation\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bekijken\" });\n      }\n\n      const result = await db.execute(sql`SELECT * FROM motivation ORDER BY id LIMIT 1`);\n      res.json(result.rows[0] || null);\n    } catch (error) {\n      console.error(\"Get admin motivation error:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Update motivation\n  app.put(\"/api/admin/motivation/:id\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const id = parseInt(req.params.id);\n      const { title, description, buttonText, buttonAction, image, isPublished } = req.body;\n\n      await db.execute(sql`\n        UPDATE motivation \n        SET title = ${title}, \n            description = ${description}, \n            button_text = ${buttonText}, \n            button_action = ${buttonAction}, \n            image = ${image}, \n            is_published = ${isPublished}, \n            updated_at = NOW() \n        WHERE id = ${id}\n      `);\n\n      const result = await db.execute(sql`SELECT * FROM motivation WHERE id = ${id}`);\n      res.json(result.rows[0]);\n    } catch (error) {\n      console.error(\"Update motivation error:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get motivation images with location names\n  app.get(\"/api/admin/images/motivatie\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canCreateContent) {\n        return res.status(403).json({ message: \"Geen toestemming om afbeeldingen te bekijken\" });\n      }\n\n      const motivatiePath = path.join(process.cwd(), 'client', 'public', 'images', 'motivatie');\n      \n      if (!fs.existsSync(motivatiePath)) {\n        return res.json([]);\n      }\n\n      const files = fs.readdirSync(motivatiePath);\n      const imageFiles = files.filter(file => {\n        const ext = path.extname(file).toLowerCase();\n        return ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg'].includes(ext);\n      });\n\n      // Get location names from database\n      const locationNamesResult = await db.execute(sql`\n        SELECT image_path, location_name \n        FROM motivation_image_locations\n      `);\n\n      const locationNamesMap = new Map();\n      locationNamesResult.rows.forEach((row: any) => {\n        locationNamesMap.set(row.image_path, row.location_name);\n      });\n\n      const images = imageFiles.map(file => {\n        const imagePath = `/images/motivatie/${file}`;\n        return {\n          name: file,\n          path: imagePath,\n          fullPath: path.join(motivatiePath, file),\n          locationName: locationNamesMap.get(imagePath) || extractLocationFromFilename(file)\n        };\n      });\n\n      res.json(images);\n    } catch (error) {\n      console.error(\"Error loading motivation images:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Helper function to extract location name from filename\n  function extractLocationFromFilename(filename: string): string {\n    const nameWithoutExt = filename.replace(/\\.[^/.]+$/, \"\");\n    \n    // Check for common location patterns\n    if (nameWithoutExt.toLowerCase().includes('tatra')) return 'Tatra Mountains';\n    if (nameWithoutExt.toLowerCase().includes('krakow')) return 'Krakow';\n    if (nameWithoutExt.toLowerCase().includes('gdansk')) return 'Gdansk';\n    if (nameWithoutExt.toLowerCase().includes('warsaw') || nameWithoutExt.toLowerCase().includes('warschau')) return 'Warsaw';\n    if (nameWithoutExt.toLowerCase().includes('bialowieza')) return 'Bialowieza';\n    \n    // Default fallback - clean up filename to readable format\n    let cleanName = nameWithoutExt\n      .split('-')\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n      .join(' ');\n    \n    // Remove common file extensions that might be in the name\n    cleanName = cleanName.replace(/\\s*(Jpg|Jpeg|Png|Gif|Webp)$/i, '');\n    \n    return cleanName || 'Onbekende Locatie';\n  }\n\n  // Helper function to convert location name to filename\n  function locationNameToFilename(locationName: string): string {\n    return locationName\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s]/g, '') // Remove special characters\n      .replace(/\\s+/g, '-') // Replace spaces with dashes\n      .replace(/-+/g, '-') // Replace multiple dashes with single\n      .replace(/^-|-$/g, ''); // Remove leading/trailing dashes\n  }\n\n  // Helper function to get unique filename with numbering\n  function getUniqueFilename(basePath: string, desiredName: string, extension: string): string {\n    const fullPath = path.join(basePath, `${desiredName}${extension}`);\n    \n    if (!fs.existsSync(fullPath)) {\n      return `${desiredName}${extension}`;\n    }\n    \n    // File exists, find unique number\n    let counter = 2;\n    while (true) {\n      const numberedName = `${desiredName}-${counter}`;\n      const numberedPath = path.join(basePath, `${numberedName}${extension}`);\n      \n      if (!fs.existsSync(numberedPath)) {\n        return `${numberedName}${extension}`;\n      }\n      counter++;\n    }\n  }\n\n  // Update motivation image location name with file renaming\n  app.put(\"/api/admin/images/motivatie/location\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || !user.canEditContent) {\n        return res.status(403).json({ message: \"Geen toestemming om content te bewerken\" });\n      }\n\n      const { imagePath, locationName } = req.body;\n\n      if (!imagePath || !locationName) {\n        return res.status(400).json({ message: \"Image path en locatie naam zijn verplicht\" });\n      }\n\n      // Get current file info\n      const currentFilename = imagePath.split('/').pop() || '';\n      const extension = path.extname(currentFilename);\n      const motivatiePath = path.join(process.cwd(), 'client', 'public', 'images', 'motivatie');\n      const currentFilePath = path.join(motivatiePath, currentFilename);\n\n      // Generate new filename based on location name\n      const baseNewName = locationNameToFilename(locationName);\n      const newFilename = getUniqueFilename(motivatiePath, baseNewName, extension);\n      const newFilePath = path.join(motivatiePath, newFilename);\n      const newImagePath = `/images/motivatie/${newFilename}`;\n\n      // Only rename if the file actually needs renaming and exists\n      let finalImagePath = imagePath;\n      if (fs.existsSync(currentFilePath) && currentFilename !== newFilename) {\n        try {\n          fs.renameSync(currentFilePath, newFilePath);\n          finalImagePath = newImagePath;\n          console.log(`File renamed: ${currentFilename} -> ${newFilename}`);\n        } catch (renameError) {\n          console.error(\"Error renaming file:\", renameError);\n          // Continue without renaming - just update location name\n        }\n      }\n\n      // Check if record exists, update or insert\n      const existingResult = await db.execute(sql`\n        SELECT id FROM motivation_image_locations \n        WHERE image_path = ${imagePath}\n      `);\n\n      if (existingResult.rows.length > 0) {\n        // Update existing record with new path and location name\n        await db.execute(sql`\n          UPDATE motivation_image_locations \n          SET image_path = ${finalImagePath}, location_name = ${locationName}, updated_at = NOW()\n          WHERE image_path = ${imagePath}\n        `);\n      } else {\n        // Insert new record\n        await db.execute(sql`\n          INSERT INTO motivation_image_locations (image_path, location_name)\n          VALUES (${finalImagePath}, ${locationName})\n        `);\n      }\n\n      // If we renamed the file, we need to also update the motivation table if this is the active image\n      if (finalImagePath !== imagePath) {\n        await db.execute(sql`\n          UPDATE motivation \n          SET image = ${finalImagePath}, updated_at = NOW()\n          WHERE image = ${imagePath}\n        `);\n      }\n\n      res.json({ \n        success: true, \n        message: \"Locatie naam en bestand succesvol bijgewerkt\",\n        newImagePath: finalImagePath,\n        renamed: finalImagePath !== imagePath\n      });\n    } catch (error) {\n      console.error(\"Error updating motivation image location:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // Get motivation image location name for homepage display\n  app.get(\"/api/motivation/image-location\", async (req, res) => {\n    try {\n      const { imagePath } = req.query;\n\n      if (!imagePath) {\n        return res.status(400).json({ message: \"Image path is required\" });\n      }\n\n      const result = await db.execute(sql`\n        SELECT location_name \n        FROM motivation_image_locations \n        WHERE image_path = ${imagePath as string}\n      `);\n\n      if (result.rows.length > 0) {\n        res.json({ locationName: result.rows[0].location_name });\n      } else {\n        // Fallback to extracted name from filename\n        const filename = (imagePath as string).split('/').pop() || '';\n        const fallbackName = extractLocationFromFilename(filename);\n        res.json({ locationName: fallbackName });\n      }\n    } catch (error) {\n      console.error(\"Error getting motivation image location:\", error);\n      res.status(500).json({ message: \"Server error\" });\n    }\n  });\n\n  // ========================================\n  // DATABASE MONITORING ENDPOINTS\n  // ========================================\n\n  // Get database status (admin only)\n  app.get(\"/api/admin/database/status\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen beheerders kunnen database status bekijken\" });\n      }\n\n      const status = await storage.getDatabaseStatus();\n      res.json(status);\n    } catch (error) {\n      console.error(\"Database status error:\", error);\n      res.status(500).json({ message: \"Fout bij ophalen database status\" });\n    }\n  });\n\n  // Get table statistics (admin only)\n  app.get(\"/api/admin/database/tables\", requireAuth, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.session.userId!);\n      if (!user || user.role !== 'admin') {\n        return res.status(403).json({ message: \"Alleen beheerders kunnen tabel statistieken bekijken\" });\n      }\n\n      const statistics = await storage.getTableStatistics();\n      res.json(statistics);\n    } catch (error) {\n      console.error(\"Table statistics error:\", error);\n      res.status(500).json({ message: \"Fout bij ophalen tabel statistieken\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":104437},"server/storage.ts":{"content":"import { \n  users, destinations, guides, siteSettings, pages, templates, highlights, activities, searchConfigs,\n  type User, type InsertUser, type UpdateUser,\n  type Destination, type InsertDestination, type UpdateDestination,\n  type Guide, type InsertGuide, type UpdateGuide,\n  type SiteSettings, type InsertSiteSettings, type UpdateSiteSettings,\n  type Page, type InsertPage, type UpdatePage,\n  type Template, type InsertTemplate, type UpdateTemplate,\n  type Highlight, type InsertHighlight, type UpdateHighlight,\n  type Activity, type InsertActivity, type UpdateActivity,\n  type SearchConfig, type InsertSearchConfig, type UpdateSearchConfig\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, ne, and, gte, lt, gt, lte, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUser(id: number, updates: UpdateUser): Promise<User>;\n  updateUserPassword(id: number, newPassword: string): Promise<void>;\n  deleteUser(id: number): Promise<void>;\n  getAllUsers(): Promise<User[]>;\n  getAllUsersExcept(userId: number): Promise<User[]>;\n  \n  // Destination operations\n  getDestination(id: number): Promise<Destination | undefined>;\n  getDestinationBySlug(slug: string): Promise<Destination | undefined>;\n  getAllDestinations(): Promise<Destination[]>;\n  getActiveDestinations(): Promise<Destination[]>;\n  getPublishedDestinations(): Promise<Destination[]>;\n  getHomepageDestinations(): Promise<Destination[]>;\n  getDeletedDestinations(): Promise<Destination[]>;\n  createDestination(destination: InsertDestination): Promise<Destination>;\n  updateDestination(id: number, updates: UpdateDestination): Promise<Destination>;\n  deleteDestination(id: number): Promise<void>;\n  softDeleteDestination(id: number): Promise<void>;\n  restoreDestination(id: number): Promise<Destination>;\n  \n  // Guide operations\n  getGuide(id: number): Promise<Guide | undefined>;\n  getGuideBySlug(slug: string): Promise<Guide | undefined>;\n  getAllGuides(): Promise<Guide[]>;\n  getActiveGuides(): Promise<Guide[]>;\n  getPublishedGuides(): Promise<Guide[]>;\n  getHomepageGuides(): Promise<Guide[]>;\n  getDeletedGuides(): Promise<Guide[]>;\n  createGuide(guide: InsertGuide): Promise<Guide>;\n  updateGuide(id: number, updates: UpdateGuide): Promise<Guide>;\n  deleteGuide(id: number): Promise<void>;\n  softDeleteGuide(id: number): Promise<void>;\n  restoreGuide(id: number): Promise<Guide>;\n  \n  // Page operations\n  getPage(id: number): Promise<Page | undefined>;\n  getPageBySlug(slug: string): Promise<Page | undefined>;\n  getAllPages(): Promise<Page[]>;\n  getPublishedPages(): Promise<Page[]>;\n  getDeletedPages(): Promise<Page[]>;\n  createPage(page: InsertPage): Promise<Page>;\n  updatePage(id: number, updates: UpdatePage): Promise<Page>;\n  deletePage(id: number): Promise<void>;\n  softDeletePage(id: number): Promise<void>;\n  restorePage(id: number): Promise<Page>;\n  \n  // Template operations\n  getTemplate(id: number): Promise<Template | undefined>;\n  getTemplateByName(name: string): Promise<Template | undefined>;\n  getAllTemplates(): Promise<Template[]>;\n  getActiveTemplates(): Promise<Template[]>;\n  createTemplate(template: InsertTemplate): Promise<Template>;\n  updateTemplate(id: number, updates: UpdateTemplate): Promise<Template>;\n  deleteTemplate(id: number): Promise<void>;\n  \n  // Site settings operations\n  getSiteSettings(): Promise<SiteSettings | undefined>;\n  updateSiteSettings(updates: UpdateSiteSettings): Promise<SiteSettings>;\n  createDefaultSiteSettings(): Promise<SiteSettings>;\n  \n  // Highlight operations\n  getHighlight(id: number): Promise<Highlight | undefined>;\n  getAllHighlights(): Promise<Highlight[]>;\n  getActiveHighlights(): Promise<Highlight[]>;\n  getHomepageHighlights(): Promise<Highlight[]>;\n  getHighlightsByCategory(category: string): Promise<Highlight[]>;\n  createHighlight(highlight: InsertHighlight): Promise<Highlight>;\n  updateHighlight(id: number, updates: UpdateHighlight): Promise<Highlight>;\n  deleteHighlight(id: number): Promise<void>;\n  updateHighlightRanking(id: number, newRanking: number): Promise<void>;\n\n  // Activity operations\n  getActivity(id: number): Promise<Activity | undefined>;\n  getActivityBySlug(slug: string): Promise<Activity | undefined>;\n  getAllActivities(): Promise<Activity[]>;\n  getActiveActivities(): Promise<Activity[]>;\n  getPublishedActivities(): Promise<Activity[]>;\n  getFeaturedActivities(): Promise<Activity[]>;\n  getHomepageActivities(): Promise<Activity[]>;\n  getActivitiesByLocation(location: string): Promise<Activity[]>;\n  getActivitiesByCategory(category: string): Promise<Activity[]>;\n  getDeletedActivities(): Promise<Activity[]>;\n  createActivity(activity: InsertActivity): Promise<Activity>;\n  updateActivity(id: number, updates: UpdateActivity): Promise<Activity>;\n  deleteActivity(id: number): Promise<void>;\n  softDeleteActivity(id: number): Promise<void>;\n  restoreActivity(id: number): Promise<Activity>;\n\n  // Search configuration operations\n  getSearchConfig(id: number): Promise<SearchConfig | undefined>;\n  getSearchConfigByContext(context: string): Promise<SearchConfig | undefined>;\n  getAllSearchConfigs(): Promise<SearchConfig[]>;\n  getActiveSearchConfigs(): Promise<SearchConfig[]>;\n  createSearchConfig(searchConfig: InsertSearchConfig): Promise<SearchConfig>;\n  updateSearchConfig(id: number, updates: UpdateSearchConfig): Promise<SearchConfig>;\n  deleteSearchConfig(id: number): Promise<void>;\n\n  // Search operations\n  searchDestinations(query: string, location?: string): Promise<Destination[]>;\n  searchActivities(query: string, location?: string, category?: string): Promise<Activity[]>;\n  searchHighlights(query: string): Promise<Highlight[]>;\n  searchGuides(query: string): Promise<Guide[]>;\n  searchPages(query: string): Promise<Page[]>;\n  searchTemplates(query: string): Promise<Template[]>;\n\n  // Database monitoring operations\n  getDatabaseStatus(): Promise<{\n    connectionStatus: 'connected' | 'disconnected';\n    databaseName: string;\n    totalTables: number;\n    totalRecords: number;\n    lastBackup?: string;\n    storageSize?: string;\n    uptime?: string;\n  }>;\n  getTableStatistics(): Promise<{\n    tableName: string;\n    recordCount: number;\n    lastUpdated?: string;\n  }[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const result = await db\n      .insert(users)\n      .values({\n        ...insertUser,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return result[0];\n  }\n\n  async updateUser(id: number, updates: UpdateUser): Promise<User> {\n    const [user] = await db\n      .update(users)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, id))\n      .returning();\n    return user;\n  }\n\n  async updateUserPassword(id: number, newPassword: string): Promise<void> {\n    await db\n      .update(users)\n      .set({\n        password: newPassword,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, id));\n  }\n\n  async deleteUser(id: number): Promise<void> {\n    await db.delete(users).where(eq(users.id, id));\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async getAllUsersExcept(userId: number): Promise<User[]> {\n    return await db.select().from(users).where(ne(users.id, userId));\n  }\n\n  // Destination operations\n  async getDestination(id: number): Promise<Destination | undefined> {\n    const [destination] = await db.select().from(destinations).where(eq(destinations.id, id));\n    return destination || undefined;\n  }\n\n  async getDestinationBySlug(slug: string): Promise<Destination | undefined> {\n    const [destination] = await db.select().from(destinations).where(eq(destinations.slug, slug));\n    return destination || undefined;\n  }\n\n  async getAllDestinations(): Promise<Destination[]> {\n    return await db.select().from(destinations).orderBy(destinations.ranking, destinations.createdAt);\n  }\n\n  async getActiveDestinations(): Promise<Destination[]> {\n    console.log(\"Running getActiveDestinations query...\");\n    const result = await db.select().from(destinations).where(eq(destinations.is_deleted, false)).orderBy(destinations.ranking, destinations.createdAt);\n    console.log(\"getActiveDestinations result count:\", result.length);\n    console.log(\"Sample destinations:\", result.slice(0, 5).map(d => `${d.id}: ${d.name}`));\n    return result;\n  }\n\n  async getPublishedDestinations(): Promise<Destination[]> {\n    return await db.select().from(destinations).where(\n      and(\n        eq(destinations.published, true),\n        eq(destinations.is_deleted, false)\n      )\n    ).orderBy(destinations.ranking, destinations.createdAt);\n  }\n\n  async getHomepageDestinations(): Promise<Destination[]> {\n    const result = await db.execute(sql`SELECT * FROM destinations WHERE published = true AND is_deleted = false AND show_on_homepage = true ORDER BY ranking, created_at`);\n    return result.rows as Destination[];\n  }\n\n  async getDeletedDestinations(): Promise<Destination[]> {\n    const result = await db.execute(sql`SELECT * FROM destinations WHERE is_deleted = TRUE ORDER BY deleted_at DESC`);\n    return result.rows as Destination[];\n  }\n\n  async createDestination(insertDestination: InsertDestination): Promise<Destination> {\n    const [destination] = await db\n      .insert(destinations)\n      .values({\n        ...insertDestination,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return destination;\n  }\n\n  async updateDestination(id: number, updates: UpdateDestination): Promise<Destination> {\n    // Handle ranking updates with automatic adjustment\n    if (updates.ranking !== undefined && updates.ranking !== null) {\n      await this.adjustDestinationRankings(id, updates.ranking);\n    }\n    \n    const [destination] = await db\n      .update(destinations)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(destinations.id, id))\n      .returning();\n    return destination;\n  }\n\n  private async adjustDestinationRankings(targetId: number, newRanking: number): Promise<void> {\n    // Get current ranking of the target destination\n    const [currentDestination] = await db.select().from(destinations).where(eq(destinations.id, targetId));\n    if (!currentDestination) return;\n    \n    const oldRanking = currentDestination.ranking || 0;\n    \n    if (oldRanking === newRanking) return; // No change needed\n    \n    if (newRanking < oldRanking) {\n      // Moving up in ranking (lower number = higher rank)\n      // Shift down all destinations between newRanking and oldRanking\n      await db\n        .update(destinations)\n        .set({ ranking: sql`ranking + 1`, updatedAt: new Date() })\n        .where(\n          and(\n            gte(destinations.ranking, newRanking),\n            lt(destinations.ranking, oldRanking),\n            ne(destinations.id, targetId)\n          )\n        );\n    } else {\n      // Moving down in ranking (higher number = lower rank)\n      // Shift up all destinations between oldRanking and newRanking\n      await db\n        .update(destinations)\n        .set({ ranking: sql`ranking - 1`, updatedAt: new Date() })\n        .where(\n          and(\n            gt(destinations.ranking, oldRanking),\n            lte(destinations.ranking, newRanking),\n            ne(destinations.id, targetId)\n          )\n        );\n    }\n  }\n\n  async deleteDestination(id: number): Promise<void> {\n    await db.delete(destinations).where(eq(destinations.id, id));\n  }\n\n  async softDeleteDestination(id: number): Promise<void> {\n    await db.execute(sql`UPDATE destinations SET is_deleted = TRUE, deleted_at = NOW(), updated_at = NOW() WHERE id = ${id}`);\n  }\n\n  async restoreDestination(id: number): Promise<Destination> {\n    await db.execute(sql`UPDATE destinations SET is_deleted = FALSE, deleted_at = NULL, updated_at = NOW() WHERE id = ${id}`);\n    const result = await db.execute(sql`SELECT * FROM destinations WHERE id = ${id}`);\n    return result.rows[0] as Destination;\n  }\n\n  // Guide operations\n  async getGuide(id: number): Promise<Guide | undefined> {\n    const [guide] = await db.select().from(guides).where(eq(guides.id, id));\n    return guide || undefined;\n  }\n\n  async getGuideBySlug(slug: string): Promise<Guide | undefined> {\n    const [guide] = await db.select().from(guides).where(eq(guides.slug, slug));\n    return guide || undefined;\n  }\n\n  async getAllGuides(): Promise<Guide[]> {\n    return await db.select().from(guides).orderBy(guides.ranking, guides.createdAt);\n  }\n\n  async getActiveGuides(): Promise<Guide[]> {\n    return await db.select().from(guides).where(eq(guides.is_deleted, false)).orderBy(guides.ranking, guides.createdAt);\n  }\n\n  async getPublishedGuides(): Promise<Guide[]> {\n    return await db.select().from(guides).where(\n      and(\n        eq(guides.published, true),\n        eq(guides.is_deleted, false)\n      )\n    ).orderBy(guides.ranking, guides.createdAt);\n  }\n\n  async getHomepageGuides(): Promise<Guide[]> {\n    const result = await db.execute(sql`SELECT * FROM guides WHERE published = true AND is_deleted = false AND show_on_homepage = true ORDER BY ranking, created_at`);\n    return result.rows as Guide[];\n  }\n\n  async getDeletedGuides(): Promise<Guide[]> {\n    const result = await db.execute(sql`SELECT * FROM guides WHERE is_deleted = TRUE ORDER BY deleted_at DESC`);\n    return result.rows as Guide[];\n  }\n\n  async createGuide(insertGuide: InsertGuide): Promise<Guide> {\n    const [guide] = await db\n      .insert(guides)\n      .values({\n        ...insertGuide,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return guide;\n  }\n\n  async updateGuide(id: number, updates: UpdateGuide): Promise<Guide> {\n    // Handle ranking updates with automatic adjustment\n    if (updates.ranking !== undefined && updates.ranking !== null) {\n      await this.adjustGuideRankings(id, updates.ranking);\n    }\n    \n    const [guide] = await db\n      .update(guides)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(guides.id, id))\n      .returning();\n    return guide;\n  }\n\n  private async adjustGuideRankings(targetId: number, newRanking: number): Promise<void> {\n    // Get current ranking of the target guide\n    const [currentGuide] = await db.select().from(guides).where(eq(guides.id, targetId));\n    if (!currentGuide) return;\n    \n    const oldRanking = currentGuide.ranking || 0;\n    \n    if (oldRanking === newRanking) return; // No change needed\n    \n    if (newRanking < oldRanking) {\n      // Moving up in ranking (lower number = higher rank)\n      // Shift down all guides between newRanking and oldRanking\n      await db\n        .update(guides)\n        .set({ ranking: sql`ranking + 1`, updatedAt: new Date() })\n        .where(\n          and(\n            gte(guides.ranking, newRanking),\n            lt(guides.ranking, oldRanking),\n            ne(guides.id, targetId)\n          )\n        );\n    } else {\n      // Moving down in ranking (higher number = lower rank)\n      // Shift up all guides between oldRanking and newRanking\n      await db\n        .update(guides)\n        .set({ ranking: sql`ranking - 1`, updatedAt: new Date() })\n        .where(\n          and(\n            gt(guides.ranking, oldRanking),\n            lte(guides.ranking, newRanking),\n            ne(guides.id, targetId)\n          )\n        );\n    }\n  }\n\n  async deleteGuide(id: number): Promise<void> {\n    await db.delete(guides).where(eq(guides.id, id));\n  }\n\n  async softDeleteGuide(id: number): Promise<void> {\n    await db.execute(sql`UPDATE guides SET is_deleted = TRUE, deleted_at = NOW(), updated_at = NOW() WHERE id = ${id}`);\n  }\n\n  async restoreGuide(id: number): Promise<Guide> {\n    await db.execute(sql`UPDATE guides SET is_deleted = FALSE, deleted_at = NULL, updated_at = NOW() WHERE id = ${id}`);\n    const result = await db.execute(sql`SELECT * FROM guides WHERE id = ${id}`);\n    return result.rows[0] as Guide;\n  }\n\n  // Site settings operations\n  async getSiteSettings(): Promise<SiteSettings | undefined> {\n    const [settings] = await db.select().from(siteSettings).where(eq(siteSettings.isActive, true)).limit(1);\n    return settings;\n  }\n\n  async updateSiteSettings(updates: UpdateSiteSettings): Promise<SiteSettings> {\n    const updatedData = { ...updates, updatedAt: new Date() };\n    \n    // First check if settings exist\n    const existing = await this.getSiteSettings();\n    \n    if (existing) {\n      const [updated] = await db\n        .update(siteSettings)\n        .set(updatedData)\n        .where(eq(siteSettings.id, existing.id))\n        .returning();\n      return updated;\n    } else {\n      // Create new settings if none exist\n      return await this.createDefaultSiteSettings();\n    }\n  }\n\n  async createDefaultSiteSettings(): Promise<SiteSettings> {\n    const [settings] = await db\n      .insert(siteSettings)\n      .values({\n        siteName: \"Ontdek Polen\",\n        siteDescription: \"Ontdek de mooiste plekken van Polen\",\n        metaKeywords: \"Polen, reizen, vakantie, bestemmingen\",\n        favicon: \"/favicon.ico\",\n        isActive: true\n      })\n      .returning();\n    return settings;\n  }\n\n  // PAGE OPERATIONS\n  async getPage(id: number): Promise<Page | undefined> {\n    const [page] = await db.select().from(pages).where(eq(pages.id, id));\n    return page;\n  }\n\n  async getPageBySlug(slug: string): Promise<Page | undefined> {\n    const [page] = await db.select().from(pages).where(eq(pages.slug, slug));\n    return page;\n  }\n\n  async getAllPages(): Promise<Page[]> {\n    return await db.select().from(pages).where(eq(pages.is_deleted, false)).orderBy(pages.ranking);\n  }\n\n  async getPublishedPages(): Promise<Page[]> {\n    return await db.select().from(pages)\n      .where(and(eq(pages.published, true), eq(pages.is_deleted, false)))\n      .orderBy(pages.ranking);\n  }\n\n  async getDeletedPages(): Promise<Page[]> {\n    return await db.select().from(pages).where(eq(pages.is_deleted, true)).orderBy(pages.deleted_at);\n  }\n\n  async createPage(insertPage: InsertPage): Promise<Page> {\n    const [page] = await db\n      .insert(pages)\n      .values({\n        ...insertPage,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return page;\n  }\n\n  async updatePage(id: number, updates: UpdatePage): Promise<Page> {\n    // Handle ranking adjustment if needed\n    if (updates.ranking !== undefined) {\n      await this.adjustPageRankings(id, updates.ranking);\n    }\n\n    const [page] = await db\n      .update(pages)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(pages.id, id))\n      .returning();\n    return page;\n  }\n\n  private async adjustPageRankings(targetId: number, newRanking: number): Promise<void> {\n    const targetPage = await this.getPage(targetId);\n    if (!targetPage) return;\n\n    const oldRanking = targetPage.ranking;\n    \n    if (newRanking > oldRanking) {\n      await db\n        .update(pages)\n        .set({ ranking: sql`${pages.ranking} - 1` })\n        .where(and(\n          gt(pages.ranking, oldRanking),\n          lte(pages.ranking, newRanking),\n          ne(pages.id, targetId),\n          eq(pages.is_deleted, false)\n        ));\n    } else if (newRanking < oldRanking) {\n      await db\n        .update(pages)\n        .set({ ranking: sql`${pages.ranking} + 1` })\n        .where(and(\n          gte(pages.ranking, newRanking),\n          lt(pages.ranking, oldRanking),\n          ne(pages.id, targetId),\n          eq(pages.is_deleted, false)\n        ));\n    }\n  }\n\n  async deletePage(id: number): Promise<void> {\n    await db.delete(pages).where(eq(pages.id, id));\n  }\n\n  async softDeletePage(id: number): Promise<void> {\n    await db\n      .update(pages)\n      .set({\n        is_deleted: true,\n        deleted_at: new Date(),\n        updatedAt: new Date(),\n      })\n      .where(eq(pages.id, id));\n  }\n\n  async restorePage(id: number): Promise<Page> {\n    const [page] = await db\n      .update(pages)\n      .set({\n        is_deleted: false,\n        deleted_at: null,\n        updatedAt: new Date(),\n      })\n      .where(eq(pages.id, id))\n      .returning();\n    return page;\n  }\n\n  // TEMPLATE OPERATIONS\n  async getTemplate(id: number): Promise<Template | undefined> {\n    const [template] = await db.select().from(templates).where(eq(templates.id, id));\n    return template;\n  }\n\n  async getTemplateByName(name: string): Promise<Template | undefined> {\n    const [template] = await db.select().from(templates).where(eq(templates.name, name));\n    return template;\n  }\n\n  async getAllTemplates(): Promise<Template[]> {\n    return await db.select().from(templates).orderBy(templates.name);\n  }\n\n  async getActiveTemplates(): Promise<Template[]> {\n    return await db.select().from(templates).where(eq(templates.isActive, true)).orderBy(templates.name);\n  }\n\n  async createTemplate(insertTemplate: InsertTemplate): Promise<Template> {\n    const [template] = await db\n      .insert(templates)\n      .values({\n        ...insertTemplate,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return template;\n  }\n\n  async updateTemplate(id: number, updates: UpdateTemplate): Promise<Template> {\n    const [template] = await db\n      .update(templates)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(templates.id, id))\n      .returning();\n    return template;\n  }\n\n  async deleteTemplate(id: number): Promise<void> {\n    await db.delete(templates).where(eq(templates.id, id));\n  }\n\n  // Highlight operations implementation\n  async getHighlight(id: number): Promise<Highlight | undefined> {\n    const [highlight] = await db.select().from(highlights).where(eq(highlights.id, id));\n    return highlight || undefined;\n  }\n\n  async getAllHighlights(): Promise<Highlight[]> {\n    return await db.select().from(highlights).orderBy(highlights.ranking, highlights.name);\n  }\n\n  async getActiveHighlights(): Promise<Highlight[]> {\n    return await db.select().from(highlights)\n      .where(eq(highlights.active, true))\n      .orderBy(highlights.ranking, highlights.name);\n  }\n\n  async getHomepageHighlights(): Promise<Highlight[]> {\n    return await db.select().from(highlights)\n      .where(and(eq(highlights.active, true), eq(highlights.showOnHomepage, true)))\n      .orderBy(highlights.ranking, highlights.name);\n  }\n\n  async getHighlightsByCategory(category: string): Promise<Highlight[]> {\n    return await db.select().from(highlights)\n      .where(and(eq(highlights.category, category), eq(highlights.active, true), eq(highlights.showOnHomepage, true)))\n      .orderBy(highlights.ranking, highlights.name);\n  }\n\n  async createHighlight(insertHighlight: InsertHighlight): Promise<Highlight> {\n    const result = await db\n      .insert(highlights)\n      .values({\n        ...insertHighlight,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return result[0];\n  }\n\n  async updateHighlight(id: number, updates: UpdateHighlight): Promise<Highlight> {\n    const [highlight] = await db\n      .update(highlights)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(highlights.id, id))\n      .returning();\n    return highlight;\n  }\n\n  async deleteHighlight(id: number): Promise<void> {\n    await db.delete(highlights).where(eq(highlights.id, id));\n  }\n\n  async updateHighlightRanking(id: number, newRanking: number): Promise<void> {\n    await db\n      .update(highlights)\n      .set({\n        ranking: newRanking,\n        updatedAt: new Date(),\n      })\n      .where(eq(highlights.id, id));\n  }\n\n  // Activity operations\n  async getActivity(id: number): Promise<Activity | undefined> {\n    const [activity] = await db.select().from(activities).where(eq(activities.id, id));\n    return activity || undefined;\n  }\n\n  async getActivityBySlug(slug: string): Promise<Activity | undefined> {\n    // Activities don't have slugs yet, return undefined for now\n    return undefined;\n  }\n\n  async getAllActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(eq(activities.is_deleted, false));\n  }\n\n  async getActiveActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(eq(activities.is_deleted, false), eq(activities.published, true))\n    );\n  }\n\n  async getPublishedActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(eq(activities.is_deleted, false), eq(activities.published, true))\n    );\n  }\n\n  async getFeaturedActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(\n        eq(activities.is_deleted, false),\n        eq(activities.published, true),\n        eq(activities.featured, true)\n      )\n    ).orderBy(activities.ranking, activities.name);\n  }\n\n  async getHomepageActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(\n        eq(activities.is_deleted, false),\n        eq(activities.published, true),\n        eq(activities.showOnHomepage, true)\n      )\n    );\n  }\n\n  async getActivitiesByLocation(location: string): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(\n        eq(activities.is_deleted, false), \n        eq(activities.published, true),\n        eq(activities.location, location)\n      )\n    ).orderBy(activities.ranking);\n  }\n\n  async getActivitiesByCategory(category: string): Promise<Activity[]> {\n    return await db.select().from(activities).where(\n      and(eq(activities.is_deleted, false), eq(activities.category, category))\n    );\n  }\n\n  async getDeletedActivities(): Promise<Activity[]> {\n    return await db.select().from(activities).where(eq(activities.is_deleted, true));\n  }\n\n  async createActivity(insertActivity: InsertActivity): Promise<Activity> {\n    const result = await db\n      .insert(activities)\n      .values({\n        ...insertActivity,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return result[0];\n  }\n\n  async updateActivity(id: number, updates: UpdateActivity): Promise<Activity> {\n    const [activity] = await db\n      .update(activities)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(activities.id, id))\n      .returning();\n    return activity;\n  }\n\n  async deleteActivity(id: number): Promise<void> {\n    await db.delete(activities).where(eq(activities.id, id));\n  }\n\n  async softDeleteActivity(id: number): Promise<void> {\n    await db\n      .update(activities)\n      .set({\n        is_deleted: true,\n        deleted_at: new Date(),\n        updatedAt: new Date(),\n      })\n      .where(eq(activities.id, id));\n  }\n\n  async restoreActivity(id: number): Promise<Activity> {\n    const [activity] = await db\n      .update(activities)\n      .set({\n        is_deleted: false,\n        deleted_at: null,\n        updatedAt: new Date(),\n      })\n      .where(eq(activities.id, id))\n      .returning();\n    return activity;\n  }\n\n  // Search configuration operations\n  async getSearchConfig(id: number): Promise<SearchConfig | undefined> {\n    const [config] = await db.select().from(searchConfigs).where(eq(searchConfigs.id, id));\n    return config || undefined;\n  }\n\n  async getSearchConfigByContext(context: string): Promise<SearchConfig | undefined> {\n    const [config] = await db.select().from(searchConfigs).where(eq(searchConfigs.context, context));\n    return config || undefined;\n  }\n\n  async getAllSearchConfigs(): Promise<SearchConfig[]> {\n    return db.select().from(searchConfigs);\n  }\n\n  async getActiveSearchConfigs(): Promise<SearchConfig[]> {\n    return db.select().from(searchConfigs).where(eq(searchConfigs.isActive, true));\n  }\n\n  async createSearchConfig(insertSearchConfig: InsertSearchConfig): Promise<SearchConfig> {\n    const [config] = await db\n      .insert(searchConfigs)\n      .values({\n        ...insertSearchConfig,\n        updatedAt: new Date(),\n      })\n      .returning();\n    return config;\n  }\n\n  async updateSearchConfig(id: number, updates: UpdateSearchConfig): Promise<SearchConfig> {\n    const [config] = await db\n      .update(searchConfigs)\n      .set({\n        ...updates,\n        updatedAt: new Date(),\n      })\n      .where(eq(searchConfigs.id, id))\n      .returning();\n    return config;\n  }\n\n  async deleteSearchConfig(id: number): Promise<void> {\n    await db.delete(searchConfigs).where(eq(searchConfigs.id, id));\n  }\n\n  // Search operations\n  async searchDestinations(query: string, location?: string): Promise<Destination[]> {\n    let whereCondition = and(\n      eq(destinations.published, true),\n      eq(destinations.is_deleted, false),\n      sql`${destinations.name} ILIKE '%' || ${query} || '%'`\n    );\n\n    if (location) {\n      whereCondition = and(\n        whereCondition,\n        sql`${destinations.location} ILIKE '%' || ${location} || '%'`\n      );\n    }\n\n    return db.select().from(destinations).where(whereCondition);\n  }\n\n  async searchActivities(query: string, location?: string, category?: string): Promise<Activity[]> {\n    let whereCondition = and(\n      eq(activities.published, true),\n      eq(activities.is_deleted, false),\n      sql`${activities.name} ILIKE '%' || ${query} || '%'`\n    );\n\n    if (location) {\n      whereCondition = and(\n        whereCondition,\n        sql`${activities.location} ILIKE '%' || ${location} || '%'`\n      );\n    }\n\n    if (category) {\n      whereCondition = and(\n        whereCondition,\n        sql`${activities.category} ILIKE '%' || ${category} || '%'`\n      );\n    }\n\n    return db.select().from(activities).where(whereCondition);\n  }\n\n  async searchGuides(query: string): Promise<Guide[]> {\n    const whereCondition = and(\n      eq(guides.published, true),\n      eq(guides.is_deleted, false),\n      sql`${guides.title} ILIKE '%' || ${query} || '%'`\n    );\n\n    return db.select().from(guides).where(whereCondition);\n  }\n\n  async searchHighlights(query: string): Promise<Highlight[]> {\n    const whereCondition = and(\n      eq(highlights.active, true),\n      sql`${highlights.name} ILIKE '%' || ${query} || '%'`\n    );\n\n    return db.select().from(highlights).where(whereCondition);\n  }\n\n  async searchPages(query: string): Promise<Page[]> {\n    const whereCondition = and(\n      eq(pages.published, true),\n      eq(pages.is_deleted, false),\n      sql`(${pages.title} ILIKE '%' || ${query} || '%' OR ${pages.content} ILIKE '%' || ${query} || '%')`\n    );\n\n    return db.select().from(pages).where(whereCondition);\n  }\n\n  async searchTemplates(query: string): Promise<Template[]> {\n    const whereCondition = and(\n      eq(templates.isActive, true),\n      sql`(${templates.name} ILIKE '%' || ${query} || '%' OR ${templates.content} ILIKE '%' || ${query} || '%')`\n    );\n\n    return db.select().from(templates).where(whereCondition);\n  }\n\n  async getDatabaseStatus() {\n    try {\n      // Test database connection and get basic info\n      const connectionTest = await db.execute(sql`SELECT 1`);\n      const dbNameResult = await db.execute(sql`SELECT current_database()`);\n      \n      // Count all tables\n      const tablesResult = await db.execute(sql`\n        SELECT COUNT(*) as table_count \n        FROM information_schema.tables \n        WHERE table_schema = 'public'\n      `);\n      \n      // Get total records across all content tables\n      const recordCounts = await Promise.all([\n        db.select({ count: sql<number>`count(*)` }).from(destinations),\n        db.select({ count: sql<number>`count(*)` }).from(guides),\n        db.select({ count: sql<number>`count(*)` }).from(pages),\n        db.select({ count: sql<number>`count(*)` }).from(activities),\n        db.select({ count: sql<number>`count(*)` }).from(highlights),\n        db.select({ count: sql<number>`count(*)` }).from(users),\n        db.select({ count: sql<number>`count(*)` }).from(templates),\n        db.select({ count: sql<number>`count(*)` }).from(searchConfigs)\n      ]);\n      \n      const totalRecords = recordCounts.reduce((sum, result) => sum + result[0].count, 0);\n      \n      // Get database size (Neon specific)\n      let storageSize = 'N/A';\n      try {\n        const sizeResult = await db.execute(sql`\n          SELECT pg_size_pretty(pg_database_size(current_database())) as size\n        `);\n        storageSize = (sizeResult.rows[0] as any)?.size || 'N/A';\n      } catch {\n        // Fallback if permissions don't allow\n        storageSize = 'Beperkte toegang';\n      }\n\n      return {\n        connectionStatus: 'connected' as const,\n        databaseName: (dbNameResult.rows[0] as any)?.current_database || 'ontdek-polen',\n        totalTables: Number((tablesResult.rows[0] as any)?.table_count || 0),\n        totalRecords,\n        storageSize,\n        uptime: 'N/A (Serverless)',\n        lastBackup: 'Automatisch (Neon)'\n      };\n    } catch (error) {\n      console.error('Database status check failed:', error);\n      return {\n        connectionStatus: 'disconnected' as const,\n        databaseName: 'Onbekend',\n        totalTables: 0,\n        totalRecords: 0,\n        storageSize: 'N/A',\n        uptime: 'N/A',\n        lastBackup: 'N/A'\n      };\n    }\n  }\n\n  async getTableStatistics() {\n    try {\n      const tableStats = await Promise.all([\n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(destinations).then(result => ({\n          tableName: 'Bestemmingen',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(guides).then(result => ({\n          tableName: 'Reizen',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(pages).then(result => ({\n          tableName: 'Pagina\\'s',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(activities).then(result => ({\n          tableName: 'Activiteiten',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(highlights).then(result => ({\n          tableName: 'Hoogtepunten',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`,\n          latest: sql<string>`max(updated_at)::text`\n        }).from(users).then(result => ({\n          tableName: 'Gebruikers',\n          recordCount: result[0].count,\n          lastUpdated: result[0].latest ? new Date(result[0].latest).toLocaleDateString('nl-NL') : 'Onbekend'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`\n        }).from(templates).then(result => ({\n          tableName: 'Templates',\n          recordCount: result[0].count,\n          lastUpdated: 'Statisch'\n        })),\n        \n        db.select({ \n          count: sql<number>`count(*)`\n        }).from(searchConfigs).then(result => ({\n          tableName: 'Zoek Configuraties',\n          recordCount: result[0].count,\n          lastUpdated: 'Statisch'\n        }))\n      ]);\n\n      return tableStats;\n    } catch (error) {\n      console.error('Table statistics failed:', error);\n      return [];\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":36461},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp, varchar } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default(\"user\"), // \"admin\" or \"user\"\n  canCreateContent: boolean(\"can_create_content\").default(true),\n  canEditContent: boolean(\"can_edit_content\").default(true),\n  canDeleteContent: boolean(\"can_delete_content\").default(false),\n  canManageUsers: boolean(\"can_manage_users\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references((): any => users.id),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n  role: true,\n  canCreateContent: true,\n  canEditContent: true,\n  canDeleteContent: true,\n  canManageUsers: true,\n  createdBy: true,\n});\n\nexport const updateUserSchema = createInsertSchema(users).pick({\n  username: true,\n  role: true,\n  canCreateContent: true,\n  canEditContent: true,\n  canDeleteContent: true,\n  canManageUsers: true,\n}).partial();\n\nexport const changePasswordSchema = z.object({\n  currentPassword: z.string().min(1, \"Huidig wachtwoord is verplicht\"),\n  newPassword: z.string().min(6, \"Nieuw wachtwoord moet minimaal 6 karakters zijn\"),\n  confirmPassword: z.string().min(1, \"Bevestig het nieuwe wachtwoord\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Wachtwoorden komen niet overeen\",\n  path: [\"confirmPassword\"],\n});\n\nexport const resetPasswordSchema = z.object({\n  userId: z.number(),\n  newPassword: z.string().min(6, \"Wachtwoord moet minimaal 6 karakters zijn\"),\n  confirmPassword: z.string().min(1, \"Bevestig het wachtwoord\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Wachtwoorden komen niet overeen\",\n  path: [\"confirmPassword\"],\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpdateUser = z.infer<typeof updateUserSchema>;\nexport type ChangePassword = z.infer<typeof changePasswordSchema>;\nexport type ResetPassword = z.infer<typeof resetPasswordSchema>;\nexport type User = typeof users.$inferSelect;\n\n// Destinations table\nexport const destinations = pgTable(\"destinations\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  location: text(\"location\"), // City or village name for organizing destinations\n  slug: text(\"slug\").notNull().unique(),\n  description: text(\"description\").notNull(),\n  image: text(\"image\").notNull(),\n  alt: text(\"alt\").notNull(),\n  content: text(\"content\").notNull(),\n  link: text(\"link\"), // Optional link URL for the destination\n  featured: boolean(\"featured\").default(false),\n  published: boolean(\"published\").default(true),\n  showOnHomepage: boolean(\"show_on_homepage\").default(true).notNull(), // Controls if shown on homepage\n  ranking: integer(\"ranking\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n  is_deleted: boolean(\"is_deleted\").default(false),\n  deleted_at: timestamp(\"deleted_at\"),\n});\n\nexport const insertDestinationSchema = createInsertSchema(destinations).pick({\n  name: true,\n  location: true,\n  slug: true,\n  description: true,\n  image: true,\n  alt: true,\n  content: true,\n  link: true,\n  featured: true,\n  published: true,\n  showOnHomepage: true,\n  ranking: true,\n  createdBy: true,\n});\n\nexport const updateDestinationSchema = insertDestinationSchema.partial();\n\nexport type InsertDestination = z.infer<typeof insertDestinationSchema>;\nexport type UpdateDestination = z.infer<typeof updateDestinationSchema>;\nexport type Destination = typeof destinations.$inferSelect;\n\n// Guides table\nexport const guides = pgTable(\"guides\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  slug: text(\"slug\").notNull().unique(),\n  description: text(\"description\").notNull(),\n  image: text(\"image\").notNull(),\n  alt: text(\"alt\").notNull(),\n  content: text(\"content\").notNull(),\n  link: text(\"link\"), // Optional link URL for the guide\n  featured: boolean(\"featured\").default(false),\n  published: boolean(\"published\").default(true),\n  showOnHomepage: boolean(\"show_on_homepage\").default(true).notNull(), // Controls if shown on homepage\n  ranking: integer(\"ranking\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n  is_deleted: boolean(\"is_deleted\").default(false),\n  deleted_at: timestamp(\"deleted_at\"),\n});\n\nexport const insertGuideSchema = createInsertSchema(guides).pick({\n  title: true,\n  slug: true,\n  description: true,\n  image: true,\n  alt: true,\n  content: true,\n  link: true,\n  featured: true,\n  published: true,\n  showOnHomepage: true,\n  ranking: true,\n  createdBy: true,\n});\n\nexport const updateGuideSchema = insertGuideSchema.partial();\n\nexport type InsertGuide = z.infer<typeof insertGuideSchema>;\nexport type UpdateGuide = z.infer<typeof updateGuideSchema>;\nexport type Guide = typeof guides.$inferSelect;\n\n// Site settings table for managing global site configuration\nexport const siteSettings = pgTable(\"site_settings\", {\n  id: serial(\"id\").primaryKey(),\n  siteName: varchar(\"site_name\", { length: 255 }).notNull().default(\"Ontdek Polen\"),\n  siteDescription: text(\"site_description\").notNull().default(\"Ontdek de mooiste plekken van Polen\"),\n  metaKeywords: text(\"meta_keywords\").default(\"Polen, reizen, vakantie, bestemmingen\"),\n  favicon: varchar(\"favicon\", { length: 255 }).default(\"/favicon.ico\"),\n  faviconEnabled: boolean(\"favicon_enabled\").default(true),\n  backgroundImage: varchar(\"background_image\", { length: 255 }),\n  backgroundImageAlt: varchar(\"background_image_alt\", { length: 255 }),\n  logoImage: varchar(\"logo_image\", { length: 255 }),\n  logoImageAlt: varchar(\"logo_image_alt\", { length: 255 }),\n  socialMediaImage: varchar(\"social_media_image\", { length: 255 }),\n  headerOverlayEnabled: boolean(\"header_overlay_enabled\").default(false),\n  headerOverlayOpacity: integer(\"header_overlay_opacity\").default(30),\n  customCSS: text(\"custom_css\"),\n  customJS: text(\"custom_js\"),\n  googleAnalyticsId: varchar(\"google_analytics_id\", { length: 50 }),\n  // Homepage Section Visibility Controls\n  showDestinations: boolean(\"show_destinations\").default(true).notNull(),\n  showMotivation: boolean(\"show_motivation\").default(true).notNull(),\n  showHighlights: boolean(\"show_highlights\").default(true).notNull(),\n  showOntdekMeer: boolean(\"show_ontdek_meer\").default(true).notNull(),\n  showGuides: boolean(\"show_guides\").default(true).notNull(),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertSiteSettingsSchema = createInsertSchema(siteSettings).pick({\n  siteName: true,\n  siteDescription: true,\n  metaKeywords: true,\n  favicon: true,\n  faviconEnabled: true,\n  backgroundImage: true,\n  backgroundImageAlt: true,\n  logoImage: true,\n  logoImageAlt: true,\n  socialMediaImage: true,\n  headerOverlayEnabled: true,\n  headerOverlayOpacity: true,\n  customCSS: true,\n  customJS: true,\n  googleAnalyticsId: true,\n  showDestinations: true,\n  showMotivation: true,\n  showHighlights: true,\n  showOntdekMeer: true,\n  showGuides: true,\n  isActive: true,\n});\n\nexport const updateSiteSettingsSchema = insertSiteSettingsSchema.partial();\n\nexport type InsertSiteSettings = z.infer<typeof insertSiteSettingsSchema>;\nexport type UpdateSiteSettings = z.infer<typeof updateSiteSettingsSchema>;\nexport type SiteSettings = typeof siteSettings.$inferSelect;\n\n// Pages table for dynamic page management\nexport const pages = pgTable(\"pages\", {\n  id: serial(\"id\").primaryKey(),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  slug: varchar(\"slug\", { length: 255 }).notNull().unique(),\n  content: text(\"content\").notNull(),\n  metaTitle: varchar(\"meta_title\", { length: 255 }),\n  metaDescription: varchar(\"meta_description\", { length: 500 }),\n  metaKeywords: varchar(\"meta_keywords\", { length: 500 }),\n  template: varchar(\"template\", { length: 100 }).default(\"default\").notNull(),\n  headerImage: varchar(\"header_image\", { length: 255 }), // Header image for the page\n  headerImageAlt: varchar(\"header_image_alt\", { length: 255 }), // Alt text for header image\n  // Location-specific highlight sections (JSON array)\n  highlightSections: text(\"highlight_sections\"), // JSON string of highlight objects\n  published: boolean(\"published\").default(false).notNull(),\n  featured: boolean(\"featured\").default(false).notNull(),\n  ranking: integer(\"ranking\").default(0).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n  is_deleted: boolean(\"is_deleted\").default(false).notNull(),\n  deleted_at: timestamp(\"deleted_at\"),\n});\n\nexport const insertPageSchema = createInsertSchema(pages).pick({\n  title: true,\n  slug: true,\n  content: true,\n  metaTitle: true,\n  metaDescription: true,\n  metaKeywords: true,\n  template: true,\n  headerImage: true,\n  headerImageAlt: true,\n  highlightSections: true,\n  published: true,\n  featured: true,\n  ranking: true,\n});\n\nexport const updatePageSchema = insertPageSchema.partial();\n\nexport type InsertPage = z.infer<typeof insertPageSchema>;\nexport type UpdatePage = z.infer<typeof updatePageSchema>;\nexport type Page = typeof pages.$inferSelect;\n\n// Templates table for reusable page templates\nexport const templates = pgTable(\"templates\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull().unique(),\n  description: varchar(\"description\", { length: 500 }),\n  content: text(\"content\").notNull(),\n  defaultMetaTitle: varchar(\"default_meta_title\", { length: 255 }),\n  defaultMetaDescription: varchar(\"default_meta_description\", { length: 500 }),\n  defaultMetaKeywords: varchar(\"default_meta_keywords\", { length: 500 }),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n});\n\nexport const insertTemplateSchema = createInsertSchema(templates).pick({\n  name: true,\n  description: true,\n  content: true,\n  defaultMetaTitle: true,\n  defaultMetaDescription: true,\n  defaultMetaKeywords: true,\n  isActive: true,\n});\n\nexport const updateTemplateSchema = insertTemplateSchema.partial();\n\nexport type InsertTemplate = z.infer<typeof insertTemplateSchema>;\nexport type UpdateTemplate = z.infer<typeof updateTemplateSchema>;\nexport type Template = typeof templates.$inferSelect;\n\n// Highlights table\nexport const highlights = pgTable(\"highlights\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  iconPath: varchar(\"icon_path\", { length: 500 }).notNull(),\n  category: varchar(\"category\", { length: 50 }).default(\"general\"),\n  ranking: integer(\"ranking\").default(0),\n  active: boolean(\"active\").default(true),\n  showOnHomepage: boolean(\"show_on_homepage\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n});\n\nexport const insertHighlightSchema = createInsertSchema(highlights).pick({\n  name: true,\n  iconPath: true,\n  category: true,\n  ranking: true,\n  active: true,\n  showOnHomepage: true,\n});\n\nexport const updateHighlightSchema = insertHighlightSchema.partial();\n\nexport type InsertHighlight = z.infer<typeof insertHighlightSchema>;\nexport type UpdateHighlight = z.infer<typeof updateHighlightSchema>;\nexport type Highlight = typeof highlights.$inferSelect;\n\n// Activities table\nexport const activities = pgTable(\"activities\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\", { length: 255 }).notNull(),\n  location: varchar(\"location\", { length: 255 }), // City/region where activity is located\n  category: varchar(\"category\", { length: 100 }), // museum, gebergte, plein, kerk, horeca, hotel, camping, etc.\n  activityType: varchar(\"activitytype\", { length: 100 }), // More specific type within category\n  description: text(\"description\"),\n  image: text(\"image\"),\n  alt: text(\"alt\"),\n  content: text(\"content\"),\n  link: text(\"link\"), // Optional link URL for the activity\n  featured: boolean(\"featured\").default(false),\n  published: boolean(\"published\").default(true),\n  ranking: integer(\"ranking\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  is_deleted: boolean(\"is_deleted\").default(false),\n  deleted_at: timestamp(\"deleted_at\"),\n});\n\nexport const insertActivitySchema = createInsertSchema(activities).pick({\n  name: true,\n  location: true,\n  category: true,\n  activityType: true,\n  description: true,\n  image: true,\n  alt: true,\n  content: true,\n  link: true,\n  featured: true,\n  published: true,\n  ranking: true,\n});\n\nexport const updateActivitySchema = insertActivitySchema.partial();\n\nexport type InsertActivity = z.infer<typeof insertActivitySchema>;\nexport type UpdateActivity = z.infer<typeof updateActivitySchema>;\nexport type Activity = typeof activities.$inferSelect;\n\n// Search Configuration table\nexport const searchConfigs = pgTable(\"search_configs\", {\n  id: serial(\"id\").primaryKey(),\n  context: text(\"context\").notNull(), // \"homepage\", \"destination_page\", \"guide_page\", etc.\n  placeholderText: text(\"placeholder_text\").notNull(),\n  searchScope: text(\"search_scope\").notNull(), // \"destinations\", \"activities\", \"guides\", \"all\"\n  enableLocationFilter: boolean(\"enable_location_filter\").default(false),\n  enableCategoryFilter: boolean(\"enable_category_filter\").default(false),\n  enableHighlights: boolean(\"enable_highlights\").default(false), // ‚ú® Hoogtepunten\n  enableGuides: boolean(\"enable_guides\").default(false), // üìñ Reisgidsen\n  customInstructions: text(\"custom_instructions\"), // Additional search instructions or context\n  redirectPattern: text(\"redirect_pattern\"), // Pattern for redirects like \"/{{slug}}\" or \"/bestemming/{{slug}}\"\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n  createdBy: integer(\"created_by\").references(() => users.id),\n});\n\nexport const insertSearchConfigSchema = createInsertSchema(searchConfigs).pick({\n  context: true,\n  placeholderText: true,\n  searchScope: true,\n  enableLocationFilter: true,\n  enableCategoryFilter: true,\n  enableHighlights: true,\n  enableGuides: true,\n  customInstructions: true,\n  redirectPattern: true,\n  isActive: true,\n});\n\nexport const updateSearchConfigSchema = insertSearchConfigSchema.partial();\n\nexport type InsertSearchConfig = z.infer<typeof insertSearchConfigSchema>;\nexport type UpdateSearchConfig = z.infer<typeof updateSearchConfigSchema>;\nexport type SearchConfig = typeof searchConfigs.$inferSelect;\n\n// Motivation section table\nexport const motivation = pgTable(\"motivation\", {\n  id: serial(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  buttonText: text(\"button_text\").notNull(),\n  buttonAction: text(\"button_action\"),\n  image: text(\"image\"),\n  isPublished: boolean(\"is_published\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertMotivationSchema = createInsertSchema(motivation).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const updateMotivationSchema = insertMotivationSchema.partial();\n\nexport type InsertMotivation = z.infer<typeof insertMotivationSchema>;\nexport type UpdateMotivation = z.infer<typeof updateMotivationSchema>;\nexport type SelectMotivation = typeof motivation.$inferSelect;\n\n// Motivation Image Locations table\nexport const motivationImageLocations = pgTable(\"motivation_image_locations\", {\n  id: serial(\"id\").primaryKey(),\n  imagePath: text(\"image_path\").notNull().unique(), // Full path to the image\n  locationName: text(\"location_name\").notNull(), // User-defined location name\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertMotivationImageLocationSchema = createInsertSchema(motivationImageLocations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const updateMotivationImageLocationSchema = insertMotivationImageLocationSchema.partial();\n\nexport type InsertMotivationImageLocation = z.infer<typeof insertMotivationImageLocationSchema>;\nexport type UpdateMotivationImageLocation = z.infer<typeof updateMotivationImageLocationSchema>;\nexport type SelectMotivationImageLocation = typeof motivationImageLocations.$inferSelect;\n","size_bytes":17054},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Home from \"@/pages/home\";\nimport Admin from \"@/pages/admin\";\nimport OntdekMeer from \"@/pages/ontdek-meer\";\nimport Page from \"@/pages/page\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/admin\" component={Admin} />\n      <Route path=\"/ontdek-meer\" component={OntdekMeer} />\n      <Route path=\"/:slug\" component={Page} />\n      <Route path=\"/destination/:slug\" component={Page} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":1026},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(41, 37%, 96%);\n  --foreground: hsl(15, 20%, 12%);\n  --muted: hsl(41, 37%, 96%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(15, 20%, 12%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(15, 20%, 12%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(197, 37%, 24%);\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(41, 37%, 96%);\n  --secondary-foreground: hsl(15, 20%, 12%);\n  --accent: hsl(41, 37%, 96%);\n  --accent-foreground: hsl(15, 20%, 12%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(15, 20%, 12%);\n  --radius: 0.5rem;\n  \n  /* Custom colors for the Polish travel site */\n  --cream: hsl(41, 37%, 96%);\n  --dark-green: hsl(197, 37%, 24%);\n  --dark-text: hsl(15, 20%, 12%);\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(197, 37%, 24%);\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-inter antialiased;\n    background-color: #f8f6f1;\n    color: #1f1f1f;\n  }\n}\n\n@layer utilities {\n  .font-inter {\n    font-family: 'Inter', sans-serif;\n  }\n}\n\n/* Custom slider styles for header overlay settings */\ninput[type=\"range\"].slider {\n  -webkit-appearance: none;\n  background: transparent;\n  cursor: pointer;\n}\n\ninput[type=\"range\"].slider::-webkit-slider-track {\n  background: #e5e7eb;\n  height: 8px;\n  border-radius: 4px;\n}\n\ninput[type=\"range\"].slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background: #2563eb;\n  height: 20px;\n  width: 20px;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\ninput[type=\"range\"].slider::-moz-range-track {\n  background: #e5e7eb;\n  height: 8px;\n  border-radius: 4px;\n  border: none;\n}\n\ninput[type=\"range\"].slider::-moz-range-thumb {\n  background: #2563eb;\n  height: 20px;\n  width: 20px;\n  border-radius: 50%;\n  border: none;\n  cursor: pointer;\n}\n","size_bytes":2647},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/data/destinations.ts":{"content":"// Auto-generated - Do not edit manually\nexport const destinations = [\n  {\n    \"id\": 4,\n    \"name\": \"Bialowieza\",\n    \"slug\": \"bialowieza\",\n    \"image\": \"/images/bialowieza.jpg\",\n    \"alt\": \"Bialowieza\",\n    \"description\": \"Ontdek het laatste oerbos van Europa in Bialowieza, thuisbasis van de Europese bizon\",\n    \"content\": \"# Bialowieza\\n\\nBialowieza Forest is het laatste oerbos van Europa en een UNESCO Werelderfgoedlocatie. Dit unieke natuurgebied herbergt de Europese bizon en vele andere wilde dieren.\\n\\n## Natuur highlights\\n\\n- **Europese bizons** - De koning van het bos, terug van de rand van uitsterven\\n- **Oerbos** - Bomen die honderden jaren oud zijn\\n- **Wilde dieren** - Wolven, lynxen, elanden en meer dan 250 vogelsoorten\\n- **Oude eiken** - Sommige meer dan 500 jaar oud\\n\\n## Activiteiten\\n\\n- **Geleide tours** - Verplicht voor toegang tot het stricte natuurreservaat\\n- **Fietsen** - Prachtige fietspaden door het bos\\n- **Birdwatching** - Ideaal voor vogelliefhebbers\\n- **Natuurfotografie** - Unieke kansen voor wildlife fotografie\\n\\n## Bezoekersinfo\\n\\n- **Toegang** - Alleen met gids toegestaan in het kerngebied\\n- **Beste seizoen** - Mei tot oktober voor beste wildlife kansen\\n- **Kleding** - Stevige schoenen en insectenspray zijn essentieel\\n- **Respect** - Volg altijd de natuurregels en blijf op de paden\\n\\n## Accommodatie\\n\\n- **Bia≈Çowie≈ºa dorp** - Basis voor je bosavontuur\\n- **Lokale guesthouses** - Authentieke ervaring\\n- **Natuurcentrum** - Educatieve tentoonstellingen over het bos\",\n    \"featured\": false,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 3,\n    \"name\": \"Gdansk\",\n    \"slug\": \"gdansk\",\n    \"image\": \"/images/gdansk.jpg\",\n    \"alt\": \"Gdansk\",\n    \"description\": \"Verken Gdansk, de prachtige havenstad met kleurrijke gevels en rijke maritieme geschiedenis\",\n    \"content\": \"# Gdansk\\n\\nGdansk is een prachtige havenstad aan de Oostzee met een rijke geschiedenis en kleurrijke architectuur. De stad speelde een belangrijke rol in de Europese geschiedenis en is de bakermat van de Solidarno≈õƒá-beweging.\\n\\n## Bezienswaardigheden\\n\\n- **D≈Çugi Targ (Lange Markt)** - Het hart van de oude stad met prachtige patriciershuizen\\n- **Artus Court** - Historisch gebouw waar kooplieden elkaar ontmoetten\\n- **St. Mary's Church** - Een van de grootste bakstenen kerken ter wereld\\n- **Crane Gate** - Iconisch symbool van Gdansk aan de Mot≈Çawa rivier\\n- **Westerplatte** - Historische locatie waar WOII begon\\n\\n## Maritime erfgoed\\n\\n- **Nationaal Maritiem Museum** - Ontdek de zeevaartgeschiedenis\\n- **Soldek schip** - Historisch vrachtschip te bezoeken\\n- **Havenwandeling** - Prachtige wandeling langs de rivier\\n\\n## Culinair\\n\\n- **Goldwasser** - Traditionele likeur met goudvlokken\\n- **Verse vis** - Rechtstreeks van de Oostzee\\n- **Poolse amber** - Gdansk staat bekend om amber sieraden\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 1,\n    \"name\": \"Krakow\",\n    \"slug\": \"krakow\",\n    \"image\": \"/images/krakow.jpg\",\n    \"alt\": \"Krakow\",\n    \"description\": \"Ontdek de historische stad Krakow met zijn prachtige marktplein en rijke cultuur\",\n    \"content\": \"# Krakow\\n\\nKrakow is een van de mooiste steden van Polen. De historische binnenstad staat op de UNESCO Werelderfgoedlijst en biedt bezoekers een unieke kijk op de Poolse geschiedenis en cultuur.\\n\\n## Bezienswaardigheden\\n\\n- **Marktplein (Rynek G≈Ç√≥wny)** - Een van de grootste middeleeuwse marktpleinen van Europa\\n- **Wawel Kasteel** - Het symbool van Polen met zijn koninklijke geschiedenis\\n- **Kazimierz** - Het historische Joodse kwartier vol restaurants en caf√©s\\n- **St. Mary's Basiliek** - Beroemd om zijn houten altaar en trompetsignaal\\n\\n## Tips voor je bezoek\\n\\n- Bezoek vroeg in de ochtend voor minder drukte\\n- Proef traditionele pierogi in een lokaal restaurant\\n- Maak een wandeling langs de Wis≈Ça rivier\\n- Neem deel aan een gratis walking tour\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"Tatra Mountains\",\n    \"slug\": \"tatra-mountains\",\n    \"image\": \"/images/tatra.jpg\",\n    \"alt\": \"Tatra Mountains\",\n    \"description\": \"Ervaar de adembenemende Tatra Mountains, perfect voor wandelaars en natuurliefhebbers\",\n    \"content\": \"# Tatra Mountains\\n\\nDe Tatra Mountains vormen de natuurlijke grens tussen Polen en Slowakije. Dit berggebied biedt spectaculaire landschappen, kristalheldere meren en uitdagende wandelpaden.\\n\\n## Hoogtepunten\\n\\n- **Morskie Oko** - Het 'Oog van de Zee', een prachtig bergmeer\\n- **Kasprowy Wierch** - Bereikbaar met de kabelbaan, prachtige uitzichten\\n- **Zakopane** - Charmant bergdorpje aan de voet van de Tatra's\\n- **Wandelpaden** - Van makkelijke wandelingen tot uitdagende bergtochten\\n\\n## Activiteiten\\n\\n- Wandelen en bergbeklimmen\\n- Ski√´n in de winter\\n- Fotograferen van wilde dieren\\n- Bezoek aan traditionele berghutten\\n\\n## Praktische info\\n\\n- Beste tijd: Juni tot september voor wandelen\\n- Neem warme kleding mee (weer kan snel omslaan)\\n- Wandelpaden kunnen druk zijn in het weekend\\n- Respect voor de natuur is essentieel\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  }\n];\n","size_bytes":5296},"client/src/data/guides.ts":{"content":"// Auto-generated - Do not edit manually\nexport const guides = [\n  {\n    \"id\": 1,\n    \"title\": \"3 Dagen in Krakau\",\n    \"slug\": \"3-dagen-in-krakau\",\n    \"image\": \"/images/krakau-dagtrip.jpg\",\n    \"alt\": \"3 Dagen in Krakau\",\n    \"description\": \"Complete reisgids voor een perfecte 3-daagse trip naar Krakau\",\n    \"content\": \"# 3 Dagen in Krakau\\n\\nKrakau is perfect voor een lang weekend. Deze gids helpt je het beste uit je 3 dagen te halen.\\n\\n## Dag 1: Oude Stad\\n\\n### Ochtend\\n- **9:00** - Start op het Marktplein (Rynek G≈Ç√≥wny)\\n- **10:00** - Bezoek St. Mary's Basiliek\\n- **11:00** - Verken de Sukiennice (Cloth Hall)\\n- **12:00** - Koffie in √©√©n van de caf√©s rond het plein\\n\\n### Middag\\n- **13:00** - Lunch bij een traditioneel restaurant\\n- **14:30** - Wandeling naar Wawel Castle\\n- **15:00** - Bezoek Wawel Castle en Cathedral\\n- **17:00** - Wandeling langs de Wis≈Ça rivier\\n\\n### Avond\\n- **19:00** - Diner in Kazimierz (Joods kwartier)\\n- **21:00** - Nightlife in Kazimierz\\n\\n## Dag 2: Kazimierz & Podg√≥rze\\n\\n### Ochtend\\n- **9:00** - Ontbijt in Kazimierz\\n- **10:00** - Bezoek Remuh Synagogue\\n- **11:00** - Wandeling door de Joodse wijk\\n- **12:00** - Bezoek aan de Nieuwe Synagoge\\n\\n### Middag\\n- **13:00** - Lunch in een lokaal restaurant\\n- **14:30** - Wandeling naar Podg√≥rze\\n- **15:00** - Bezoek Schindler's Factory Museum\\n- **17:00** - Wandeling langs de Wis≈Ça\\n\\n### Avond\\n- **19:00** - Diner in de oude stad\\n- **21:00** - Poolse folklore show of opera\\n\\n## Dag 3: Dagtrip of Musea\\n\\n### Optie A: Auschwitz-Birkenau (dag trip)\\n- **7:00** - Vroeg ontbijt\\n- **8:00** - Vertrek naar Auschwitz (1.5 uur)\\n- **10:00-16:00** - Bezoek Auschwitz-Birkenau\\n- **17:30** - Terug in Krakau\\n- **19:00** - Rustig diner\\n\\n### Optie B: Musea in Krakau\\n- **9:00** - Bezoek Nationaal Museum\\n- **11:00** - Bezoek Czartoryski Museum\\n- **13:00** - Lunch\\n- **14:30** - Bezoek ondergrondse markt (Rynek Underground)\\n- **16:00** - Laatste souvenirs kopen\\n- **17:30** - Afscheidsdiner\\n\\n## Praktische Tips\\n\\n### Vervoer\\n- **Lopen** - Centrum is klein en goed te voet te verkennen\\n- **Tram** - Goedkoop openbaar vervoer\\n- **Taxi/Uber** - Beschikbaar maar duurder\\n\\n### Eten\\n- **Pierogi** - Traditionele dumplings, must-try!\\n- **Kielbasa** - Poolse worst\\n- **Zapiekanka** - Pools street food\\n- **Oscypek** - Traditionele bergkaas\\n\\n### Accommodatie\\n- **Oude Stad** - Dichtbij bezienswaardigheden, wel druk\\n- **Kazimierz** - Trendy wijk met veel restaurants\\n- **Podg√≥rze** - Rustiger, iets verder van centrum\\n\\n### Budget (per persoon)\\n- **Budget** - ‚Ç¨40-60 per dag\\n- **Midrange** - ‚Ç¨60-100 per dag\\n- **Luxury** - ‚Ç¨100+ per dag\\n\\n## Niet te missen\\n\\n- Trompetsignaal vanaf St. Mary's toren (elk uur)\\n- Zonsondergang op Wawel Hill\\n- Poolse vodka proeven\\n- Traditionele Poolse muziek\\n- Ambachtelijke souvenirs op het marktplein\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 2,\n    \"title\": \"Roadtrip door het zuiden\",\n    \"slug\": \"roadtrip-door-het-zuiden\",\n    \"image\": \"/images/roadtrip-zuid.jpg\",\n    \"alt\": \"Roadtrip door het zuiden\",\n    \"description\": \"Ontdek Zuid-Polen met deze complete roadtrip gids door de mooiste regio's\",\n    \"content\": \"# Roadtrip door het zuiden van Polen\\n\\nEen 7-daagse roadtrip door Zuid-Polen brengt je langs historische steden, prachtige bergen en charmante dorpjes.\\n\\n## Route Overview (7 dagen)\\n\\n**Totale afstand:** ~1200 km  \\n**Beste tijd:** Mei - Oktober  \\n**Startpunt:** Krakau  \\n**Eindpunt:** Krakau (rondrit)\\n\\n## Dag 1: Krakau ‚Üí Zakopane (100 km, 2 uur)\\n\\n### Route\\n- Vertrek uit Krakau via A4/E40\\n- Neem afslag naar Zakopane (DK7)\\n- Prachtige bergzichten onderweg\\n\\n### Zakopane highlights\\n- **Krup√≥wki** - Hoofdstraat vol restaurants en winkels\\n- **Guba≈Ç√≥wka Hill** - Kabelbaan met panoramisch uitzicht\\n- **Tatra Museum** - Geschiedenis van de regio\\n- **Houtarchitectuur** - Traditionele berghuizen\\n\\n### Overnachting\\n- **Hotel Litwor** - Luxe optie met spa\\n- **Villa Siesta** - Gezellige pension\\n- **Camping** - Voor budget reizigers\\n\\n## Dag 2: Zakopane ‚Üí Dunajec River ‚Üí Sandomierz (200 km, 4 uur)\\n\\n### Ochtend: Dunajec River Gorge\\n- **9:00** - Vertrek naar Szczawnica\\n- **10:00** - Dunajec rivier rafting (2 uur)\\n- **12:00** - Lunch in Szczawnica\\n\\n### Middag: Naar Sandomierz\\n- **13:30** - Vertrek naar Sandomierz\\n- **17:00** - Aankomst in Sandomierz\\n- **18:00** - Wandeling door oude stad\\n\\n### Sandomierz\\n- **Marktplein** - Prachtige Renaissance gebouwen\\n- **Castle Hill** - Ru√Ønes met uitzicht over Wis≈Ça\\n- **Ondergrondse route** - Middeleeuwse kelders\\n\\n## Dag 3: Sandomierz ‚Üí Lublin (150 km, 2.5 uur)\\n\\n### Ochtend in Sandomierz\\n- **9:00** - Ontbijt en laatste bezienswaardigheden\\n- **11:00** - Vertrek naar Lublin\\n\\n### Lublin\\n- **Oude Stad** - Goed bewaard middeleeuws centrum\\n- **Lublin Castle** - Geschiedenis en kunst\\n- **Majdanek** - Voormalig concentratiekamp (optioneel)\\n- **Mahler** - Beste restaurant voor diner\\n\\n## Dag 4: Lublin ‚Üí Zamo≈õƒá ‚Üí Rzesz√≥w (200 km, 3 uur)\\n\\n### Ochtend: Zamo≈õƒá\\n- **9:00** - Vertrek naar Zamo≈õƒá (1 uur)\\n- **10:00** - Bezoek UNESCO stad Zamo≈õƒá\\n- **12:00** - Lunch op het marktplein\\n\\n### Zamo≈õƒá highlights\\n- **Grote Marktplein** - Perfect Renaissance plein\\n- **Stadhuis** - Prachtige architectuur\\n- **Synagogue** - Joodse geschiedenis\\n\\n### Middag: Naar Rzesz√≥w\\n- **14:00** - Vertrek naar Rzesz√≥w\\n- **16:00** - Aankomst en hotel check-in\\n- **17:00** - Wandeling door centrum\\n\\n## Dag 5: Rzesz√≥w ‚Üí Bieszczady Mountains (150 km, 3 uur)\\n\\n### Naar de Bieszczady\\n- **9:00** - Vertrek naar Bieszczady\\n- **12:00** - Lunch in Sanok\\n- **14:00** - Aankomst in Ustrzyki Dolne\\n\\n### Bieszczady activiteiten\\n- **Wandelen** - Prachtige bergpaden\\n- **Solina Dam** - Grootste stuwdam van Polen\\n- **Wilde dieren** - Beren, wolven, lynxen\\n- **Bergdorpjes** - Authentieke Lemko cultuur\\n\\n## Dag 6: Bieszczady ‚Üí Czƒôstochowa (300 km, 4 uur)\\n\\n### Ochtend: Laatste Bieszczady\\n- **8:00** - Vroege wandeling\\n- **10:00** - Vertrek naar Czƒôstochowa\\n- **14:00** - Aankomst Czƒôstochowa\\n\\n### Czƒôstochowa\\n- **Jasna G√≥ra Monastery** - Beroemde bedevaartsoord\\n- **Zwarte Madonna** - Heilige icoon\\n- **Kloosters** - Spirituele ervaring\\n\\n## Dag 7: Czƒôstochowa ‚Üí Auschwitz ‚Üí Krakau (150 km, 2.5 uur)\\n\\n### Ochtend: Auschwitz-Birkenau\\n- **9:00** - Vertrek naar Auschwitz (1 uur)\\n- **10:00-14:00** - Bezoek museum\\n- **15:00** - Vertrek naar Krakau\\n\\n### Terug in Krakau\\n- **16:00** - Aankomst Krakau\\n- **19:00** - Afscheidsdiner\\n- **21:00** - Laatste avond in Krakau\\n\\n## Praktische informatie\\n\\n### Auto huren\\n- **Internationale rijbewijs** vereist\\n- **Verzekering** - Volledige dekking aanbevolen\\n- **Brandstof** - Tankstations overal beschikbaar\\n- **Tolwegen** - Minimaal in Polen\\n\\n### Accommodatie tips\\n- **Boek vooruit** in hoogseizoen (juli-augustus)\\n- **Agrotourisme** - Authentieke boerderij ervaring\\n- **Pensionen** - Persoonlijke service\\n- **Hotels** - Comfort en faciliteiten\\n\\n### Budgetinschatting (per persoon)\\n- **Auto huur** - ‚Ç¨30-50 per dag\\n- **Brandstof** - ‚Ç¨200-300 totaal\\n- **Accommodatie** - ‚Ç¨25-80 per nacht\\n- **Maaltijden** - ‚Ç¨20-40 per dag\\n- **Attracties** - ‚Ç¨10-20 per bezoek\\n\\n### Paklijst\\n- **Wandelschoenen** - Voor berg wandelingen\\n- **Warme kleding** - Bergen kunnen koud zijn\\n- **Regenjack** - Weer kan omslaan\\n- **Camera** - Voor prachtige landschappen\\n- **Powerbank** - Voor navigatie\\n\\n## Niet te missen\\n\\n- Traditionele highlander muziek in Zakopane\\n- Dunajec rivier rafting\\n- Zonsondergang in Bieszczady\\n- Poolse pierogi in elk stadje\\n- Lokale honing en kaas\\n- Ambachtelijke souvenirs\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 3,\n    \"title\": \"Verborgen Parels aan zee\",\n    \"slug\": \"verborgen-parels-aan-zee\",\n    \"image\": \"/images/zee-parels.jpg\",\n    \"alt\": \"Verborgen Parels aan zee\",\n    \"description\": \"Ontdek de mooiste verborgen plekjes aan de Poolse Oostzeekust\",\n    \"content\": \"# Verborgen Parels aan de Poolse Oostzeekust\\n\\nDe Poolse Oostzeekust biedt meer dan alleen Gdansk. Ontdek deze verborgen parels voor een authentieke kustervaring.\\n\\n## S≈Çowi≈Ñski National Park\\n\\n### Wandelende zandduinen\\n- **Uniek fenomeen** - Zandduinen die jaarlijks verplaatsen\\n- **Wandelpaden** - Verschillende routes door duinen en bossen\\n- **Vuurtoren** - Historische vuurtoren met uitzicht\\n- **Wilde dieren** - Zeearenden, herten en wilde zwijnen\\n\\n### Activiteiten\\n- **Zandduinen beklimmen** - Spectaculaire uitzichten\\n- **Birdwatching** - Meer dan 270 vogelsoorten\\n- **Fietsen** - Goed onderhouden fietspaden\\n- **Kayakken** - Op de meren binnen het park\\n\\n## Hel Peninsula\\n\\n### Authentiek vissersdorp\\n- **Visserstraditie** - Eeuwenoude visserscultuur\\n- **Verse zeevruchten** - Rechtstreeks van de boot\\n- **Smalle landstrook** - Unieke geografische ligging\\n- **Zeehondenstation** - Opvang voor gewonde zeehonden\\n\\n### Bezienswaardigheden\\n- **Vuurtoren van Hel** - Panoramisch uitzicht\\n- **Visserijmuseum** - Lokale maritieme geschiedenis\\n- **Strand** - Minder druk dan populaire resorts\\n- **Lokale restaurants** - Authentieke visgerechten\\n\\n## Malbork Castle omgeving\\n\\n### Grootste kasteel van Europa\\n- **UNESCO erfgoed** - Middeleeuws kasteel van Teutonic Knights\\n- **Historische stad** - Goed bewaard middeleeuws centrum\\n- **Nogat rivier** - Prachtige wandelingen langs de rivier\\n- **Lokale tradities** - Ambachtelijke werkplaatsen\\n\\n### Nabije attracties\\n- **Kasteel tour** - Uitgebreide rondleiding\\n- **Middeleeuws festival** - Jaarlijks historisch event\\n- **Traditionele werkplaatsen** - Ambachtslieden aan het werk\\n- **Riverboat tours** - Kasteel vanuit het water\\n\\n## ≈Åeba - Meer dan alleen strand\\n\\n### Verborgen schatten\\n- **Butterfly Museum** - Tropische vlinders\\n- **Dinosaur Park** - Leuk voor families\\n- **Lokale markten** - Ambachtelijke producten\\n- **Bewegende duinen** - Natuurfenomeen\\n\\n### Activiteiten\\n- **Paardrijden** - Strand ritten bij zonsondergang\\n- **Zandzeilen** - Unieke sport op het strand\\n- **Lokale festivals** - Zomer evenementen\\n- **Amber zoeken** - Strand schatten jagen\\n\\n## Kaszuby (Kashubian) regio\\n\\n### Unieke cultuur\\n- **Kashubian taal** - Eigen regionale taal\\n- **Traditionele dorpen** - Authentieke architectuur\\n- **Meren** - Kristalhelder water voor zwemmen\\n- **Lokale keuken** - Unieke regionale gerechten\\n\\n### Ervaringen\\n- **Culturele tours** - Leer over Kashubian tradities\\n- **Keramiek workshops** - Traditionele ambachten\\n- **Boottochtjes** - Op de vele meren\\n- **Lokale festivals** - Culturele evenementen\\n\\n## Praktische tips\\n\\n### Beste reistijd\\n- **Zomer (juni-augustus)** - Warmste weer, drukste periode\\n- **Lente (mei)** - Mooie bloei, minder druk\\n- **Herfst (september)** - Nog warm, perfecte wandelweer\\n- **Winter** - Koud maar authentiek, weinig toeristen\\n\\n### Vervoer\\n- **Auto huren** - Meeste flexibiliteit voor verborgen plekken\\n- **Regionale treinen** - Goede verbindingen tussen steden\\n- **Fietsen** - Uitgebreid netwerk van fietspaden\\n- **Lokale bussen** - Goedkoop maar minder frequent\\n\\n### Accommodatie\\n- **Agrotourisme** - Verblijf bij lokale families\\n- **Pensionen** - Persoonlijke service\\n- **Camping** - Dicht bij natuur\\n- **Boutique hotels** - Luxe in kleinere plaatsen\\n\\n### Wat te proeven\\n- **Verse vis** - Haring, zalm, paling\\n- **Kashubian specialiteiten** - Regionale delicatessen\\n- **Lokale bieren** - Kleine brouwerijen\\n- **Amber honing** - Lokale honingsoorten\\n\\n## Geheime plekjes\\n\\n### Alleen locals kennen\\n- **Czo≈Çpino** - Verlaten strand bij de duinen\\n- **S≈Çajszewo** - Verstopt bos pad naar het strand\\n- **Hel tip** - Noordelijkste punt van de peninsula\\n- **Malbork meadows** - Wilde bloemen velden\\n\\n### Fotografie tips\\n- **Gouden uur** - Zonsondergang aan de kust\\n- **Duinen** - Zandpatronen in het licht\\n- **Vissersboten** - Kleurrijke boten in harbors\\n- **Wilde dieren** - Zeearenden in S≈Çowi≈Ñski Park\\n\\n## Duurzaam reizen\\n\\n### Respectvol toerisme\\n- **Bescherm de natuur** - Blijf op gemarkeerde paden\\n- **Lokale economie** - Koop bij lokale winkels\\n- **Minder afval** - Neem herbruikbare flessen mee\\n- **Respecteer wildlife** - Houd afstand van dieren\\n\\n### Lokale initiatieven\\n- **Eco-tours** - Duurzame gidsen\\n- **Biologische restaurants** - Lokale ingredi√´nten\\n- **Natuurbehoud** - Steun lokale projecten\\n- **Cultureel behoud** - Respect voor tradities\\n\\nDeze verborgen parels bieden een authentieke kijkje in de echte Poolse kust, weg van de drukte maar vol met unieke ervaringen en natuurlijke schoonheid.\",\n    \"featured\": false,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  }\n];\n","size_bytes":12856},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  url: string,\n  options?: {\n    method?: string;\n    headers?: Record<string, string>;\n    body?: string;\n  }\n): Promise<Response> {\n  const { method = \"GET\", headers = {}, body } = options || {};\n  \n  const res = await fetch(url, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...headers,\n    },\n    body,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1474},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/admin.tsx":{"content":"import { useState, useEffect, useRef } from \"react\";\nimport * as React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Plus, Edit, Eye, Save, LogIn, LogOut, Shield, Users, UserPlus, Trash2, Key, Upload, X, Image as ImageIcon, RotateCcw, Trash, Copy, Crop as CropIcon, Move, RotateCw, Check, RefreshCw, FolderOpen, ExternalLink, Edit2, Database, Activity, HardDrive, Clock, Server } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { uploadFile, uploadImageToFolder } from \"@/lib/uploadUtils\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport ReactCrop, { Crop, PixelCrop } from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { CreateHighlightDialog, EditHighlightDialog, ViewHighlightDialog, CreateDestinationDialog, CreateGuideDialog, CreateActivityDialog, EditActivityDialog, ViewActivityDialog } from '@/components/highlights-dialogs';\n\nexport default function Admin() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showLogin, setShowLogin] = useState(false);\n  const [loginData, setLoginData] = useState({ username: '', password: '' });\n  const [isSimpleMode, setIsSimpleMode] = useState(false);\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  // Users query voor admin functionaliteit\n  const usersQuery = useQuery({\n    queryKey: ['/api/users'],\n    enabled: isAuthenticated && currentUser?.canManageUsers,\n  });\n  \n  // Content queries\n  const destinationsQuery = useQuery({\n    queryKey: ['/api/admin/destinations'],\n    enabled: isAuthenticated,\n  });\n  \n  const guidesQuery = useQuery({\n    queryKey: ['/api/admin/guides'],\n    enabled: isAuthenticated,\n  });\n\n  // Recycle bin queries\n  const deletedDestinationsQuery = useQuery({\n    queryKey: ['/api/admin/destinations/deleted'],\n    enabled: isAuthenticated && (currentUser?.canDeleteContent || currentUser?.canEditContent),\n  });\n\n  const deletedGuidesQuery = useQuery({\n    queryKey: ['/api/admin/guides/deleted'],\n    enabled: isAuthenticated && (currentUser?.canDeleteContent || currentUser?.canEditContent),\n  });\n\n  // Images trash query\n  const trashedImagesQuery = useQuery({\n    queryKey: ['/api/admin/images/trash'],\n    enabled: isAuthenticated && (currentUser?.canDeleteContent || currentUser?.canEditContent),\n  });\n\n  // Motivation query\n  const motivationQuery = useQuery({\n    queryKey: ['/api/admin/motivation'],\n    enabled: isAuthenticated && currentUser?.canEditContent,\n  });\n\n  // Site settings query\n  const siteSettingsQuery = useQuery({\n    queryKey: ['/api/site-settings'],\n    enabled: isAuthenticated && currentUser?.role === 'admin',\n  });\n\n  // Database monitoring queries (admin only)\n  const databaseStatusQuery = useQuery({\n    queryKey: ['/api/admin/database/status'],\n    enabled: isAuthenticated && currentUser?.role === 'admin',\n    refetchInterval: 30000, // Refresh every 30 seconds\n  });\n\n  const tableStatsQuery = useQuery({\n    queryKey: ['/api/admin/database/tables'],\n    enabled: isAuthenticated && currentUser?.role === 'admin',\n    refetchInterval: 60000, // Refresh every minute\n  });\n\n  // Template queries (admin only)\n  const templatesQuery = useQuery({\n    queryKey: ['/api/admin/templates'],\n    enabled: isAuthenticated && currentUser?.role === 'admin',\n  });\n\n  // Pages queries\n  const pagesQuery = useQuery({\n    queryKey: ['/api/admin/pages'],\n    enabled: isAuthenticated && currentUser?.canCreateContent,\n  });\n\n  // Homepage pages query (filtered pages shown on homepage)\n  const homepagePagesQuery = useQuery({\n    queryKey: ['/api/pages'],\n    enabled: isAuthenticated && currentUser?.canCreateContent,\n  });\n\n  const deletedPagesQuery = useQuery({\n    queryKey: ['/api/admin/pages/deleted'],\n    enabled: isAuthenticated && (currentUser?.canDeleteContent || currentUser?.canEditContent),\n  });\n\n  // Highlights queries\n  const highlightsQuery = useQuery({\n    queryKey: ['/api/admin/highlights'],\n    enabled: isAuthenticated && currentUser?.canCreateContent,\n  });\n\n  const activitiesQuery = useQuery({\n    queryKey: ['/api/admin/activities'],\n    enabled: isAuthenticated,\n  });\n\n  // Search configuration queries\n  const searchConfigsQuery = useQuery({\n    queryKey: ['/api/admin/search-configs'],\n    enabled: isAuthenticated && currentUser?.canEditContent,\n    retry: 1,\n    staleTime: 0,\n    onError: (error) => {\n      toast({ title: \"Fout\", description: \"Kon zoekconfiguratties niet laden\", variant: \"destructive\" });\n    }\n  });\n  const [showCreateUser, setShowCreateUser] = useState(false);\n  const [showChangePassword, setShowChangePassword] = useState(false);\n  const [showEditUser, setShowEditUser] = useState(false);\n  const [showResetPassword, setShowResetPassword] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<any>(null);\n\n\n  \n  // Content editing states\n  const [showCreateDestination, setShowCreateDestination] = useState(false);\n  const [showEditDestination, setShowEditDestination] = useState(false);\n  const [showViewDestination, setShowViewDestination] = useState(false);\n  const [showCreateGuide, setShowCreateGuide] = useState(false);\n  const [showEditGuide, setShowEditGuide] = useState(false);\n  const [showViewGuide, setShowViewGuide] = useState(false);\n  const [selectedDestination, setSelectedDestination] = useState<any>(null);\n  const [selectedGuide, setSelectedGuide] = useState<any>(null);\n  const [editDestinationData, setEditDestinationData] = useState({\n    name: '',\n    location: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: false,\n    showOnHomepage: false,\n    ranking: 0\n  });\n  const [editGuideData, setEditGuideData] = useState({\n    title: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: false,\n    showOnHomepage: false,\n    ranking: 0\n  });\n\n  // Template management state\n  const [showCreateTemplate, setShowCreateTemplate] = useState(false);\n  const [showEditTemplate, setShowEditTemplate] = useState(false);\n  const [showViewTemplate, setShowViewTemplate] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<any>(null);\n  const [editTemplateData, setEditTemplateData] = useState<any>({});\n\n  // Page management state\n  const [showCreatePage, setShowCreatePage] = useState(false);\n  const [showEditPage, setShowEditPage] = useState(false);\n  const [showViewPage, setShowViewPage] = useState(false);\n  const [selectedPage, setSelectedPage] = useState<any>(null);\n  const [editPageData, setEditPageData] = useState<any>({});\n\n  // Highlights management state\n  const [showCreateHighlight, setShowCreateHighlight] = useState(false);\n  const [showEditHighlight, setShowEditHighlight] = useState(false);\n  const [showViewHighlight, setShowViewHighlight] = useState(false);\n  const [selectedHighlight, setSelectedHighlight] = useState<any>(null);\n  const [editHighlightData, setEditHighlightData] = useState({\n    name: '',\n    iconPath: '',\n    category: 'general',\n    ranking: 0,\n    active: true,\n    showOnHomepage: true\n  });\n\n  // Activities management state\n  const [showCreateActivity, setShowCreateActivity] = useState(false);\n  const [showEditActivity, setShowEditActivity] = useState(false);\n  const [showViewActivity, setShowViewActivity] = useState(false);\n  const [selectedActivity, setSelectedActivity] = useState<any>(null);\n  const [newActivity, setNewActivity] = useState({\n    name: '',\n    location: '',\n    category: '',\n    activityType: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: true,\n    ranking: 0\n  });\n  const [createActivityData, setCreateActivityData] = useState({\n    name: '',\n    location: '',\n    category: '',\n    activityType: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: false,\n    ranking: 0\n  });\n\n  const [editActivityData, setEditActivityData] = useState({\n    name: '',\n    location: '',\n    category: '',\n    activityType: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: false,\n    ranking: 0\n  });\n\n  // Search configuration management state  \n  const [showEditSearchConfig, setShowEditSearchConfig] = useState(false);\n  const [showViewSearchConfig, setShowViewSearchConfig] = useState(false);\n  const [selectedSearchConfig, setSelectedSearchConfig] = useState<any>(null);\n  const [searchConfigData, setSearchConfigData] = useState({\n    context: '',\n    placeholderText: '',\n    searchScope: 'destinations',\n    enableLocationFilter: false,\n    enableCategoryFilter: false,\n    enableHighlights: false,\n    enableGuides: false,\n    customInstructions: '',\n    redirectPattern: '',\n    isActive: true\n  });\n\n  const { toast } = useToast();\n\n  // Image upload helpers\n  const handleImageUpload = async (file: File): Promise<string> => {\n    try {\n      const result = await uploadFile({ file, type: 'image' });\n      \n      // Refresh queries when upload succeeds\n      trashedImagesQuery.refetch();\n      destinationsQuery.refetch();\n      guidesQuery.refetch();\n      \n      return result.imagePath || '';\n    } catch (error) {\n      throw error; // Error handling is done in uploadFile utility\n    }\n  };\n\n  // Motivation editing state\n  const [motivationData, setMotivationData] = useState({\n    title: '',\n    description: '',\n    buttonText: '',\n    buttonAction: '',\n    image: '',\n    isPublished: true\n  });\n\n  const [newDestination, setNewDestination] = useState({\n    name: '',\n    location: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: false,\n    ranking: 0\n  });\n\n  // Location filter state\n  const [locationFilter, setLocationFilter] = useState<string>('all');\n  const [guideFilter, setGuideFilter] = useState<string>('all');\n  const [activityLocationFilter, setActivityLocationFilter] = useState<string>('all');\n  const [activityCategoryFilter, setActivityCategoryFilter] = useState<string>('all');\n\n  // Get unique locations from destinations for filter\n  const getUniqueLocations = () => {\n    if (!destinationsQuery.data) return [];\n    const locations = destinationsQuery.data\n      .map((dest: any) => dest.location)\n      .filter((location: string) => location && location.trim() !== '')\n      .filter((location: string, index: number, arr: string[]) => arr.indexOf(location) === index)\n      .sort();\n    return locations;\n  };\n\n  // Get unique titles from guides for filter (first word)\n  const getUniqueGuideCategories = () => {\n    if (!guidesQuery.data) return [];\n    const categories = guidesQuery.data\n      .map((guide: any) => {\n        const firstWord = guide.title.split(' ')[0];\n        return firstWord || 'Overig';\n      })\n      .filter((category: string, index: number, arr: string[]) => arr.indexOf(category) === index)\n      .sort();\n    return categories;\n  };\n\n  // Filter destinations by location\n  const getFilteredDestinations = () => {\n    if (!destinationsQuery.data) return [];\n    if (locationFilter === 'all') return destinationsQuery.data;\n    return destinationsQuery.data.filter((dest: any) => dest.location === locationFilter);\n  };\n\n  // Filter guides by category\n  const getFilteredGuides = () => {\n    if (!guidesQuery.data) return [];\n    if (guideFilter === 'all') return guidesQuery.data;\n    return guidesQuery.data.filter((guide: any) => {\n      const firstWord = guide.title.split(' ')[0] || 'Overig';\n      return firstWord === guideFilter;\n    });\n  };\n\n  // Get unique locations from activities for filter\n  const getUniqueActivityLocations = () => {\n    if (!activitiesQuery.data) return [];\n    const locations = activitiesQuery.data\n      .map((activity: any) => activity.location)\n      .filter((location: string) => location && location.trim() !== '')\n      .filter((location: string, index: number, arr: string[]) => arr.indexOf(location) === index)\n      .sort();\n    return locations;\n  };\n\n  // Get unique categories from activities for filter\n  const getUniqueActivityCategories = () => {\n    if (!activitiesQuery.data) return [];\n    const categories = activitiesQuery.data\n      .map((activity: any) => activity.category)\n      .filter((category: string) => category && category.trim() !== '')\n      .filter((category: string, index: number, arr: string[]) => arr.indexOf(category) === index)\n      .sort();\n    return categories;\n  };\n\n  // Filter activities by location\n  const getFilteredActivities = () => {\n    if (!activitiesQuery.data) return [];\n    let filtered = activitiesQuery.data;\n    \n    if (activityLocationFilter !== 'all') {\n      filtered = filtered.filter((activity: any) => activity.location === activityLocationFilter);\n    }\n    \n    if (activityCategoryFilter !== 'all') {\n      filtered = filtered.filter((activity: any) => activity.category === activityCategoryFilter);\n    }\n    \n    return filtered;\n  };\n\n\n\n  // Site settings state\n  const [siteSettings, setSiteSettings] = useState({\n    siteName: '',\n    siteDescription: '',\n    metaKeywords: '',\n    favicon: '',\n    faviconEnabled: true,\n    backgroundImage: '',\n    backgroundImageAlt: '',\n    logoImage: '',\n    logoImageAlt: '',\n    socialMediaImage: '',\n    headerOverlayEnabled: false,\n    headerOverlayOpacity: 30,\n    customCSS: '',\n    customJS: '',\n    googleAnalyticsId: '',\n    showDestinations: true,\n    showMotivation: true,\n    showHighlights: true,\n    showOntdekMeer: true,\n    showGuides: true,\n  });\n\n  // Check authentication status on component mount\n  useEffect(() => {\n    checkAuthStatus();\n  }, []);\n\n  useEffect(() => {\n    if (isAuthenticated && currentUser?.canManageUsers) {\n      loadUsers();\n    }\n  }, [isAuthenticated, currentUser]);\n\n  // Load site settings when query data changes\n  useEffect(() => {\n    if (siteSettingsQuery.data) {\n      console.log('Loading site settings from query:', siteSettingsQuery.data);\n      const newSettings = {\n        siteName: siteSettingsQuery.data.siteName || '',\n        siteDescription: siteSettingsQuery.data.siteDescription || '',\n        metaKeywords: siteSettingsQuery.data.metaKeywords || '',\n        favicon: siteSettingsQuery.data.favicon || '',\n        faviconEnabled: siteSettingsQuery.data.faviconEnabled ?? true,\n        backgroundImage: siteSettingsQuery.data.backgroundImage || '',\n        backgroundImageAlt: siteSettingsQuery.data.backgroundImageAlt || '',\n        logoImage: siteSettingsQuery.data.logoImage || '',\n        logoImageAlt: siteSettingsQuery.data.logoImageAlt || '',\n        socialMediaImage: siteSettingsQuery.data.socialMediaImage || '',\n        headerOverlayEnabled: siteSettingsQuery.data.headerOverlayEnabled || false,\n        headerOverlayOpacity: siteSettingsQuery.data.headerOverlayOpacity || 30,\n        customCSS: siteSettingsQuery.data.customCSS || '',\n        customJS: siteSettingsQuery.data.customJS || '',\n        googleAnalyticsId: siteSettingsQuery.data.googleAnalyticsId || '',\n        showDestinations: siteSettingsQuery.data.showDestinations ?? true,\n        showMotivation: siteSettingsQuery.data.showMotivation ?? true,\n        showHighlights: siteSettingsQuery.data.showHighlights ?? true,\n        showOntdekMeer: siteSettingsQuery.data.showOntdekMeer ?? true,\n        showGuides: siteSettingsQuery.data.showGuides ?? true,\n      };\n      console.log('Setting new site settings state:', newSettings);\n      setSiteSettings(newSettings);\n    }\n  }, [siteSettingsQuery.data]);\n\n  // Load motivation data when query updates\n  useEffect(() => {\n    if (motivationQuery.data) {\n      setMotivationData({\n        title: motivationQuery.data.title || '',\n        description: motivationQuery.data.description || '',\n        buttonText: motivationQuery.data.button_text || '',\n        buttonAction: motivationQuery.data.button_action || '',\n        image: motivationQuery.data.image || '',\n        isPublished: motivationQuery.data.is_published ?? true\n      });\n    }\n  }, [motivationQuery.data]);\n\n  const checkAuthStatus = async () => {\n    try {\n      const response = await fetch('/api/auth/status');\n      if (response.ok) {\n        const data = await response.json();\n        setIsAuthenticated(data.isAuthenticated);\n        if (data.user) {\n          setCurrentUser(data.user);\n        }\n      } else {\n        // If API fails, enable simple mode (no database)\n        setIsSimpleMode(true);\n        setIsAuthenticated(true);\n      }\n    } catch (error) {\n      // If API fails, enable simple mode (no database)\n      setIsSimpleMode(true);\n      setIsAuthenticated(true);\n      toast({\n        title: \"Eenvoudige modus\",\n        description: \"Database niet beschikbaar. Lokale modus actief.\",\n        variant: \"default\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadUsers = async () => {\n    try {\n      const response = await fetch('/api/users');\n      if (response.ok) {\n        const userData = await response.json();\n        setUsers(userData);\n      }\n    } catch (error) {\n      console.error('Error loading users:', error);\n    }\n  };\n\n  const handleDeleteUser = async (userId: number) => {\n    if (!confirm('Weet je zeker dat je deze gebruiker wilt verwijderen?')) return;\n    \n    try {\n      const response = await fetch(`/api/users/${userId}`, {\n        method: 'DELETE'\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Gebruiker verwijderd\", description: \"De gebruiker is succesvol verwijderd.\" });\n        loadUsers();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  // Handlers voor recycle bin acties\n  const handleRestoreDestination = async (id: number) => {\n    try {\n      const response = await fetch(`/api/destinations/${id}/restore`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Bestemming hersteld\" });\n        deletedDestinationsQuery.refetch();\n        destinationsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handlePermanentDeleteDestination = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze bestemming permanent wilt verwijderen? Dit kan niet ongedaan worden gemaakt.')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/destinations/${id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Bestemming permanent verwijderd\" });\n        deletedDestinationsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleRestoreGuide = async (id: number) => {\n    try {\n      const response = await fetch(`/api/guides/${id}/restore`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Reisgids hersteld\" });\n        deletedGuidesQuery.refetch();\n        guidesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handlePermanentDeleteGuide = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze reisgids permanent wilt verwijderen? Dit kan niet ongedaan worden gemaakt.')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/guides/${id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Reisgids permanent verwijderd\" });\n        deletedGuidesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  // Image trash handlers\n  const handleRestoreImage = async (trashName: string, originalName: string) => {\n    try {\n      const response = await fetch('/api/admin/images/restore', {\n        method: 'POST',\n        body: JSON.stringify({ trashName, originalName }),\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Afbeelding succesvol hersteld\" });\n        trashedImagesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handlePermanentDeleteImage = async (trashName: string) => {\n    if (!confirm('Weet je zeker dat je deze afbeelding permanent wilt verwijderen? Dit kan niet ongedaan worden gemaakt.')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/admin/images/trash/${trashName}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Afbeelding permanent verwijderd\" });\n        trashedImagesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleEmptyImageTrash = async () => {\n    if (!trashedImagesQuery.data || trashedImagesQuery.data.length === 0) return;\n    \n    const confirmDelete = confirm(`Weet je zeker dat je alle ${trashedImagesQuery.data.length} afbeeldingen permanent wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`);\n    if (!confirmDelete) return;\n    \n    try {\n      for (const image of trashedImagesQuery.data) {\n        await fetch(`/api/admin/images/trash/${image.trashName}`, {\n          method: 'DELETE',\n          credentials: 'include',\n        });\n      }\n      \n      toast({ title: \"Succes\", description: \"Alle afbeeldingen permanent verwijderd\" });\n      trashedImagesQuery.refetch();\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  // Soft delete handlers\n  const handleSoftDeleteDestination = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze bestemming naar de prullenbak wilt verplaatsen?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/destinations/${id}/soft-delete`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Bestemming naar prullenbak verplaatst\" });\n        destinationsQuery.refetch();\n        deletedDestinationsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleSoftDeleteGuide = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze reisgids naar de prullenbak wilt verplaatsen?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/guides/${id}/soft-delete`, {\n        method: 'PATCH',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Reisgids naar prullenbak verplaatst\" });\n        guidesQuery.refetch();\n        deletedGuidesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  // Highlights handlers\n  const handleDeleteHighlight = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze highlight wilt verwijderen?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/admin/highlights/${id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Highlight verwijderd\" });\n        highlightsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  // Search configuration handlers\n  const handleDeleteSearchConfig = async (id: number) => {\n    if (!confirm('Weet je zeker dat je deze zoek configuratie wilt verwijderen?')) {\n      return;\n    }\n    \n    try {\n      const response = await fetch(`/api/admin/search-configs/${id}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Zoek configuratie verwijderd\" });\n        searchConfigsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n\n\n  const handleUpdateSearchConfig = async (id: number, data: any) => {\n    try {\n      const response = await fetch(`/api/admin/search-configs/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(data),\n      });\n      \n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Zoek configuratie bijgewerkt\" });\n        searchConfigsQuery.refetch();\n        setShowEditSearchConfig(false);\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleToggleHighlightHomepage = async (id: number, showOnHomepage: boolean) => {\n    try {\n      const response = await fetch(`/api/admin/highlights/${id}/homepage`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ showOnHomepage }),\n      });\n      \n      if (response.ok) {\n        toast({ \n          title: \"Succes\", \n          description: showOnHomepage ? \"Highlight toegevoegd aan homepage\" : \"Highlight verwijderd van homepage\" \n        });\n        highlightsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleTogglePageHomepage = async (id: number, published: boolean) => {\n    try {\n      const response = await fetch(`/api/admin/pages/${id}/homepage`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ published }),\n      });\n      \n      if (response.ok) {\n        toast({ \n          title: \"Succes\", \n          description: published ? \"Pagina toegevoegd aan homepage\" : \"Pagina verwijderd van homepage\" \n        });\n        homepagePagesQuery.refetch();\n        pagesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleToggleDestinationHomepage = async (id: number, showOnHomepage: boolean) => {\n    try {\n      const response = await fetch(`/api/admin/destinations/${id}/homepage`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ showOnHomepage }),\n      });\n      \n      if (response.ok) {\n        toast({ \n          title: \"Succes\", \n          description: showOnHomepage ? \"Bestemming toegevoegd aan homepage\" : \"Bestemming verwijderd van homepage\" \n        });\n        destinationsQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleToggleGuideHomepage = async (id: number, showOnHomepage: boolean) => {\n    try {\n      const response = await fetch(`/api/admin/guides/${id}/homepage`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ showOnHomepage }),\n      });\n      \n      if (response.ok) {\n        toast({ \n          title: \"Succes\", \n          description: showOnHomepage ? \"Reisgids toegevoegd aan homepage\" : \"Reisgids verwijderd van homepage\" \n        });\n        guidesQuery.refetch();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  const handleLogin = async () => {\n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        body: JSON.stringify(loginData),\n        headers: { 'Content-Type': 'application/json' }\n      });\n\n      if (response.ok) {\n        setIsAuthenticated(true);\n        setShowLogin(false);\n        toast({\n          title: \"Ingelogd\",\n          description: \"Welkom in het admin panel!\",\n        });\n      } else {\n        toast({\n          title: \"Login gefaald\",\n          description: \"Ongeldige gebruikersnaam of wachtwoord\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Login fout\",\n        description: \"Er is een fout opgetreden\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await fetch('/api/logout', { method: 'POST' });\n      setIsAuthenticated(false);\n      toast({\n        title: \"Uitgelogd\",\n        description: \"Je bent succesvol uitgelogd\",\n      });\n    } catch (error) {\n      // Fallback for simple mode\n      setIsAuthenticated(false);\n    }\n  };\n\n  const handleCreateDestination = async () => {\n    // Validate required fields\n    if (!newDestination.name.trim()) {\n      toast({\n        title: \"Validatie fout\",\n        description: \"Naam is verplicht\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!newDestination.description.trim()) {\n      toast({\n        title: \"Validatie fout\", \n        description: \"Beschrijving is verplicht\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!newDestination.image.trim()) {\n      toast({\n        title: \"Validatie fout\",\n        description: \"Afbeelding is verplicht\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!newDestination.alt.trim()) {\n      toast({\n        title: \"Validatie fout\",\n        description: \"Alt-tekst is verplicht\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    if (!newDestination.content.trim()) {\n      toast({\n        title: \"Validatie fout\",\n        description: \"Content is verplicht\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      console.log('Creating destination:', newDestination);\n      \n      const response = await fetch('/api/destinations', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(newDestination),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || 'Fout bij aanmaken bestemming');\n      }\n\n      const result = await response.json();\n      \n      toast({\n        title: \"Succes\",\n        description: `Bestemming \"${newDestination.name}\" is succesvol aangemaakt!`,\n      });\n      \n      // Reset form\n      setNewDestination({\n        name: '',\n        location: '',\n        description: '',\n        image: '',\n        alt: '',\n        content: '',\n        link: '',\n        featured: false,\n        published: false,\n        ranking: 0\n      });\n\n      // Refresh data\n      destinationsQuery.refetch();\n      \n    } catch (error) {\n      console.error('Error creating destination:', error);\n      toast({\n        title: \"Fout\",\n        description: error instanceof Error ? error.message : \"Er is een fout opgetreden bij het aanmaken van de bestemming\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleUpdateMotivation = async () => {\n    try {\n      const response = await apiRequest(`/api/admin/motivation/1`, {\n        method: 'PUT',\n        body: JSON.stringify(motivationData),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (response) {\n        toast({ title: \"Succes\", description: \"Motivatie sectie bijgewerkt\" });\n        motivationQuery.refetch();\n        // Invalidate homepage motivation cache\n        queryClient.invalidateQueries({ queryKey: [\"/api/motivation\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/motivation/image-location\"] });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Kon motivatie sectie niet bijwerken\", variant: \"destructive\" });\n    }\n  };\n\n  const handleSaveSiteSettings = async () => {\n    try {\n      console.log('Saving site settings:', siteSettings);\n      \n      const response = await apiRequest('/api/admin/site-settings', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(siteSettings),\n      });\n\n      const result = await response.json();\n      console.log('Site settings saved successfully:', result);\n\n      // Update local state immediately with saved values\n      const updatedSettings = {\n        siteName: result.siteName || '',\n        siteDescription: result.siteDescription || '',\n        metaKeywords: result.metaKeywords || '',\n        favicon: result.favicon || '',\n        faviconEnabled: result.faviconEnabled ?? true,\n        backgroundImage: result.backgroundImage || '',\n        backgroundImageAlt: result.backgroundImageAlt || '',\n        logoImage: result.logoImage || '',\n        logoImageAlt: result.logoImageAlt || '',\n        socialMediaImage: result.socialMediaImage || '',\n        customCSS: result.customCSS || '',\n        customJS: result.customJS || '',\n        googleAnalyticsId: result.googleAnalyticsId || '',\n      };\n      console.log('Updating local state with:', updatedSettings);\n      setSiteSettings(updatedSettings);\n\n      toast({\n        title: \"Succes\",\n        description: \"Site-instellingen zijn opgeslagen!\",\n      });\n\n      // Refresh site settings query and invalidate cache\n      queryClient.invalidateQueries({ queryKey: ['/api/site-settings'] });\n      await siteSettingsQuery.refetch();\n      \n    } catch (error) {\n      console.error('Error saving site settings:', error);\n      toast({\n        title: \"Fout\",\n        description: error instanceof Error ? error.message : \"Er is een fout opgetreden bij het opslaan\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading admin panel...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Login screen\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"h-5 w-5\" />\n              Admin Login\n            </CardTitle>\n            <CardDescription>\n              Log in om toegang te krijgen tot het CMS\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Gebruikersnaam</Label>\n              <Input\n                id=\"username\"\n                type=\"text\"\n                value={loginData.username}\n                onChange={(e) => setLoginData({...loginData, username: e.target.value})}\n                placeholder=\"Voer gebruikersnaam in\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Wachtwoord</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                value={loginData.password}\n                onChange={(e) => setLoginData({...loginData, password: e.target.value})}\n                placeholder=\"Voer wachtwoord in\"\n              />\n            </div>\n            <Button \n              onClick={handleLogin} \n              className=\"w-full\"\n              disabled={!loginData.username || !loginData.password}\n            >\n              <LogIn className=\"h-4 w-4 mr-2\" />\n              Inloggen\n            </Button>\n            \n            {!isSimpleMode && (\n              <div className=\"text-center\">\n                <Button \n                  variant=\"link\" \n                  onClick={() => {setIsSimpleMode(true); setIsAuthenticated(true);}}\n                  className=\"text-sm text-gray-500\"\n                >\n                  Doorgaan zonder database (lokale modus)\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-6xl mx-auto\">\n        <div className=\"mb-8 flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">CMS Admin Panel</h1>\n            <div className=\"text-gray-600\">\n              Hoi {currentUser?.username}, beheer je content voor Ontdek Polen\n              {isSimpleMode && <Badge variant=\"secondary\" className=\"ml-2\">Lokale Modus</Badge>}\n            </div>\n          </div>\n          <Button onClick={handleLogout} variant=\"outline\">\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            Uitloggen\n          </Button>\n        </div>\n\n        <Tabs defaultValue=\"destinations\" className=\"w-full\">\n          <TabsList className=\"h-auto w-full flex-wrap justify-start gap-2 p-2 bg-muted/30\">\n            {/* Eerste regel: Administrator groep - alleen voor admin */}\n            {currentUser?.role === 'admin' && (\n              <>\n                <div className=\"w-full text-xs font-semibold text-gray-500 px-2 py-1\">\n                  Administrator\n                </div>\n                <TabsTrigger value=\"site-settings\" className=\"flex items-center gap-2\">\n                  <Shield className=\"h-4 w-4\" />\n                  Site Instellingen\n                </TabsTrigger>\n                <TabsTrigger value=\"homepage-overview\" className=\"flex items-center gap-2\">\n                  üè† Homepage Overview\n                </TabsTrigger>\n                <TabsTrigger value=\"templates\" className=\"flex items-center gap-2\">\n                  üé® Templates\n                </TabsTrigger>\n                <TabsTrigger value=\"ontdek-meer\" className=\"flex items-center gap-2\">\n                  üìÑ Ontdek Meer\n                </TabsTrigger>\n                <TabsTrigger value=\"search-configs\" className=\"flex items-center gap-2\">\n                  üîç Zoekbalk CMS\n                </TabsTrigger>\n                <TabsTrigger value=\"recycle\" className=\"flex items-center gap-2\">\n                  <Trash2 className=\"h-4 w-4\" />\n                  Prullenbak\n                </TabsTrigger>\n                <TabsTrigger value=\"users\" className=\"flex items-center gap-2\">\n                  <Users className=\"h-4 w-4\" />\n                  Gebruikers\n                </TabsTrigger>\n                <TabsTrigger value=\"database\" className=\"flex items-center gap-2\">\n                  <Database className=\"h-4 w-4\" />\n                  Database Status\n                </TabsTrigger>\n              </>\n            )}\n\n            {/* Tweede regel: Website Onderdelen groep */}\n            <div className=\"w-full\" />\n            <div className=\"w-full text-xs font-semibold text-gray-500 px-2 py-1\">\n              Website Onderdelen\n            </div>\n            \n            {/* Pagina Management Subgroep */}\n            {currentUser?.canCreateContent && (\n              <div className=\"w-full pl-4 text-xs font-medium text-gray-400 px-2 py-1\">\n                Pagina Management\n              </div>\n            )}\n            {currentUser?.canCreateContent && (\n              <>\n                <TabsTrigger value=\"pages\" className=\"flex items-center gap-2 ml-2\">\n                  üìÑ Pagina's\n                </TabsTrigger>\n                <TabsTrigger value=\"motivatie\" className=\"flex items-center gap-2 ml-2\">\n                  üí´ Motivatie\n                </TabsTrigger>\n              </>\n            )}\n            \n            {/* Content Types Subgroep */}\n            {currentUser?.canCreateContent && (\n              <div className=\"w-full pl-4 text-xs font-medium text-gray-400 px-2 py-1\">\n                Content Types\n              </div>\n            )}\n            {currentUser?.canCreateContent && (\n              <>\n                <TabsTrigger value=\"destinations\" className=\"flex items-center gap-2 ml-2\">\n                  üèîÔ∏è Bestemmingen\n                </TabsTrigger>\n                <TabsTrigger value=\"activities\" className=\"flex items-center gap-2 ml-2\">\n                  üéØ Activiteiten\n                </TabsTrigger>\n                <TabsTrigger value=\"guides\" className=\"flex items-center gap-2 ml-2\">\n                  üìñ Reizen\n                </TabsTrigger>\n                <TabsTrigger value=\"featured\" className=\"flex items-center gap-2 ml-2\">\n                  ‚≠ê Featured\n                </TabsTrigger>\n              </>\n            )}\n            \n            {/* Derde regel: Account */}\n            <div className=\"w-full\" />\n            <TabsTrigger value=\"account\" className=\"flex items-center gap-2\">\n              üë§ Account\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Content Manager - Unified CMS for Bestemmingen + Ontdek Meer */}\n          {false && currentUser?.canCreateContent && (\n            <TabsContent value=\"content-manager\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Unified Content Manager</h2>\n                  <p className=\"text-gray-600\">Beheer bestemmingen en ontdek meer content in √©√©n interface</p>\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button onClick={() => setShowCreateDestination(true)} className=\"bg-blue-600 hover:bg-blue-700\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Nieuwe Bestemming\n                  </Button>\n                  <Button onClick={() => setShowCreatePage(true)} className=\"bg-green-600 hover:bg-green-700\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Nieuwe Pagina\n                  </Button>\n                </div>\n              </div>\n\n              {/* Content Type Tabs */}\n              <Tabs defaultValue=\"all-content\" className=\"w-full\">\n                <TabsList className=\"w-full justify-start\">\n                  <TabsTrigger value=\"all-content\" className=\"flex items-center gap-2\">\n                    üìã Alle Content\n                  </TabsTrigger>\n                  <TabsTrigger value=\"pages-only\" className=\"flex items-center gap-2\">\n                    üìÑ Ontdek Meer ({pagesQuery.data?.length || 0})\n                  </TabsTrigger>\n                  <TabsTrigger value=\"homepage-content\" className=\"flex items-center gap-2\">\n                    üè† Homepage Content\n                  </TabsTrigger>\n                </TabsList>\n\n                {/* All Content View - Unified Table */}\n                <TabsContent value=\"all-content\" className=\"space-y-4\">\n                  <div className=\"rounded-lg border bg-white\">\n                    <div className=\"p-4 border-b bg-gray-50\">\n                      <div className=\"flex justify-between items-center\">\n                        <div>\n                          <h3 className=\"font-semibold\">Alle Content Items</h3>\n                          <p className=\"text-sm text-gray-600\">Bestemmingen en Ontdek Meer pagina's in √©√©n overzicht</p>\n                        </div>\n                        <Select value={locationFilter} onValueChange={setLocationFilter}>\n                          <SelectTrigger className=\"w-48\">\n                            <SelectValue placeholder=\"Filter op locatie\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"all\">Alle locaties</SelectItem>\n                            {getUniqueLocations().map((location) => (\n                              <SelectItem key={location} value={location}>\n                                üìç {location}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead className=\"bg-gray-50 border-b\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Type</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Titel</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Homepage</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Ranking</th>\n                            <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Acties</th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-gray-200\">\n                          {/* Destinations */}\n                          {getFilteredDestinations().map((destination: any) => (\n                            <tr key={`dest-${destination.id}`} className=\"hover:bg-gray-50\">\n                              <td className=\"px-4 py-3\">\n                                <Badge className=\"bg-blue-100 text-blue-800\">üèîÔ∏è Bestemming</Badge>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div>\n                                  <div className=\"font-medium\">{destination.name}</div>\n                                  {destination.location && (\n                                    <div className=\"text-xs text-blue-600 mb-1\">üìç {destination.location}</div>\n                                  )}\n                                  <div className=\"text-sm text-gray-500\">{destination.description?.substring(0, 80)}...</div>\n                                </div>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div className=\"flex flex-col gap-1\">\n                                  <Badge variant={destination.published ? \"default\" : \"outline\"} className=\"text-xs w-fit\">\n                                    {destination.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                                  </Badge>\n                                  {destination.featured && <Badge variant=\"secondary\" className=\"text-xs w-fit\">‚≠ê Featured</Badge>}\n                                </div>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <Button \n                                  size=\"sm\"\n                                  variant={destination.showOnHomepage ? \"default\" : \"outline\"}\n                                  onClick={() => handleToggleDestinationHomepage(destination.id, !destination.showOnHomepage)}\n                                  className=\"text-xs\"\n                                >\n                                  {destination.showOnHomepage ? \"üè† Op Homepage\" : \"‚ûï Naar Homepage\"}\n                                </Button>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <Badge variant=\"outline\" className=\"text-xs\">#{destination.ranking || 0}</Badge>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div className=\"flex gap-1\">\n                                  <Button \n                                    size=\"sm\" \n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      setSelectedDestination(destination);\n                                      setEditDestinationData({\n                                        name: destination.name,\n                                        location: destination.location || '',\n                                        description: destination.description,\n                                        image: destination.image,\n                                        alt: destination.alt || '',\n                                        content: destination.content || '',\n                                        link: destination.link || '',\n                                        featured: destination.featured,\n                                        published: destination.published,\n                                        showOnHomepage: destination.showOnHomepage || false,\n                                        ranking: destination.ranking || 0\n                                      });\n                                      setShowEditDestination(true);\n                                    }}\n                                  >\n                                    <Edit className=\"h-3 w-3\" />\n                                  </Button>\n                                  {currentUser?.canDeleteContent && (\n                                    <Button \n                                      size=\"sm\" \n                                      variant=\"outline\"\n                                      onClick={() => handleSoftDeleteDestination(destination.id)}\n                                    >\n                                      <Trash2 className=\"h-3 w-3\" />\n                                    </Button>\n                                  )}\n                                </div>\n                              </td>\n                            </tr>\n                          ))}\n                          \n                          {/* Pages */}\n                          {(pagesQuery.data || []).map((page: any) => (\n                            <tr key={`page-${page.id}`} className=\"hover:bg-gray-50\">\n                              <td className=\"px-4 py-3\">\n                                <Badge className=\"bg-green-100 text-green-800\">üìÑ Ontdek Meer</Badge>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div>\n                                  <div className=\"font-medium\">{page.title}</div>\n                                  <div className=\"text-sm text-gray-500\">{page.metaDescription?.substring(0, 80)}...</div>\n                                </div>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div className=\"flex flex-col gap-1\">\n                                  <Badge variant={page.published ? \"default\" : \"outline\"} className=\"text-xs w-fit\">\n                                    {page.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                                  </Badge>\n                                  {page.featured && <Badge variant=\"secondary\" className=\"text-xs w-fit\">‚≠ê Featured</Badge>}\n                                  <Badge variant=\"outline\" className=\"text-xs w-fit bg-gray-100\">{page.template}</Badge>\n                                </div>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <Button \n                                  size=\"sm\"\n                                  variant={page.published ? \"default\" : \"outline\"}\n                                  onClick={() => handleTogglePageHomepage(page.id, !page.published)}\n                                  className=\"text-xs\"\n                                >\n                                  {page.published ? \"üè† Op Homepage\" : \"‚ûï Naar Homepage\"}\n                                </Button>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <Badge variant=\"outline\" className=\"text-xs\">#{page.ranking || 0}</Badge>\n                              </td>\n                              <td className=\"px-4 py-3\">\n                                <div className=\"flex gap-1\">\n                                  <Button \n                                    size=\"sm\" \n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      setSelectedPage(page);\n                                      setEditPageData({\n                                        title: page.title,\n                                        slug: page.slug,\n                                        content: page.content,\n                                        metaTitle: page.metaTitle || '',\n                                        metaDescription: page.metaDescription || '',\n                                        metaKeywords: page.metaKeywords || '',\n                                        template: page.template,\n                                        headerImage: page.headerImage || '',\n                                        headerImageAlt: page.headerImageAlt || '',\n                                        highlightSections: page.highlightSections || '',\n                                        published: page.published,\n                                        featured: page.featured,\n                                        ranking: page.ranking || 0\n                                      });\n                                      setShowEditPage(true);\n                                    }}\n                                  >\n                                    <Edit className=\"h-3 w-3\" />\n                                  </Button>\n                                  {currentUser?.canDeleteContent && (\n                                    <Button \n                                      size=\"sm\" \n                                      variant=\"outline\"\n                                      onClick={() => handleSoftDeletePage(page.id)}\n                                    >\n                                      <Trash2 className=\"h-3 w-3\" />\n                                    </Button>\n                                  )}\n                                </div>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </TabsContent>\n\n\n\n                {/* Pages Only View */}\n                <TabsContent value=\"pages-only\" className=\"space-y-4\">\n                  <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                    {(pagesQuery.data || []).map((page: any) => (\n                      <Card key={page.id} className=\"hover:shadow-lg transition-shadow\">\n                        <CardHeader className=\"pb-3\">\n                          <div className=\"flex flex-col gap-3\">\n                            <div className=\"flex justify-between items-start\">\n                              <CardTitle className=\"text-lg leading-tight\">{page.title}</CardTitle>\n                              <Badge variant=\"outline\" className=\"text-xs\">#{page.ranking || 0}</Badge>\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {page.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                              <Badge variant={page.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                                {page.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                              </Badge>\n                              {page.published && <Badge variant=\"default\" className=\"text-xs bg-green-600 hover:bg-green-700\">üè† Homepage</Badge>}\n                            </div>\n                            <div className=\"flex items-center text-xs text-gray-500 gap-2\">\n                              <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded\">\n                                {page.template}\n                              </span>\n                              <span>\n                                {new Date(page.createdAt).toLocaleDateString('nl-NL')}\n                              </span>\n                            </div>\n                            <CardDescription className=\"text-sm line-clamp-2\">{page.metaDescription}</CardDescription>\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"pt-0\">\n                          <div className=\"flex flex-col gap-3\">\n                            <Button \n                              size=\"sm\" \n                              variant={page.published ? \"default\" : \"outline\"}\n                              onClick={() => handleTogglePageHomepage(page.id, !page.published)}\n                              className=\"w-full\"\n                            >\n                              {page.published ? \"üè† Op Homepage\" : \"‚ûï Naar Homepage\"}\n                            </Button>\n                            \n                            <div className=\"flex flex-wrap gap-2\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedPage(page);\n                                  setEditPageData({\n                                    title: page.title,\n                                    slug: page.slug,\n                                    content: page.content,\n                                    metaTitle: page.metaTitle || '',\n                                    metaDescription: page.metaDescription || '',\n                                    metaKeywords: page.metaKeywords || '',\n                                    template: page.template,\n                                    headerImage: page.headerImage || '',\n                                    headerImageAlt: page.headerImageAlt || '',\n                                    highlightSections: page.highlightSections || '',\n                                    published: page.published,\n                                    featured: page.featured,\n                                    ranking: page.ranking || 0\n                                  });\n                                  setShowEditPage(true);\n                                }}\n                              >\n                                <Edit className=\"h-4 w-4 mr-2\" />\n                                Bewerken\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedPage(page);\n                                  setShowViewPage(true);\n                                }}\n                              >\n                                <Eye className=\"h-4 w-4 mr-2\" />\n                                Bekijken\n                              </Button>\n                              {page.published && (\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline\"\n                                  onClick={() => window.open(`/${page.slug}`, '_blank')}\n                                >\n                                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                                  Live\n                                </Button>\n                              )}\n                              {currentUser?.canDeleteContent && (\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline\"\n                                  onClick={() => handleSoftDeletePage(page.id)}\n                                >\n                                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                                  üóëÔ∏è Naar Prullenbak\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </TabsContent>\n\n                {/* Homepage Content View */}\n                <TabsContent value=\"homepage-content\" className=\"space-y-4\">\n                  <div className=\"grid gap-4\">\n                    {/* Homepage Bestemmingen */}\n                    <div className=\"bg-blue-50 rounded-lg p-4\">\n                      <h4 className=\"font-semibold text-blue-900 mb-3\">Homepage Bestemmingen ({destinationsQuery.data?.filter((d: any) => d.showOnHomepage).length || 0})</h4>\n                      <div className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\">\n                        {(destinationsQuery.data || []).filter((d: any) => d.showOnHomepage).map((destination: any) => (\n                          <div key={destination.id} className=\"bg-white p-3 rounded border border-blue-200\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                              <h5 className=\"font-medium text-blue-900\">{destination.name}</h5>\n                              <Badge className=\"bg-blue-600 text-xs\">#{destination.ranking || 0}</Badge>\n                            </div>\n                            <p className=\"text-sm text-gray-600 mb-2\">{destination.description?.substring(0, 60)}...</p>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => handleToggleDestinationHomepage(destination.id, false)}\n                                className=\"text-xs\"\n                              >\n                                ‚ùå Verwijderen\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedDestination(destination);\n                                  setShowEditDestination(true);\n                                }}\n                                className=\"text-xs\"\n                              >\n                                <Edit className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Homepage Ontdek Meer */}\n                    <div className=\"bg-green-50 rounded-lg p-4\">\n                      <h4 className=\"font-semibold text-green-900 mb-3\">Homepage Ontdek Meer ({pagesQuery.data?.filter((p: any) => p.published).length || 0})</h4>\n                      <div className=\"grid gap-3 md:grid-cols-2 lg:grid-cols-3\">\n                        {(pagesQuery.data || []).filter((p: any) => p.published).map((page: any) => (\n                          <div key={page.id} className=\"bg-white p-3 rounded border border-green-200\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                              <h5 className=\"font-medium text-green-900\">{page.title}</h5>\n                              <Badge className=\"bg-green-600 text-xs\">#{page.ranking || 0}</Badge>\n                            </div>\n                            <p className=\"text-sm text-gray-600 mb-2\">{page.metaDescription?.substring(0, 60)}...</p>\n                            <div className=\"flex gap-1 mb-2\">\n                              <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs\">{page.template}</span>\n                            </div>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => handleTogglePageHomepage(page.id, false)}\n                                className=\"text-xs\"\n                              >\n                                ‚ùå Depubliceren\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedPage(page);\n                                  setShowEditPage(true);\n                                }}\n                                className=\"text-xs\"\n                              >\n                                <Edit className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </TabsContent>\n              </Tabs>\n            </TabsContent>\n          )}\n\n          {/* Content Manager 1 - Bestemmingen + Highlights */}\n          {false && currentUser?.canCreateContent && (\n            <TabsContent value=\"content-manager-1\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Content Manager 1 - Bestemmingen & Highlights</h2>\n                  <p className=\"text-gray-600\">Unified interface voor bestemmingen en highlights beheer</p>\n                </div>\n              </div>\n\n              <Tabs defaultValue=\"all-content\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-3\">\n                  <TabsTrigger value=\"all-content\">Overzicht</TabsTrigger>\n                  <TabsTrigger value=\"highlights-view\">Highlights</TabsTrigger>\n                  <TabsTrigger value=\"actions\">Acties</TabsTrigger>\n                </TabsList>\n\n                {/* Overzicht Tab */}\n                <TabsContent value=\"all-content\" className=\"space-y-6\">\n                  <div className=\"grid gap-6 lg:grid-cols-2\">\n                    {/* Bestemmingen Overzicht */}\n                    <div className=\"bg-blue-50 rounded-lg p-6\">\n                      <h3 className=\"text-xl font-semibold text-blue-900 mb-4\">\n                        Bestemmingen ({destinationsQuery.data?.length || 0})\n                      </h3>\n                      <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                        {(destinationsQuery.data || []).map((destination: any) => (\n                          <div key={destination.id} className=\"bg-white p-3 rounded border border-blue-200\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                              <h4 className=\"font-medium text-blue-900\">{destination.name}</h4>\n                              <div className=\"flex gap-1\">\n                                <Badge variant=\"outline\" className=\"text-xs\">#{destination.ranking || 0}</Badge>\n                                {destination.showOnHomepage && <Badge variant=\"default\" className=\"text-xs bg-green-600\">üè†</Badge>}\n                              </div>\n                            </div>\n                            <p className=\"text-sm text-gray-600 mb-2\">{destination.description?.substring(0, 80)}...</p>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => handleToggleDestinationHomepage(destination.id, !destination.showOnHomepage)}\n                                className=\"text-xs\"\n                              >\n                                {destination.showOnHomepage ? '‚ùå Van Homepage' : '‚úÖ Op Homepage'}\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => {\n                                  setSelectedDestination(destination);\n                                  setEditDestinationData({\n                                    name: destination.name,\n                                        location: destination.location || '',\n                                    description: destination.description,\n                                    image: destination.image,\n                                    alt: destination.alt || '',\n                                    content: destination.content || '',\n                                    link: destination.link || '',\n                                    featured: destination.featured,\n                                    published: destination.published,\n                                    showOnHomepage: destination.showOnHomepage || false,\n                                    ranking: destination.ranking || 0\n                                  });\n                                  setShowEditDestination(true);\n                                }}\n                                className=\"text-xs\"\n                              >\n                                <Edit className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Highlights Overzicht */}\n                    <div className=\"bg-purple-50 rounded-lg p-6\">\n                      <h3 className=\"text-xl font-semibold text-purple-900 mb-4\">\n                        Highlights ({highlightsQuery.data?.length || 0})\n                      </h3>\n                      <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                        {(highlightsQuery.data || []).map((highlight: any) => (\n                          <div key={highlight.id} className=\"bg-white p-3 rounded border border-purple-200\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                              <h4 className=\"font-medium text-purple-900\">{highlight.name}</h4>\n                              <Badge variant=\"outline\" className=\"text-xs\">#{highlight.ranking || 0}</Badge>\n                            </div>\n                            <p className=\"text-sm text-gray-600 mb-2\">{highlight.description?.substring(0, 80)}...</p>\n                            <div className=\"flex gap-1\">\n                              <ViewHighlightDialog highlight={highlight} />\n                              <EditHighlightDialog \n                                highlight={highlight} \n                                onUpdate={() => queryClient.invalidateQueries({ queryKey: ['/api/admin/highlights'] })} \n                              />\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </TabsContent>\n\n                {/* Highlights View Tab */}\n                <TabsContent value=\"highlights-view\" className=\"space-y-6\">\n                  <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                    <div>\n                      <h3 className=\"text-xl font-semibold\">Highlights Beheer ({highlightsQuery.data?.length || 0})</h3>\n                      <p className=\"text-gray-600\">Beheer al je Polish reisbestemmingen</p>\n                    </div>\n                    <div className=\"flex flex-col sm:flex-row gap-2\">\n                      <Select value={locationFilter} onValueChange={setLocationFilter}>\n                        <SelectTrigger className=\"w-48\">\n                          <SelectValue placeholder=\"Filter op locatie\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"all\">Alle locaties</SelectItem>\n                          {getUniqueLocations().map((location) => (\n                            <SelectItem key={location} value={location}>\n                              üìç {location}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <Button \n                        onClick={() => setShowCreateDestination(true)}\n                        className=\"flex items-center gap-2\"\n                      >\n                        <Plus className=\"h-4 w-4\" />\n                        Nieuwe Bestemming\n                      </Button>\n                    </div>\n                  </div>\n                  \n                  <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                  {getFilteredDestinations().map((destination: any) => (\n                    <Card key={destination.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex flex-col gap-3\">\n                          <div className=\"flex justify-between items-start\">\n                            <CardTitle className=\"text-lg leading-tight\">{destination.name}</CardTitle>\n                            <Badge variant=\"outline\" className=\"text-xs\">#{destination.ranking || 0}</Badge>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {destination.location && (\n                              <Badge variant=\"outline\" className=\"text-xs bg-blue-50 text-blue-700 border-blue-200\">\n                                üìç {destination.location}\n                              </Badge>\n                            )}\n                            {destination.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                            <Badge variant={destination.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                              {destination.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                            </Badge>\n                            {destination.showOnHomepage && <Badge variant=\"default\" className=\"text-xs bg-green-600 hover:bg-green-700\">üè† Homepage</Badge>}\n                          </div>\n                          <CardDescription className=\"text-sm line-clamp-2\">{destination.description}</CardDescription>\n                        </div>\n                      </CardHeader>\n                      <CardContent className=\"pt-0\">\n                        <div className=\"flex flex-col gap-3\">\n                          {destination.image && (\n                            <div className=\"relative h-32 w-full overflow-hidden rounded-md\">\n                              <img \n                                src={destination.image} \n                                alt={destination.alt || destination.name}\n                                className=\"h-full w-full object-cover\"\n                              />\n                            </div>\n                          )}\n                          \n                          <div className=\"flex flex-wrap gap-2\">\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              onClick={() => handleToggleDestinationHomepage(destination.id, !destination.showOnHomepage)}\n                              className=\"text-xs flex-1\"\n                            >\n                              {destination.showOnHomepage ? (\n                                <>‚ùå Van Homepage</>\n                              ) : (\n                                <>‚úÖ Op Homepage</>\n                              )}\n                            </Button>\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              onClick={() => {\n                                setSelectedDestination(destination);\n                                setEditDestinationData({\n                                  name: destination.name,\n                                        location: destination.location || '',\n                                  description: destination.description,\n                                  image: destination.image,\n                                  alt: destination.alt || '',\n                                  content: destination.content || '',\n                                  link: destination.link || '',\n                                  featured: destination.featured,\n                                  published: destination.published,\n                                  showOnHomepage: destination.showOnHomepage || false,\n                                  ranking: destination.ranking || 0\n                                });\n                                setShowEditDestination(true);\n                              }}\n                              className=\"text-xs flex-1\"\n                            >\n                              <Edit className=\"h-3 w-3 mr-1\" />\n                              Bewerken\n                            </Button>\n                          </div>\n                          \n                          {destination.link && (\n                            <Button \n                              size=\"sm\" \n                              variant=\"ghost\"\n                              onClick={() => window.open(destination.link, '_blank')}\n                              className=\"text-xs w-full\"\n                            >\n                              <ExternalLink className=\"h-3 w-3 mr-1\" />\n                              Bekijk Pagina\n                            </Button>\n                          )}\n                          \n                          {currentUser?.canDeleteContent && (\n                            <Button \n                              size=\"sm\" \n                              variant=\"destructive\"\n                              onClick={() => handleDeleteDestination(destination.id)}\n                              className=\"text-xs w-full\"\n                            >\n                              üóëÔ∏è Naar Prullenbak\n                            </Button>\n                          )}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                  </div>\n                </TabsContent>\n\n                {/* Highlights View Tab */}\n                <TabsContent value=\"highlights-view\" className=\"space-y-6\">\n                  <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                    <div>\n                      <h3 className=\"text-xl font-semibold\">Highlights Beheer ({highlightsQuery.data?.length || 0})</h3>\n                      <p className=\"text-gray-600\">Beheer alle Polish highlights en attracties</p>\n                    </div>\n                    <CreateHighlightDialog onUpdate={() => queryClient.invalidateQueries({ queryKey: ['/api/admin/highlights'] })} />\n                  </div>\n                  \n                  <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                    {(highlightsQuery.data || []).map((highlight: any) => (\n                      <Card key={highlight.id} className=\"hover:shadow-lg transition-shadow\">\n                        <CardHeader className=\"pb-3\">\n                          <div className=\"flex flex-col gap-3\">\n                            <div className=\"flex justify-between items-start\">\n                              <CardTitle className=\"text-lg leading-tight\">{highlight.name}</CardTitle>\n                              <Badge variant=\"outline\" className=\"text-xs\">#{highlight.ranking || 0}</Badge>\n                            </div>\n                            <CardDescription className=\"text-sm line-clamp-2\">{highlight.description}</CardDescription>\n                          </div>\n                        </CardHeader>\n                        <CardContent className=\"pt-0\">\n                          <div className=\"flex flex-col gap-3\">\n                            {highlight.iconPath && (\n                              <div className=\"relative h-32 w-full overflow-hidden rounded-md bg-gray-50 flex items-center justify-center\">\n                                <img \n                                  src={highlight.iconPath} \n                                  alt={highlight.name}\n                                  className=\"h-16 w-16 object-contain\"\n                                />\n                              </div>\n                            )}\n                            \n                            <div className=\"flex flex-wrap gap-2\">\n                              <ViewHighlightDialog highlight={highlight} />\n                              <EditHighlightDialog \n                                highlight={highlight} \n                                onUpdate={() => queryClient.invalidateQueries({ queryKey: ['/api/admin/highlights'] })} \n                              />\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                </TabsContent>\n\n                {/* Acties Tab */}\n                <TabsContent value=\"actions\" className=\"space-y-6\">\n                  <div className=\"grid gap-6 md:grid-cols-2\">\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">Nieuwe Content Maken</CardTitle>\n                        <CardDescription>Voeg nieuwe bestemmingen en highlights toe</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <Button \n                          onClick={() => setShowCreateDestination(true)}\n                          className=\"w-full flex items-center gap-2\"\n                        >\n                          <Plus className=\"h-4 w-4\" />\n                          Nieuwe Bestemming\n                        </Button>\n                        <CreateHighlightDialog \n                          onUpdate={() => queryClient.invalidateQueries({ queryKey: ['/api/admin/highlights'] })}\n                          className=\"w-full\"\n                        />\n                      </CardContent>\n                    </Card>\n\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">Homepage Beheer</CardTitle>\n                        <CardDescription>Snel homepage content beheren</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"space-y-4\">\n                        <div className=\"text-sm space-y-2\">\n                          <div className=\"flex justify-between\">\n                            <span>Bestemmingen op homepage:</span>\n                            <Badge variant=\"default\" className=\"bg-blue-600\">\n                              {destinationsQuery.data?.filter((d: any) => d.showOnHomepage).length || 0}\n                            </Badge>\n                          </div>\n                          <div className=\"flex justify-between\">\n                            <span>Totaal highlights:</span>\n                            <Badge variant=\"default\" className=\"bg-purple-600\">\n                              {highlightsQuery.data?.length || 0}\n                            </Badge>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </div>\n                </TabsContent>\n              </Tabs>\n            </TabsContent>\n          )}\n\n          {/* Bestaande Bestemmingen - alleen voor gebruikers met create/edit permissies */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"destinations\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Bestemmingen ({getFilteredDestinations().length} van {destinationsQuery.data?.length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer al je Polish reisbestemmingen</p>\n                  <div className=\"mt-2 flex items-center gap-2\">\n                    <Badge variant=\"secondary\" className=\"text-sm bg-amber-100 text-amber-800 border-amber-200\">\n                      ‚≠ê Featured: {destinationsQuery.data?.filter((d: any) => d.featured).length || 0} van {destinationsQuery.data?.length || 0}\n                    </Badge>\n                    <Badge variant=\"outline\" className=\"text-sm bg-green-50 text-green-700 border-green-200\">\n                      ‚úÖ Gepubliceerd: {destinationsQuery.data?.filter((d: any) => d.published).length || 0} van {destinationsQuery.data?.length || 0}\n                    </Badge>\n                  </div>\n                </div>\n                <div className=\"flex flex-col sm:flex-row gap-2\">\n                  <Select value={locationFilter} onValueChange={setLocationFilter}>\n                    <SelectTrigger className=\"w-48\">\n                      <SelectValue placeholder=\"Filter op locatie\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Alle locaties</SelectItem>\n                      {getUniqueLocations().map((location) => (\n                        <SelectItem key={location} value={location}>\n                          üìç {location}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <Button \n                    onClick={() => setShowCreateDestination(true)}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Nieuwe Bestemming\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {getFilteredDestinations().map((destination: any) => (\n                <Card key={destination.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex flex-col gap-3\">\n                      <div className=\"flex justify-between items-start\">\n                        <CardTitle className=\"text-lg leading-tight\">{destination.name}</CardTitle>\n                        <Badge variant=\"outline\" className=\"text-xs\">#{destination.ranking || 0}</Badge>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {destination.location && (\n                          <Badge variant=\"outline\" className=\"text-xs bg-blue-50 text-blue-700 border-blue-200\">\n                            üìç {destination.location}\n                          </Badge>\n                        )}\n                        {destination.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                        <Badge variant={destination.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                          {destination.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                        </Badge>\n                        {destination.showOnHomepage && <Badge variant=\"default\" className=\"text-xs bg-green-600 hover:bg-green-700\">üè† Homepage</Badge>}\n                      </div>\n                      <CardDescription className=\"text-sm line-clamp-2\">{destination.description}</CardDescription>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"pt-0\">\n                    <div className=\"flex flex-col gap-3\">\n                      {destination.image && (\n                        <div className=\"relative h-32 w-full overflow-hidden rounded-md\">\n                          <img \n                            src={destination.image} \n                            alt={destination.alt || destination.name}\n                            className=\"h-full w-full object-cover\"\n                          />\n                        </div>\n                      )}\n                      \n                      <div className=\"flex flex-wrap gap-2\">\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => handleToggleDestinationHomepage(destination.id, !destination.showOnHomepage)}\n                          className=\"text-xs flex-1\"\n                        >\n                          {destination.showOnHomepage ? (\n                            <>‚ùå Van Homepage</>\n                          ) : (\n                            <>‚úÖ Op Homepage</>\n                          )}\n                        </Button>\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => {\n                            setSelectedDestination(destination);\n                            setEditDestinationData({\n                              name: destination.name,\n                              location: destination.location || '',\n                              description: destination.description,\n                              image: destination.image,\n                              alt: destination.alt || '',\n                              content: destination.content || '',\n                              link: destination.link || '',\n                              featured: destination.featured,\n                              published: destination.published,\n                              showOnHomepage: destination.showOnHomepage || false,\n                              ranking: destination.ranking || 0\n                            });\n                            setShowEditDestination(true);\n                          }}\n                          className=\"text-xs flex-1\"\n                        >\n                          <Edit className=\"h-3 w-3 mr-1\" />\n                          Bewerken\n                        </Button>\n                      </div>\n                      \n                      {destination.link && (\n                        <Button \n                          size=\"sm\" \n                          variant=\"ghost\"\n                          onClick={() => window.open(destination.link, '_blank')}\n                          className=\"text-xs w-full\"\n                        >\n                          <ExternalLink className=\"h-3 w-3 mr-1\" />\n                          Bekijk Pagina\n                        </Button>\n                      )}\n                      \n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        onClick={() => {\n                          setSelectedDestination(destination);\n                          setShowViewDestination(true);\n                        }}\n                        className=\"text-xs w-full\"\n                      >\n                        <Eye className=\"h-3 w-3 mr-1\" />\n                        Bekijken\n                      </Button>\n                      \n                      {currentUser?.canDeleteContent && (\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => handleSoftDeleteDestination(destination.id)}\n                          className=\"text-xs w-full\"\n                        >\n                          <Trash2 className=\"h-3 w-3 mr-1\" />\n                          üóëÔ∏è Naar Prullenbak\n                        </Button>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n            </TabsContent>\n          )}\n\n          {/* Bestaande Reizen */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"guides\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Reizen ({getFilteredGuides().length} van {guidesQuery.data?.length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer al je Polish reizen en tips</p>\n                </div>\n                <div className=\"flex flex-col sm:flex-row gap-2\">\n                  <Select value={guideFilter} onValueChange={setGuideFilter}>\n                    <SelectTrigger className=\"w-48\">\n                      <SelectValue placeholder=\"Filter op categorie\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Alle categorie√´n</SelectItem>\n                      {getUniqueGuideCategories().map((category) => (\n                        <SelectItem key={category} value={category}>\n                          üìñ {category}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <Button \n                    onClick={() => setShowCreateGuide(true)}\n                    className=\"flex items-center gap-2\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Nieuwe Reis\n                  </Button>\n                </div>\n              </div>\n              \n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {getFilteredGuides().map((guide: any) => (\n                <Card key={guide.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex flex-col gap-3\">\n                      <div className=\"flex justify-between items-start\">\n                        <CardTitle className=\"text-lg leading-tight\">{guide.title}</CardTitle>\n                        <Badge variant=\"outline\" className=\"text-xs\">#{guide.ranking || 0}</Badge>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2\">\n                        <Badge variant=\"outline\" className=\"text-xs bg-blue-50 text-blue-700 border-blue-200\">\n                          üìñ {guide.title.split(' ')[0] || 'Overig'}\n                        </Badge>\n                        {guide.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                        <Badge variant={guide.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                          {guide.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                        </Badge>\n                        {guide.showOnHomepage && <Badge variant=\"default\" className=\"text-xs bg-green-600 hover:bg-green-700\">üè† Homepage</Badge>}\n                      </div>\n                      <CardDescription className=\"text-sm line-clamp-2\">{guide.description}</CardDescription>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"pt-0\">\n                    <div className=\"flex flex-col gap-3\">\n                      {guide.image && (\n                        <div className=\"relative h-32 w-full overflow-hidden rounded-md\">\n                          <img \n                            src={guide.image} \n                            alt={guide.alt || guide.title}\n                            className=\"h-full w-full object-cover\"\n                          />\n                        </div>\n                      )}\n                      \n                      <div className=\"flex flex-wrap gap-2\">\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => handleToggleGuideHomepage(guide.id, !guide.showOnHomepage)}\n                          className=\"text-xs flex-1\"\n                        >\n                          {guide.showOnHomepage ? (\n                            <>‚ùå Van Homepage</>\n                          ) : (\n                            <>‚úÖ Op Homepage</>\n                          )}\n                        </Button>\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => {\n                            setSelectedGuide(guide);\n                            setEditGuideData({\n                              title: guide.title,\n                              description: guide.description,\n                              image: guide.image,\n                              alt: guide.alt || '',\n                              content: guide.content || '',\n                              link: guide.link || '',\n                              featured: guide.featured,\n                              published: guide.published,\n                              showOnHomepage: guide.showOnHomepage || false,\n                              ranking: guide.ranking || 0\n                            });\n                            setShowEditGuide(true);\n                          }}\n                          className=\"text-xs\"\n                        >\n                          <Edit className=\"h-3 w-3 mr-1\" />\n                          Bewerken\n                        </Button>\n                      </div>\n\n                      <Button \n                        size=\"sm\" \n                        variant=\"outline\"\n                        onClick={() => {\n                          setSelectedGuide(guide);\n                          setShowViewGuide(true);\n                        }}\n                        className=\"text-xs w-full\"\n                      >\n                        <Eye className=\"h-3 w-3 mr-1\" />\n                        Bekijken\n                      </Button>\n                      \n                      {currentUser?.canDeleteContent && (\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => handleSoftDeleteGuide(guide.id)}\n                          className=\"text-xs w-full\"\n                        >\n                          <Trash2 className=\"h-3 w-3 mr-1\" />\n                          üóëÔ∏è Naar Prullenbak\n                        </Button>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n              </div>\n            </TabsContent>\n          )}\n\n          {/* Homepage Overview - Combinatie van Bestemmingen en Ontdek Meer */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"homepage-overview\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Homepage Content Overview</h2>\n                  <p className=\"text-gray-600\">Overzicht van alle content die op de homepage wordt getoond</p>\n                </div>\n              </div>\n\n              {/* Bestemmingen Sectie */}\n              <div className=\"bg-blue-50 rounded-lg p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h3 className=\"text-xl font-semibold text-blue-900\">\n                    Bestemmingen ({destinationsQuery.data?.filter((d: any) => d.showOnHomepage).length || 0} op homepage)\n                  </h3>\n                  <div className=\"text-sm text-blue-700\">\n                    Totaal: {destinationsQuery.data?.length || 0} bestemmingen\n                  </div>\n                </div>\n                \n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                  {(destinationsQuery.data || []).filter((destination: any) => destination.showOnHomepage).map((destination: any) => (\n                    <Card key={destination.id} className=\"bg-white border-blue-200\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex justify-between items-start\">\n                          <CardTitle className=\"text-lg text-blue-900\">{destination.name}</CardTitle>\n                          <Badge variant=\"default\" className=\"bg-blue-600 text-xs\">Homepage</Badge>\n                        </div>\n                        <CardDescription className=\"text-sm\">{destination.description}</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"pt-0\">\n                        <div className=\"flex gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => handleToggleDestinationHomepage(destination.id, false)}\n                            className=\"text-xs\"\n                          >\n                            ‚ùå Van Homepage\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedDestination(destination);\n                              setEditDestinationData({\n                                name: destination.name,\n                                        location: destination.location || '',\n                                description: destination.description,\n                                image: destination.image,\n                                alt: destination.alt || '',\n                                content: destination.content || '',\n                                link: destination.link || '',\n                                featured: destination.featured,\n                                published: destination.published,\n                                showOnHomepage: destination.showOnHomepage || false,\n                                ranking: destination.ranking || 0\n                              });\n                              setShowEditDestination(true);\n                            }}\n                            className=\"text-xs\"\n                          >\n                            <Edit className=\"h-3 w-3 mr-1\" />\n                            Bewerken\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {destinationsQuery.data?.filter((d: any) => d.showOnHomepage).length === 0 && (\n                  <div className=\"text-center py-8 text-blue-700\">\n                    Geen bestemmingen geselecteerd voor homepage\n                  </div>\n                )}\n              </div>\n\n              {/* Ontdek Meer Sectie */}\n              <div className=\"bg-green-50 rounded-lg p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h3 className=\"text-xl font-semibold text-green-900\">\n                    Ontdek Meer Pagina's ({pagesQuery.data?.filter((p: any) => p.published).length || 0} gepubliceerd)\n                  </h3>\n                  <div className=\"text-sm text-green-700\">\n                    Totaal: {pagesQuery.data?.length || 0} pagina's\n                  </div>\n                </div>\n                \n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                  {(pagesQuery.data || []).filter((page: any) => page.published).map((page: any) => (\n                    <Card key={page.id} className=\"bg-white border-green-200\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex justify-between items-start\">\n                          <CardTitle className=\"text-lg text-green-900\">{page.title}</CardTitle>\n                          <Badge variant=\"default\" className=\"bg-green-600 text-xs\">Gepubliceerd</Badge>\n                        </div>\n                        <CardDescription className=\"text-sm\">{page.metaDescription}</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"pt-0\">\n                        <div className=\"flex gap-2 mb-2\">\n                          <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs\">\n                            {page.template}\n                          </span>\n                          {page.featured && (\n                            <span className=\"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs\">\n                              Featured\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => handleTogglePageHomepage(page.id, false)}\n                            className=\"text-xs\"\n                          >\n                            ‚ùå Depubliceer\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedPage(page);\n                              setEditPageData({\n                                title: page.title,\n                                slug: page.slug,\n                                content: page.content,\n                                metaTitle: page.metaTitle || '',\n                                metaDescription: page.metaDescription || '',\n                                metaKeywords: page.metaKeywords || '',\n                                template: page.template,\n                                headerImage: page.headerImage || '',\n                                headerImageAlt: page.headerImageAlt || '',\n                                highlightSections: page.highlightSections || '',\n                                published: page.published,\n                                featured: page.featured,\n                                ranking: page.ranking || 0\n                              });\n                              setShowEditPage(true);\n                            }}\n                            className=\"text-xs\"\n                          >\n                            <Edit className=\"h-3 w-3 mr-1\" />\n                            Bewerken\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {pagesQuery.data?.filter((p: any) => p.published).length === 0 && (\n                  <div className=\"text-center py-8 text-green-700\">\n                    Geen pagina's gepubliceerd voor Ontdek Meer sectie\n                  </div>\n                )}\n              </div>\n\n              {/* Reizen Sectie */}\n              <div className=\"bg-purple-50 rounded-lg p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <h3 className=\"text-xl font-semibold text-purple-900\">\n                    Reizen ({guidesQuery.data?.filter((g: any) => g.showOnHomepage).length || 0} op homepage)\n                  </h3>\n                  <div className=\"text-sm text-purple-700\">\n                    Totaal: {guidesQuery.data?.length || 0} reizen\n                  </div>\n                </div>\n                \n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                  {(guidesQuery.data || []).filter((guide: any) => guide.showOnHomepage).map((guide: any) => (\n                    <Card key={guide.id} className=\"bg-white border-purple-200\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex justify-between items-start\">\n                          <CardTitle className=\"text-lg text-purple-900\">{guide.title}</CardTitle>\n                          <Badge variant=\"default\" className=\"bg-purple-600 text-xs\">Homepage</Badge>\n                        </div>\n                        <CardDescription className=\"text-sm\">{guide.description}</CardDescription>\n                      </CardHeader>\n                      <CardContent className=\"pt-0\">\n                        <div className=\"flex gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => handleToggleGuideHomepage(guide.id, false)}\n                            className=\"text-xs\"\n                          >\n                            ‚ùå Van Homepage\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedGuide(guide);\n                              setEditGuideData({\n                                title: guide.title,\n                                description: guide.description,\n                                image: guide.image,\n                                alt: guide.alt || '',\n                                content: guide.content || '',\n                                link: guide.link || '',\n                                featured: guide.featured,\n                                published: guide.published,\n                                showOnHomepage: guide.showOnHomepage || false,\n                                ranking: guide.ranking || 0\n                              });\n                              setShowEditGuide(true);\n                            }}\n                            className=\"text-xs\"\n                          >\n                            <Edit className=\"h-3 w-3 mr-1\" />\n                            Bewerken\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {guidesQuery.data?.filter((g: any) => g.showOnHomepage).length === 0 && (\n                  <div className=\"text-center py-8 text-purple-700\">\n                    Geen reizen geselecteerd voor homepage\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          )}\n\n          {/* Ontdek Meer Tab Content */}\n          {currentUser?.role === 'admin' && (\n            <TabsContent value=\"ontdek-meer\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Ontdek Meer Homepage ({pagesQuery.data?.filter((page: any) => page.published).length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer de pagina's die in de \"Ontdek Meer\" sectie op de homepage worden getoond</p>\n                </div>\n                <Button onClick={() => setShowCreatePage(true)} className=\"bg-blue-600 hover:bg-blue-700\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Nieuwe Pagina\n                </Button>\n              </div>\n              \n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                {(pagesQuery.data || []).map((page: any) => (\n                  <Card key={page.id} className=\"hover:shadow-lg transition-shadow\">\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex flex-col gap-3\">\n                        <div className=\"flex justify-between items-start\">\n                          <CardTitle className=\"text-lg leading-tight\">{page.title}</CardTitle>\n                          <Badge variant=\"outline\" className=\"text-xs\">#{page.ranking || 0}</Badge>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {page.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                          <Badge variant={page.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                            {page.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                          </Badge>\n                          {page.published && <Badge variant=\"default\" className=\"text-xs bg-green-600 hover:bg-green-700\">üè† Homepage</Badge>}\n                        </div>\n                        <div className=\"flex items-center text-xs text-gray-500 gap-2\">\n                          <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded\">\n                            {page.template}\n                          </span>\n                          <span>\n                            {new Date(page.createdAt).toLocaleDateString('nl-NL')}\n                          </span>\n                        </div>\n                        <CardDescription className=\"text-sm line-clamp-2\">{page.metaDescription}</CardDescription>\n                      </div>\n                    </CardHeader>\n                    <CardContent className=\"pt-0\">\n                      <div className=\"flex flex-col gap-3\">\n                        {/* Quick Homepage Toggle */}\n                        <Button \n                          size=\"sm\" \n                          variant={page.published ? \"default\" : \"outline\"}\n                          onClick={() => handleTogglePageHomepage(page.id, !page.published)}\n                          className=\"w-full\"\n                        >\n                          {page.published ? \"üè† Op Homepage\" : \"‚ûï Naar Homepage\"}\n                        </Button>\n                        \n                        <div className=\"flex flex-wrap gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedPage(page);\n                              setShowEditPage(true);\n                            }}\n                          >\n                            <Edit className=\"h-4 w-4 mr-2\" />\n                            Bewerken\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedPage(page);\n                              setShowViewPage(true);\n                            }}\n                          >\n                            <Eye className=\"h-4 w-4 mr-2\" />\n                            Bekijken\n                          </Button>\n                          {page.published && (\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              onClick={() => window.open(`/${page.slug}`, '_blank')}\n                            >\n                              <FolderOpen className=\"h-4 w-4 mr-2\" />\n                              Live\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n              \n              {(!pagesQuery.data || pagesQuery.data.length === 0) && (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-gray-400 mb-4\">\n                    <div className=\"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center\">\n                      üìÑ\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Geen pagina's</h3>\n                    <p className=\"text-sm\">Maak je eerste \"Ontdek Meer\" pagina aan om content op de homepage te tonen.</p>\n                  </div>\n                  <Button onClick={() => setShowCreatePage(true)} className=\"mt-4\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Eerste Pagina Maken\n                  </Button>\n                </div>\n              )}\n            </TabsContent>\n          )}\n\n\n\n          {/* Activiteiten Tab */}\n          <TabsContent value=\"activities\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Activiteiten ({getFilteredActivities().length} van {activitiesQuery.data?.length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer activiteiten zoals musea, bergen, pleinen en restaurants</p>\n                  <div className=\"mt-2 flex items-center gap-2\">\n                    <Badge variant=\"secondary\" className=\"text-sm bg-amber-100 text-amber-800 border-amber-200\">\n                      ‚≠ê Featured: {activitiesQuery.data?.filter((a: any) => a.featured).length || 0} van {activitiesQuery.data?.length || 0}\n                    </Badge>\n                    <Badge variant=\"outline\" className=\"text-sm bg-green-50 text-green-700 border-green-200\">\n                      ‚úÖ Gepubliceerd: {activitiesQuery.data?.filter((a: any) => a.published).length || 0} van {activitiesQuery.data?.length || 0}\n                    </Badge>\n                  </div>\n                </div>\n                <Button onClick={() => {\n                  console.log(\"DEBUG: Nieuwe Activiteit clicked, current state:\", showCreateActivity);\n                  setShowCreateActivity(true);\n                  console.log(\"DEBUG: After setShowCreateActivity(true)\");\n                }} className=\"bg-green-600 hover:bg-green-700\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Nieuwe Activiteit\n                </Button>\n              </div>\n\n              {/* Filter Controls */}\n              <div className=\"flex flex-col sm:flex-row gap-4\">\n                <div className=\"flex-1\">\n                  <Label htmlFor=\"activity-location-filter\">Filter op locatie</Label>\n                  <Select value={activityLocationFilter} onValueChange={setActivityLocationFilter}>\n                    <SelectTrigger className=\"w-full\">\n                      <SelectValue placeholder=\"Alle locaties\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Alle locaties ({activitiesQuery.data?.length || 0})</SelectItem>\n                      {getUniqueActivityLocations().map((location) => {\n                        const count = activitiesQuery.data?.filter((a: any) => a.location === location).length || 0;\n                        return (\n                          <SelectItem key={location} value={location}>\n                            {location} ({count})\n                          </SelectItem>\n                        );\n                      })}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex-1\">\n                  <Label htmlFor=\"activity-category-filter\">Filter op categorie</Label>\n                  <Select value={activityCategoryFilter} onValueChange={setActivityCategoryFilter}>\n                    <SelectTrigger className=\"w-full\">\n                      <SelectValue placeholder=\"Alle categorie√´n\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">Alle categorie√´n ({activitiesQuery.data?.length || 0})</SelectItem>\n                      {getUniqueActivityCategories().map((category) => {\n                        const count = activitiesQuery.data?.filter((a: any) => a.category === category).length || 0;\n                        return (\n                          <SelectItem key={category} value={category}>\n                            {category} ({count})\n                          </SelectItem>\n                        );\n                      })}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              {/* Activities Grid */}\n              <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                {getFilteredActivities().map((activity: any) => (\n                  <Card key={activity.id} className=\"hover:shadow-lg transition-shadow\">\n                    <div className=\"relative\">\n                      {activity.image && (\n                        <div className=\"h-32 w-full overflow-hidden rounded-t-lg\">\n                          <img\n                            src={activity.image}\n                            alt={activity.alt || activity.name}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                      )}\n                      <Badge variant=\"outline\" className=\"absolute top-2 right-2 text-xs bg-white/90\">\n                        #{activity.ranking || 0}\n                      </Badge>\n                    </div>\n                    <CardHeader className=\"pb-3\">\n                      <div className=\"flex justify-between items-start gap-2\">\n                        <CardTitle className=\"text-lg leading-tight\">{activity.name}</CardTitle>\n                      </div>\n                      <div className=\"flex flex-wrap gap-2 mt-2\">\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          üìç {activity.location || 'Geen locatie'}\n                        </Badge>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          üéØ {activity.category || 'Geen categorie'}\n                        </Badge>\n                        {activity.activityType && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {activity.activityType}\n                          </Badge>\n                        )}\n                        {activity.featured && <Badge variant=\"secondary\" className=\"text-xs\">‚≠ê Featured</Badge>}\n                        <Badge variant={activity.published ? \"default\" : \"outline\"} className=\"text-xs\">\n                          {activity.published ? \"‚úÖ Gepubliceerd\" : \"üìù Concept\"}\n                        </Badge>\n                      </div>\n                      <CardDescription className=\"text-sm mt-2\">{activity.description}</CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"pt-0\">\n                      <div className=\"flex flex-col gap-2\">\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={async () => {\n                              try {\n                                const response = await apiRequest(`/api/admin/activities/${activity.id}`, {\n                                  method: 'PUT',\n                                  headers: { 'Content-Type': 'application/json' },\n                                  body: JSON.stringify({ featured: !activity.featured }),\n                                });\n                                \n                                if (response.ok) {\n                                  toast({ \n                                    title: \"Succes\", \n                                    description: `Activiteit ${!activity.featured ? 'toegevoegd aan' : 'verwijderd van'} featured` \n                                  });\n                                  queryClient.invalidateQueries({ queryKey: ['/api/admin/activities'] });\n                                } else {\n                                  toast({ \n                                    title: \"Fout\", \n                                    description: \"Er is een fout opgetreden\", \n                                    variant: \"destructive\" \n                                  });\n                                }\n                              } catch (error) {\n                                toast({ \n                                  title: \"Fout\", \n                                  description: \"Er is een fout opgetreden\", \n                                  variant: \"destructive\" \n                                });\n                              }\n                            }}\n                            className=\"text-xs flex-1\"\n                          >\n                            {activity.featured ? (\n                              <>‚ùå Unfeatured</>\n                            ) : (\n                              <>‚≠ê Featured</>\n                            )}\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={async () => {\n                              try {\n                                const response = await apiRequest(`/api/admin/activities/${activity.id}`, {\n                                  method: 'PUT',\n                                  headers: { 'Content-Type': 'application/json' },\n                                  body: JSON.stringify({ published: !activity.published }),\n                                });\n                                \n                                if (response.ok) {\n                                  toast({ \n                                    title: \"Succes\", \n                                    description: `Activiteit ${!activity.published ? 'gepubliceerd' : 'als concept ingesteld'}` \n                                  });\n                                  queryClient.invalidateQueries({ queryKey: ['/api/admin/activities'] });\n                                } else {\n                                  toast({ \n                                    title: \"Fout\", \n                                    description: \"Er is een fout opgetreden\", \n                                    variant: \"destructive\" \n                                  });\n                                }\n                              } catch (error) {\n                                toast({ \n                                  title: \"Fout\", \n                                  description: \"Er is een fout opgetreden\", \n                                  variant: \"destructive\" \n                                });\n                              }\n                            }}\n                            className=\"text-xs flex-1\"\n                          >\n                            {activity.published ? (\n                              <>üìù Concept</>\n                            ) : (\n                              <>‚úÖ Publiceer</>\n                            )}\n                          </Button>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              console.log(\"Bewerken button clicked for activity:\", activity.name);\n                              console.log(\"Setting selectedActivity:\", activity);\n                              setSelectedActivity(activity);\n                              setEditActivityData({\n                                name: activity.name,\n                                location: activity.location || '',\n                                category: activity.category || '',\n                                activityType: activity.activityType || '',\n                                description: activity.description,\n                                image: activity.image,\n                                alt: activity.alt || '',\n                                content: activity.content || '',\n                                link: activity.link || '',\n                                featured: activity.featured,\n                                published: activity.published,\n                                ranking: activity.ranking || 0\n                              });\n                              console.log(\"Setting showEditActivity to true\");\n                              setShowEditActivity(true);\n                            }}\n                            className=\"flex-1 text-xs\"\n                          >\n                            <Edit className=\"h-3 w-3 mr-1\" />\n                            Bewerken\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              console.log(\"Bekijken button clicked for activity:\", activity.name);\n                              setSelectedActivity(activity);\n                              setShowViewActivity(true);\n                            }}\n                            className=\"flex-1 text-xs\"\n                          >\n                            <Eye className=\"h-3 w-3 mr-1\" />\n                            Bekijken\n                          </Button>\n                        </div>\n                        <Button \n                          size=\"sm\" \n                          variant=\"outline\"\n                          onClick={() => handleDeleteActivity(activity.id, activity.name, activitiesQuery, toast)}\n                          className=\"text-xs w-full\"\n                        >\n                          <Trash2 className=\"h-3 w-3 mr-1\" />\n                          üóëÔ∏è Naar Prullenbak\n                        </Button>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n\n              {getFilteredActivities().length === 0 && (\n                <div className=\"text-center py-12\">\n                  <div className=\"text-gray-400 mb-4\">\n                    <Plus className=\"h-12 w-12 mx-auto\" />\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">Geen activiteiten gevonden</h3>\n                  <p className=\"text-gray-500 mb-4\">\n                    {activitiesQuery.data?.length === 0 \n                      ? \"Begin met het toevoegen van je eerste activiteit.\"\n                      : \"Probeer je filters aan te passen om meer resultaten te zien.\"\n                    }\n                  </p>\n                  {activitiesQuery.data?.length === 0 && (\n                    <Button onClick={() => setShowCreateActivity(true)} className=\"bg-green-600 hover:bg-green-700\">\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Nieuwe Activiteit\n                    </Button>\n                  )}\n                </div>\n              )}\n            </TabsContent>\n\n          {/* Gebruikersbeheer Tab - alleen voor admins */}\n          {currentUser?.canManageUsers && (\n            <TabsContent value=\"users\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Gebruikersbeheer ({usersQuery.data?.length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer gebruikers en hun rechten</p>\n                </div>\n                <Button onClick={() => setShowCreateUser(true)} className=\"bg-blue-600 hover:bg-blue-700\">\n                  <UserPlus className=\"h-4 w-4 mr-2\" />\n                  Nieuwe Gebruiker\n                </Button>\n              </div>\n              \n              <div className=\"grid gap-6\">\n                {usersQuery.data?.map((user) => (\n                  <Card key={user.id} className=\"hover:shadow-lg transition-shadow\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-3 mb-3\">\n                            <CardTitle className=\"text-lg\">{user.username}</CardTitle>\n                            <Badge variant={user.role === 'admin' ? 'destructive' : user.role === 'editor' ? 'default' : 'secondary'}>\n                              {user.role === 'admin' ? 'üëë Administrator' : user.role === 'editor' ? '‚úèÔ∏è Editor' : 'üë§ Gebruiker'}\n                            </Badge>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {user.canCreateContent && <Badge variant=\"outline\" className=\"text-xs\">‚úèÔ∏è Aanmaken</Badge>}\n                            {user.canEditContent && <Badge variant=\"outline\" className=\"text-xs\">üìù Bewerken</Badge>}\n                            {user.canDeleteContent && <Badge variant=\"outline\" className=\"text-xs\">üóëÔ∏è Verwijderen</Badge>}\n                            {user.canManageUsers && <Badge variant=\"outline\" className=\"text-xs\">üë• Gebruikers</Badge>}\n                          </div>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedUser(user);\n                              setShowEditUser(true);\n                            }}\n                          >\n                            <Edit className=\"h-4 w-4 mr-1\" />\n                            Bewerken\n                          </Button>\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              setSelectedUser(user);\n                              setShowResetPassword(true);\n                            }}\n                          >\n                            <Key className=\"h-4 w-4 mr-1\" />\n                            Reset\n                          </Button>\n                          {user.id !== currentUser.id && (\n                            <Button \n                              size=\"sm\" \n                              variant=\"destructive\"\n                              onClick={() => handleDeleteUser(user.id)}\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-1\" />\n                              Verwijderen\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </TabsContent>\n          )}\n\n          {/* Database Status Tab Content */}\n          {currentUser?.role === 'admin' && (\n            <TabsContent value=\"database\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold flex items-center gap-2\">\n                    <Database className=\"h-6 w-6\" />\n                    Database Status & Monitoring\n                  </h2>\n                  <p className=\"text-gray-600\">Overzicht van database status, connectiviteit en tabel statistieken</p>\n                </div>\n                <Button \n                  onClick={() => {\n                    databaseStatusQuery.refetch();\n                    tableStatsQuery.refetch();\n                  }}\n                  variant=\"outline\"\n                  className=\"flex items-center gap-2\"\n                >\n                  <RefreshCw className=\"h-4 w-4\" />\n                  Vernieuwen\n                </Button>\n              </div>\n\n              {/* Database Connection Status */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Server className=\"h-5 w-5\" />\n                    Database Connectie\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {databaseStatusQuery.isLoading ? (\n                    <div className=\"flex items-center gap-2\">\n                      <RefreshCw className=\"h-4 w-4 animate-spin\" />\n                      Laden...\n                    </div>\n                  ) : databaseStatusQuery.data ? (\n                    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`h-3 w-3 rounded-full ${\n                          databaseStatusQuery.data.connectionStatus === 'connected' \n                            ? 'bg-green-500' \n                            : 'bg-red-500'\n                        }`} />\n                        <div>\n                          <p className=\"text-sm font-medium\">Status</p>\n                          <p className=\"text-lg font-semibold\">\n                            {databaseStatusQuery.data.connectionStatus === 'connected' ? 'Verbonden' : 'Niet verbonden'}\n                          </p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-3\">\n                        <HardDrive className=\"h-5 w-5 text-blue-500\" />\n                        <div>\n                          <p className=\"text-sm font-medium\">Database</p>\n                          <p className=\"text-lg font-semibold\">{databaseStatusQuery.data.databaseName}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-3\">\n                        <Activity className=\"h-5 w-5 text-purple-500\" />\n                        <div>\n                          <p className=\"text-sm font-medium\">Totaal Records</p>\n                          <p className=\"text-lg font-semibold\">{databaseStatusQuery.data.totalRecords.toLocaleString('nl-NL')}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-3\">\n                        <Database className=\"h-5 w-5 text-orange-500\" />\n                        <div>\n                          <p className=\"text-sm font-medium\">Storage</p>\n                          <p className=\"text-lg font-semibold\">{databaseStatusQuery.data.storageSize}</p>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"text-red-600\">Database status kon niet worden opgehaald</div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Database Info */}\n              {databaseStatusQuery.data && (\n                <div className=\"grid gap-4 md:grid-cols-3\">\n                  <Card>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Database className=\"h-4 w-4 text-blue-500\" />\n                        <span className=\"text-sm font-medium\">Tabellen</span>\n                      </div>\n                      <p className=\"text-2xl font-bold mt-1\">{databaseStatusQuery.data.totalTables}</p>\n                    </CardContent>\n                  </Card>\n                  \n                  <Card>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Clock className=\"h-4 w-4 text-green-500\" />\n                        <span className=\"text-sm font-medium\">Backup</span>\n                      </div>\n                      <p className=\"text-lg font-semibold mt-1\">{databaseStatusQuery.data.lastBackup}</p>\n                    </CardContent>\n                  </Card>\n                  \n                  <Card>\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Server className=\"h-4 w-4 text-purple-500\" />\n                        <span className=\"text-sm font-medium\">Uptime</span>\n                      </div>\n                      <p className=\"text-lg font-semibold mt-1\">{databaseStatusQuery.data.uptime}</p>\n                    </CardContent>\n                  </Card>\n                </div>\n              )}\n\n              {/* Table Statistics */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Activity className=\"h-5 w-5\" />\n                    Tabel Statistieken\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {tableStatsQuery.isLoading ? (\n                    <div className=\"flex items-center gap-2\">\n                      <RefreshCw className=\"h-4 w-4 animate-spin\" />\n                      Laden...\n                    </div>\n                  ) : tableStatsQuery.data ? (\n                    <div className=\"overflow-hidden\">\n                      <table className=\"w-full\">\n                        <thead>\n                          <tr className=\"border-b\">\n                            <th className=\"text-left py-3 px-4 font-medium\">Tabel</th>\n                            <th className=\"text-left py-3 px-4 font-medium\">Records</th>\n                            <th className=\"text-left py-3 px-4 font-medium\">Laatste Update</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {tableStatsQuery.data.map((table, index) => (\n                            <tr key={index} className=\"border-b hover:bg-gray-50\">\n                              <td className=\"py-3 px-4 font-medium\">{table.tableName}</td>\n                              <td className=\"py-3 px-4\">\n                                <Badge variant=\"outline\">\n                                  {table.recordCount.toLocaleString('nl-NL')}\n                                </Badge>\n                              </td>\n                              <td className=\"py-3 px-4 text-gray-600\">{table.lastUpdated}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  ) : (\n                    <div className=\"text-red-600\">Tabel statistieken konden niet worden opgehaald</div>\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Security Notice */}\n              <Card className=\"border-amber-200 bg-amber-50\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <Shield className=\"h-5 w-5 text-amber-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"font-medium text-amber-800\">Beveiligingsinfo</h4>\n                      <p className=\"text-sm text-amber-700 mt-1\">\n                        Dit dashboard toont alleen readonly informatie. Database configuratie en credentials \n                        worden veilig beheerd via environment variables en zijn niet zichtbaar in de interface.\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          )}\n\n          {/* Featured Tab Content */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"featured\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Featured Overzicht</h2>\n                  <p className=\"text-gray-600\">Overzicht van alle featured (actieve) content uit bestemmingen en activiteiten</p>\n                </div>\n              </div>\n\n              {/* Featured Destinations Section */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-xl font-semibold flex items-center gap-2\">\n                  üèîÔ∏è Featured Bestemmingen\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {destinationsQuery.data?.filter((d: any) => d.featured).length || 0} van {destinationsQuery.data?.length || 0}\n                  </Badge>\n                </h3>\n                \n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                  {destinationsQuery.data?.filter((destination: any) => destination.featured).map((destination: any) => (\n                    <Card key={destination.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <CardTitle className=\"text-lg\">{destination.name}</CardTitle>\n                          <Badge variant=\"default\" className=\"text-xs\">‚≠ê Featured</Badge>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Badge variant=\"outline\" className=\"text-xs\">üìç {destination.location}</Badge>\n                          <Badge variant=\"outline\" className=\"text-xs\">#{destination.ranking || 0}</Badge>\n                          {destination.showOnHomepage && (\n                            <Badge variant=\"default\" className=\"text-xs\">üè† Homepage</Badge>\n                          )}\n                        </div>\n                        \n                        {/* Destination Image */}\n                        <div className=\"mt-3 rounded-lg overflow-hidden\">\n                          <img\n                            src={destination.image}\n                            alt={destination.alt || destination.name}\n                            className=\"w-full h-32 object-cover\"\n                            onError={(e) => {\n                              e.currentTarget.src = '/images/destinations/placeholder.svg';\n                            }}\n                          />\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <p className=\"text-sm text-gray-600 mb-3\">{destination.description}</p>\n                        <div className=\"flex gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => window.open(`/${destination.slug}`, '_blank')}\n                          >\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            Bekijken\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {(!destinationsQuery.data?.filter((d: any) => d.featured).length) && (\n                  <div className=\"text-center py-8 border-2 border-dashed border-gray-200 rounded-lg\">\n                    <div className=\"text-gray-400\">\n                      <h4 className=\"text-lg font-medium mb-2\">Geen featured bestemmingen</h4>\n                      <p className=\"text-sm\">Markeer bestemmingen als featured in de Bestemmingen sectie</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Featured Activities Section */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-xl font-semibold flex items-center gap-2\">\n                  üéØ Featured Activiteiten\n                  <Badge variant=\"secondary\" className=\"text-xs\">\n                    {activitiesQuery.data?.filter((a: any) => a.featured).length || 0} van {activitiesQuery.data?.length || 0}\n                  </Badge>\n                </h3>\n                \n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                  {activitiesQuery.data?.filter((activity: any) => activity.featured).map((activity: any) => (\n                    <Card key={activity.id} className=\"hover:shadow-lg transition-shadow\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                          <CardTitle className=\"text-lg\">{activity.name}</CardTitle>\n                          <Badge variant=\"default\" className=\"text-xs\">‚≠ê Featured</Badge>\n                        </div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          <Badge variant=\"outline\" className=\"text-xs\">üìç {activity.location}</Badge>\n                          <Badge variant=\"outline\" className=\"text-xs\">üè∑Ô∏è {activity.category}</Badge>\n                          <Badge variant=\"outline\" className=\"text-xs\">#{activity.ranking || 0}</Badge>\n                        </div>\n                        \n                        {/* Activity Image */}\n                        <div className=\"mt-3 rounded-lg overflow-hidden\">\n                          <img\n                            src={activity.image || '/images/activities/placeholder.svg'}\n                            alt={activity.alt || activity.name}\n                            className=\"w-full h-32 object-cover\"\n                            onError={(e) => {\n                              e.currentTarget.src = '/images/activities/placeholder.svg';\n                            }}\n                          />\n                        </div>\n                      </CardHeader>\n                      <CardContent>\n                        <p className=\"text-sm text-gray-600 mb-3\">{activity.description}</p>\n                        <div className=\"flex gap-2\">\n                          <Button \n                            size=\"sm\" \n                            variant=\"outline\"\n                            onClick={() => {\n                              if (activity.websiteUrl) {\n                                window.open(activity.websiteUrl, '_blank');\n                              }\n                            }}\n                            disabled={!activity.websiteUrl}\n                          >\n                            <Eye className=\"h-4 w-4 mr-1\" />\n                            {activity.websiteUrl ? 'Website' : 'Geen link'}\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n                \n                {(!activitiesQuery.data?.filter((a: any) => a.featured).length) && (\n                  <div className=\"text-center py-8 border-2 border-dashed border-gray-200 rounded-lg\">\n                    <div className=\"text-gray-400\">\n                      <h4 className=\"text-lg font-medium mb-2\">Geen featured activiteiten</h4>\n                      <p className=\"text-sm\">Markeer activiteiten als featured in de Activiteiten sectie</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Summary Statistics */}\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold mb-4\">Featured Content Statistieken</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-blue-600\">\n                      {destinationsQuery.data?.filter((d: any) => d.featured).length || 0}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Featured Bestemmingen</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-green-600\">\n                      {activitiesQuery.data?.filter((a: any) => a.featured).length || 0}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Featured Activiteiten</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-purple-600\">\n                      {destinationsQuery.data?.filter((d: any) => d.featured && d.showOnHomepage).length || 0}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Homepage Bestemmingen</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-orange-600\">\n                      {(destinationsQuery.data?.filter((d: any) => d.featured).length || 0) + \n                       (activitiesQuery.data?.filter((a: any) => a.featured).length || 0)}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">Totaal Featured</div>\n                  </div>\n                </div>\n              </div>\n            </TabsContent>\n          )}\n\n          {/* Search Configuration Tab */}\n          {currentUser?.canEditContent && (\n            <TabsContent value=\"search-configs\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Zoekbalk CMS ({searchConfigsQuery.data?.length || 0})</h2>\n                  <p className=\"text-gray-600\">Beheer zoekfunctionaliteit en configuraties per context</p>\n                </div>\n              </div>\n\n              {/* Search Configurations List */}\n              <div className=\"space-y-4\">\n                {searchConfigsQuery.data?.map((config: any) => {\n                  // Calculate counter based on search scope\n                  const getConfigCounter = (scope: string) => {\n                    switch (scope) {\n                      case 'destinations':\n                        return destinationsQuery.data?.length || 0;\n                      case 'activities':\n                        return activitiesQuery.data?.length || 0;\n                      case 'guides':\n                        return guidesQuery.data?.length || 0;\n                      case 'highlights':\n                        return highlightsQuery.data?.length || 0;\n                      case 'all':\n                        return (destinationsQuery.data?.length || 0) + \n                               (activitiesQuery.data?.length || 0) + \n                               (guidesQuery.data?.length || 0) + \n                               (highlightsQuery.data?.length || 0);\n                      default:\n                        return 0;\n                    }\n                  };\n                  \n                  return (\n                  <Card key={config.id} className=\"border\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"space-y-2 flex-1\">\n                          <div className=\"flex items-center gap-3\">\n                            <h3 className=\"text-lg font-semibold\">{config.context}</h3>\n                            <Badge variant={config.isActive ? \"default\" : \"secondary\"}>\n                              {config.isActive ? \"Actief\" : \"Inactief\"}\n                            </Badge>\n                            <Badge variant=\"outline\">{config.searchScope}</Badge>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {getConfigCounter(config.searchScope)} items\n                            </Badge>\n                          </div>\n                          <p className=\"text-gray-600\">{config.placeholderText}</p>\n                          {config.customInstructions && (\n                            <p className=\"text-sm text-gray-500\">{config.customInstructions}</p>\n                          )}\n                          <div className=\"flex gap-2 flex-wrap\">\n                            {config.enableLocationFilter && (\n                              <Badge variant=\"outline\" className=\"text-xs\">üìç Locatie filter</Badge>\n                            )}\n                            {config.enableCategoryFilter && (\n                              <Badge variant=\"outline\" className=\"text-xs\">üè∑Ô∏è Categorie filter</Badge>\n                            )}\n                            {config.enableHighlights && (\n                              <Badge variant=\"outline\" className=\"text-xs\">‚ú® Hoogtepunten</Badge>\n                            )}\n                            {config.enableGuides && (\n                              <Badge variant=\"outline\" className=\"text-xs\">üìñ Reisgidsen</Badge>\n                            )}\n                          </div>\n                          \n\n                        </div>\n                        <div className=\"flex flex-col gap-2\">\n                          <div className=\"flex gap-2\">\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              onClick={() => {\n                                console.log('üëÅÔ∏è View clicked - Before:', { showViewSearchConfig, selectedSearchConfig });\n                                setSelectedSearchConfig(config);\n                                setShowViewSearchConfig(true);\n                                console.log('üëÅÔ∏è View clicked - After state update');\n                                setTimeout(() => {\n                                  console.log('üëÅÔ∏è View clicked - After timeout:', { showViewSearchConfig, selectedSearchConfig });\n                                }, 100);\n                              }}\n                            >\n                              <Eye className=\"h-4 w-4 mr-1\" />\n                              Bekijk\n                            </Button>\n                            <Button \n                              size=\"sm\" \n                              variant=\"outline\"\n                              disabled\n                              title=\"Bewerken tijdelijk uitgeschakeld\"\n                            >\n                              <Edit className=\"h-4 w-4 mr-1\" />\n                              Bewerk\n                            </Button>\n                            <Button \n                              size=\"sm\" \n                              variant=\"destructive\"\n                              onClick={() => handleDeleteSearchConfig(config.id)}\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-1\" />\n                              Verwijder\n                            </Button>\n                          </div>\n                          <Button \n                            size=\"sm\" \n                            variant={config.isActive ? \"default\" : \"outline\"}\n                            onClick={async () => {\n                              try {\n                                const response = await fetch(`/api/admin/search-configs/${config.id}`, {\n                                  method: 'PUT',\n                                  headers: { 'Content-Type': 'application/json' },\n                                  body: JSON.stringify({ isActive: !config.isActive }),\n                                  credentials: 'include',\n                                });\n                                \n                                if (response.ok) {\n                                  toast({ \n                                    title: \"Succes\", \n                                    description: `Zoekfunctie ${!config.isActive ? 'ingeschakeld' : 'uitgeschakeld'}` \n                                  });\n                                  searchConfigsQuery.refetch();\n                                } else {\n                                  const error = await response.json();\n                                  toast({ \n                                    title: \"Fout\", \n                                    description: error.message, \n                                    variant: \"destructive\" \n                                  });\n                                }\n                              } catch (error) {\n                                toast({ \n                                  title: \"Fout\", \n                                  description: \"Er is een fout opgetreden\", \n                                  variant: \"destructive\" \n                                });\n                              }\n                            }}\n                            className={`w-full ${config.isActive ? 'bg-green-600 hover:bg-green-700 text-white' : 'bg-red-100 hover:bg-red-200 text-red-700 border-red-300'}`}\n                          >\n                            {config.isActive ? '‚úÖ Ingeschakeld' : '‚ùå Uitgeschakeld'}\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                );\n                })}\n              </div>\n\n              {/* Loading state */}\n              {searchConfigsQuery.isLoading && (\n                <div className=\"text-center py-8\">\n                  <div className=\"text-gray-400\">Zoek configuraties laden...</div>\n                </div>\n              )}\n\n              {/* Error state */}\n              {searchConfigsQuery.error && (\n                <div className=\"text-center py-8 text-red-600\">\n                  <div>Fout bij laden: {String(searchConfigsQuery.error)}</div>\n                  <Button onClick={() => searchConfigsQuery.refetch()} className=\"mt-2\">\n                    Opnieuw proberen\n                  </Button>\n                </div>\n              )}\n\n              {/* Empty state */}\n              {searchConfigsQuery.data?.length === 0 && !searchConfigsQuery.isLoading && (\n                <Card>\n                  <CardContent className=\"p-12 text-center\">\n                    <div className=\"space-y-3\">\n                      <div className=\"text-4xl\">üîç</div>\n                      <h3 className=\"text-lg font-semibold\">Geen zoek configuraties</h3>\n                      <p className=\"text-gray-600 max-w-md mx-auto\">\n                        Maak je eerste zoek configuratie aan om de zoekfunctionaliteit te beheren\n                      </p>\n                      <Button \n                        onClick={() => {\n                          // Reset form data\n                          setSearchConfigData({\n                            context: '',\n                            placeholderText: '',\n                            searchScope: 'destinations',\n                            enableLocationFilter: false,\n                            enableCategoryFilter: false,\n                            enableHighlights: false,\n                            enableGuides: false,\n                            customInstructions: '',\n                            redirectPattern: '',\n                            isActive: true\n                          });\n                          setShowCreateSearchConfig(true);\n                        }}\n                        className=\"bg-blue-600 hover:bg-blue-700 mt-4\"\n                      >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Eerste Configuratie Aanmaken\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n\n            </TabsContent>\n          )}\n\n          {/* Motivatie Tab */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"motivatie\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Motivatie Sectie</h2>\n                  <p className=\"text-gray-600\">Beheer de \"Laat je verrassen door het onbekende Polen\" sectie op de homepage</p>\n                </div>\n              </div>\n\n              {motivationQuery.isLoading ? (\n                <div className=\"text-center\">Laden...</div>\n              ) : (\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Homepage Motivatie Sectie</CardTitle>\n                    <CardDescription>Bewerk de tekst en afbeelding van de motivatie sectie</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"motivationTitle\">Titel</Label>\n                      <Input\n                        id=\"motivationTitle\"\n                        value={motivationData.title}\n                        onChange={(e) => setMotivationData({ ...motivationData, title: e.target.value })}\n                        placeholder=\"Laat je verrassen door het onbekende Polen\"\n                      />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"motivationDescription\">Beschrijving</Label>\n                      <Textarea\n                        id=\"motivationDescription\"\n                        value={motivationData.description}\n                        onChange={(e) => setMotivationData({ ...motivationData, description: e.target.value })}\n                        placeholder=\"Bezoek historische steden, ontdek natuurparken en verborgen parels...\"\n                        rows={3}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"motivationButtonText\">Button Tekst</Label>\n                        <Input\n                          id=\"motivationButtonText\"\n                          value={motivationData.buttonText}\n                          onChange={(e) => setMotivationData({ ...motivationData, buttonText: e.target.value })}\n                          placeholder=\"Lees onze gidsen\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"motivationButtonAction\">Button Actie</Label>\n                        <Input\n                          id=\"motivationButtonAction\"\n                          value={motivationData.buttonAction}\n                          onChange={(e) => setMotivationData({ ...motivationData, buttonAction: e.target.value })}\n                          placeholder=\"guides\"\n                        />\n                      </div>\n                    </div>\n\n                    <MotivationImageSelector\n                      currentImage={motivationData.image}\n                      onImageSelect={(imagePath) => {\n                        setMotivationData({ ...motivationData, image: imagePath });\n                        // Invalidate homepage motivation cache when image is selected\n                        queryClient.invalidateQueries({ queryKey: [\"/api/motivation\"] });\n                        queryClient.invalidateQueries({ queryKey: [\"/api/motivation/image-location\"] });\n                      }}\n                      onImageUpload={async (file, locationName) => {\n                        try {\n                          console.log('Uploading motivation image:', file.name, 'with location:', locationName);\n                          const imagePath = await uploadImageToFolder(file, 'motivatie', '', '', locationName);\n                          console.log('Upload success, image path:', imagePath);\n                          setMotivationData({ ...motivationData, image: imagePath });\n                          // Invalidate homepage motivation cache\n                          queryClient.invalidateQueries({ queryKey: [\"/api/motivation\"] });\n                          queryClient.invalidateQueries({ queryKey: [\"/api/motivation/image-location\"] });\n                          toast({ \n                            title: \"Succes\", \n                            description: `Afbeelding succesvol ge√ºpload${locationName ? ` met locatie: ${locationName}` : ''}!` \n                          });\n                          return imagePath;\n                        } catch (error) {\n                          console.error('Upload error:', error);\n                          const errorMessage = error instanceof Error ? error.message : \"Kon afbeelding niet uploaden\";\n                          toast({ \n                            title: \"Upload fout\", \n                            description: errorMessage, \n                            variant: \"destructive\" \n                          });\n                          throw error;\n                        }\n                      }}\n                    />\n\n\n\n                    <div className=\"flex justify-end\">\n                      <Button onClick={handleUpdateMotivation}>\n                        <Save className=\"h-4 w-4 mr-2\" />\n                        Wijzigingen Opslaan\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n          )}\n\n          {/* Account Tab - voor alle gebruikers */}\n          <TabsContent value=\"account\" className=\"space-y-6\">\n            <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n              <div>\n                <h2 className=\"text-2xl font-semibold\">Mijn Account</h2>\n                <p className=\"text-gray-600\">Beheer je persoonlijke account instellingen</p>\n              </div>\n            </div>\n            \n            <div className=\"grid gap-6 md:grid-cols-2\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Account Informatie</CardTitle>\n                  <CardDescription>Je huidige account gegevens</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <Label>Gebruikersnaam</Label>\n                    <div className=\"font-medium\">{currentUser?.username}</div>\n                  </div>\n                  <div>\n                    <Label>Rol</Label>\n                    <div className=\"font-medium\">\n                      {currentUser?.role === 'admin' ? 'Administrator' : 'Gebruiker'}\n                    </div>\n                  </div>\n                  <div>\n                    <Label>Permissies</Label>\n                    <div className=\"flex gap-2 mt-2\">\n                      {currentUser?.canCreateContent && <Badge variant=\"outline\">Aanmaken</Badge>}\n                      {currentUser?.canEditContent && <Badge variant=\"outline\">Bewerken</Badge>}\n                      {currentUser?.canDeleteContent && <Badge variant=\"outline\">Verwijderen</Badge>}\n                      {currentUser?.canManageUsers && <Badge variant=\"default\">Gebruikersbeheer</Badge>}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Wachtwoord Wijzigen</CardTitle>\n                  <CardDescription>Wijzig je huidige wachtwoord</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <ChangePasswordForm />\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          {/* Recycle Bin Tab */}\n          {(currentUser?.canDeleteContent || currentUser?.canEditContent) && (\n            <TabsContent value=\"recycle\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Prullenbak</h2>\n                  <p className=\"text-gray-600\">Hier kun je verwijderde content bekijken en herstellen</p>\n                </div>\n              </div>\n              \n              <div className=\"grid gap-6 md:grid-cols-2\">\n                {/* Verwijderde Bestemmingen */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Verwijderde Bestemmingen</CardTitle>\n                    <CardDescription>Items die naar de prullenbak zijn verplaatst</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"text-sm text-gray-500\">\n                      Verwijderde bestemmingen verschijnen hier\n                    </div>\n                    <div className=\"space-y-2\">\n                      {deletedDestinationsQuery.data && deletedDestinationsQuery.data.length > 0 ? (\n                        deletedDestinationsQuery.data.map((destination: any) => (\n                          <div key={destination.id} className=\"border rounded-lg p-3\">\n                            <div className=\"flex justify-between items-start\">\n                              <div>\n                                <h4 className=\"font-medium\">{destination.name}</h4>\n                                <p className=\"text-sm text-gray-500 truncate\">{destination.description}</p>\n                                <p className=\"text-xs text-gray-400\">\n                                  Verwijderd: {new Date(destination.deleted_at).toLocaleDateString('nl-NL')}\n                                </p>\n                              </div>\n                              <div className=\"flex gap-1\">\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline\"\n                                  onClick={() => handleRestoreDestination(destination.id)}\n                                  title=\"Herstellen\"\n                                >\n                                  <Plus className=\"h-3 w-3\" />\n                                </Button>\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"destructive\"\n                                  onClick={() => handlePermanentDeleteDestination(destination.id)}\n                                  title=\"Permanent verwijderen\"\n                                >\n                                  <Trash2 className=\"h-3 w-3\" />\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        ))\n                      ) : (\n                        <div className=\"text-center py-8 text-gray-400\">\n                          <Trash2 className=\"h-8 w-8 mx-auto mb-2\" />\n                          <p>Geen verwijderde bestemmingen</p>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Verwijderde Reisgidsen */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Verwijderde Reizen</CardTitle>\n                    <CardDescription>Items die naar de prullenbak zijn verplaatst</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"text-sm text-gray-500\">\n                      Verwijderde reizen verschijnen hier\n                    </div>\n                    <div className=\"space-y-2\">\n                      {deletedGuidesQuery.data && deletedGuidesQuery.data.length > 0 ? (\n                        deletedGuidesQuery.data.map((guide: any) => (\n                          <div key={guide.id} className=\"border rounded-lg p-3\">\n                            <div className=\"flex justify-between items-start\">\n                              <div>\n                                <h4 className=\"font-medium\">{guide.title}</h4>\n                                <p className=\"text-sm text-gray-500 truncate\">{guide.description}</p>\n                                <p className=\"text-xs text-gray-400\">\n                                  Verwijderd: {new Date(guide.deleted_at).toLocaleDateString('nl-NL')}\n                                </p>\n                              </div>\n                              <div className=\"flex gap-1\">\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"outline\"\n                                  onClick={() => handleRestoreGuide(guide.id)}\n                                  title=\"Herstellen\"\n                                >\n                                  <Plus className=\"h-3 w-3\" />\n                                </Button>\n                                <Button \n                                  size=\"sm\" \n                                  variant=\"destructive\"\n                                  onClick={() => handlePermanentDeleteGuide(guide.id)}\n                                  title=\"Permanent verwijderen\"\n                                >\n                                  <Trash2 className=\"h-3 w-3\" />\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        ))\n                      ) : (\n                        <div className=\"text-center py-8 text-gray-400\">\n                          <Trash2 className=\"h-8 w-8 mx-auto mb-2\" />\n                          <p>Geen verwijderde reisgidsen</p>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Verwijderde Afbeeldingen */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>Gearchiveerde & Verwijderde Afbeeldingen</CardTitle>\n                  <CardDescription>Afbeeldingen die automatisch gearchiveerd zijn bij upload of handmatig verwijderd</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    {trashedImagesQuery.data && trashedImagesQuery.data.length > 0 ? (\n                      trashedImagesQuery.data.map((image: any) => (\n                        <div key={image.trashName} className=\"border rounded-lg p-3\">\n                          <div className=\"flex justify-between items-start\">\n                            <div className=\"flex-1\">\n                              <h4 className=\"font-medium\">{image.originalName}</h4>\n                              <p className=\"text-sm text-gray-500\">{image.trashName}</p>\n                              <p className=\"text-xs text-gray-400\">\n                                {image.reason === \"Auto-archived before new upload\" ? \"Gearchiveerd\" : \"Verwijderd\"}: {new Date(image.movedAt).toLocaleDateString('nl-NL', {\n                                  day: 'numeric',\n                                  month: 'long',\n                                  year: 'numeric',\n                                  hour: '2-digit',\n                                  minute: '2-digit'\n                                })}\n                              </p>\n                            </div>\n                            <div className=\"flex gap-1\">\n                              <Button \n                                size=\"sm\" \n                                variant=\"outline\"\n                                onClick={() => handleRestoreImage(image.trashName, image.originalName)}\n                                title=\"Afbeelding herstellen\"\n                              >\n                                <RotateCcw className=\"h-3 w-3\" />\n                              </Button>\n                              <Button \n                                size=\"sm\" \n                                variant=\"destructive\"\n                                onClick={() => handlePermanentDeleteImage(image.trashName)}\n                                title=\"Permanent verwijderen\"\n                              >\n                                <Trash className=\"h-3 w-3\" />\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      ))\n                    ) : (\n                      <div className=\"text-center py-8 text-gray-400\">\n                        <ImageIcon className=\"h-8 w-8 mx-auto mb-2\" />\n                        <p>Geen verwijderde afbeeldingen</p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Prullenbak Acties</CardTitle>\n                  <CardDescription>Beheer je verwijderde content en afbeeldingen</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <h4 className=\"font-medium mb-2\">Content Acties</h4>\n                      <div className=\"flex flex-col gap-2\">\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\"\n                          disabled={(deletedDestinationsQuery.data?.length || 0) === 0 && (deletedGuidesQuery.data?.length || 0) === 0}\n                        >\n                          <Plus className=\"h-4 w-4 mr-2\" />\n                          Alle Content Herstellen ({(deletedDestinationsQuery.data?.length || 0) + (deletedGuidesQuery.data?.length || 0)})\n                        </Button>\n                        <Button \n                          variant=\"destructive\" \n                          size=\"sm\"\n                          disabled={(deletedDestinationsQuery.data?.length || 0) === 0 && (deletedGuidesQuery.data?.length || 0) === 0}\n                        >\n                          <Trash2 className=\"h-4 w-4 mr-2\" />\n                          Content Prullenbak Leegmaken\n                        </Button>\n                      </div>\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium mb-2\">Afbeelding Acties</h4>\n                      <div className=\"flex flex-col gap-2\">\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\"\n                          disabled={!trashedImagesQuery.data || trashedImagesQuery.data.length === 0}\n                        >\n                          <RotateCcw className=\"h-4 w-4 mr-2\" />\n                          Alle Afbeeldingen Herstellen ({trashedImagesQuery.data?.length || 0})\n                        </Button>\n                        <Button \n                          variant=\"destructive\" \n                          size=\"sm\"\n                          onClick={() => handleEmptyImageTrash()}\n                          disabled={!trashedImagesQuery.data || trashedImagesQuery.data.length === 0 || !currentUser?.canDeleteContent}\n                        >\n                          <Trash className=\"h-4 w-4 mr-2\" />\n                          Afbeelding Prullenbak Leegmaken\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"text-sm text-gray-600 pt-2 border-t\">\n                    <p>üí° Tip: Verwijderde content en afbeeldingen blijven beschikbaar voor herstel</p>\n                    <p>üîÑ Afbeeldingen worden automatisch gearchiveerd voordat nieuwe uploads conflicten veroorzaken</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          )}\n\n          {/* Site Settings - alleen voor admins */}\n          {currentUser?.role === 'admin' && (\n            <TabsContent value=\"site-settings\" className=\"space-y-6\">\n              <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Site Instellingen</h2>\n                  <p className=\"text-gray-600\">Beheer de algemene instellingen van je website</p>\n                </div>\n                <Button \n                  onClick={handleSaveSiteSettings} \n                  className=\"flex items-center gap-2\"\n                  disabled={siteSettingsQuery.isLoading}\n                >\n                  <Save className=\"h-4 w-4\" />\n                  {siteSettingsQuery.isLoading ? 'Laden...' : 'Instellingen Opslaan'}\n                </Button>\n              </div>\n\n              <div className=\"grid gap-6 lg:grid-cols-2\">\n                {/* Basis Site Informatie */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Basis Informatie</CardTitle>\n                    <CardDescription>Algemene site instellingen en metadata</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"siteName\">Site Naam</Label>\n                      <Input\n                        id=\"siteName\"\n                        value={siteSettings.siteName}\n                        onChange={(e) => setSiteSettings({...siteSettings, siteName: e.target.value})}\n                        placeholder=\"Ontdek Polen\"\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"siteDescription\">Site Beschrijving</Label>\n                      <Textarea\n                        id=\"siteDescription\"\n                        value={siteSettings.siteDescription}\n                        onChange={(e) => setSiteSettings({...siteSettings, siteDescription: e.target.value})}\n                        placeholder=\"Ontdek de mooiste plekken van Polen\"\n                        rows={3}\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"metaKeywords\">Meta Keywords</Label>\n                      <Input\n                        id=\"metaKeywords\"\n                        value={siteSettings.metaKeywords}\n                        onChange={(e) => setSiteSettings({...siteSettings, metaKeywords: e.target.value})}\n                        placeholder=\"Polen, reizen, vakantie, bestemmingen\"\n                      />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Header Display Settings */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Header Weergave</CardTitle>\n                    <CardDescription>Instellingen voor header overlay en weergave</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"space-y-0.5\">\n                        <Label htmlFor=\"headerOverlayEnabled\">Header Overlay</Label>\n                        <p className=\"text-sm text-gray-600\">\n                          Voeg een donkere overlay toe over alle header afbeeldingen voor betere tekstleesbaarheid\n                        </p>\n                      </div>\n                      <Switch\n                        id=\"headerOverlayEnabled\"\n                        checked={siteSettings.headerOverlayEnabled}\n                        onCheckedChange={(checked) => setSiteSettings({...siteSettings, headerOverlayEnabled: checked})}\n                      />\n                    </div>\n                    \n                    {siteSettings.headerOverlayEnabled && (\n                      <div className=\"space-y-2\">\n                        <Label htmlFor=\"headerOverlayOpacity\">Overlay Intensiteit: {siteSettings.headerOverlayOpacity}%</Label>\n                        <input\n                          type=\"range\"\n                          id=\"headerOverlayOpacity\"\n                          min=\"10\"\n                          max=\"70\"\n                          step=\"5\"\n                          value={siteSettings.headerOverlayOpacity}\n                          onChange={(e) => setSiteSettings({...siteSettings, headerOverlayOpacity: parseInt(e.target.value)})}\n                          className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider\"\n                        />\n                        <div className=\"flex justify-between text-xs text-gray-500\">\n                          <span>Licht (10%)</span>\n                          <span>Donker (70%)</span>\n                        </div>\n                        <p className=\"text-xs text-gray-600\">\n                          üí° Tip: Lagere waarden voor lichtere afbeeldingen, hogere waarden voor donkere afbeeldingen\n                        </p>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                {/* Afbeeldingen */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Site Afbeeldingen</CardTitle>\n                    <CardDescription>Logo, achtergrond en social media afbeeldingen</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <SiteImageUploadField\n                      label=\"Achtergrond Afbeelding\"\n                      value={siteSettings.backgroundImage}\n                      onChange={(imagePath) => setSiteSettings({...siteSettings, backgroundImage: imagePath})}\n                      imageType=\"background\"\n                    />\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"backgroundImageAlt\">Achtergrond Alt Tekst</Label>\n                      <Input\n                        id=\"backgroundImageAlt\"\n                        value={siteSettings.backgroundImageAlt}\n                        onChange={(e) => setSiteSettings({...siteSettings, backgroundImageAlt: e.target.value})}\n                        placeholder=\"Beschrijving van de achtergrond afbeelding\"\n                      />\n                    </div>\n                    \n                    <SiteImageUploadField\n                      label=\"Logo Afbeelding\"\n                      value={siteSettings.logoImage}\n                      onChange={(imagePath) => setSiteSettings({...siteSettings, logoImage: imagePath})}\n                      imageType=\"logo\"\n                    />\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"logoImageAlt\">Logo Alt Tekst</Label>\n                      <Input\n                        id=\"logoImageAlt\"\n                        value={siteSettings.logoImageAlt}\n                        onChange={(e) => setSiteSettings({...siteSettings, logoImageAlt: e.target.value})}\n                        placeholder=\"Logo beschrijving\"\n                      />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Social Media & SEO */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Social Media & SEO</CardTitle>\n                    <CardDescription>Instellingen voor social media sharing en SEO</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <SiteImageUploadField\n                      label=\"Social Media Afbeelding\"\n                      value={siteSettings.socialMediaImage}\n                      onChange={(imagePath) => setSiteSettings({...siteSettings, socialMediaImage: imagePath})}\n                      imageType=\"social\"\n                    />\n                    \n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        <Switch\n                          id=\"faviconEnabled\"\n                          checked={siteSettings.faviconEnabled ?? true}\n                          onCheckedChange={async (checked) => {\n                            setSiteSettings({...siteSettings, faviconEnabled: checked});\n                            // Direct save to database for immediate effect\n                            try {\n                              await apiRequest('/api/admin/site-settings', {\n                                method: 'PUT',\n                                body: JSON.stringify({...siteSettings, faviconEnabled: checked})\n                              });\n                              queryClient.invalidateQueries({ queryKey: ['/api/site-settings'] });\n                              toast({ title: \"Succes\", description: `Favicon ${checked ? 'ingeschakeld' : 'uitgeschakeld'}` });\n                            } catch (error) {\n                              toast({ title: \"Fout\", description: \"Kon favicon instelling niet opslaan\", variant: \"destructive\" });\n                            }\n                          }}\n                        />\n                        <Label htmlFor=\"faviconEnabled\">Favicon inschakelen</Label>\n                      </div>\n                      \n                      {siteSettings.faviconEnabled && (\n                        <FaviconUploadField\n                          label=\"Favicon\"\n                          value={siteSettings.favicon}\n                          onChange={(faviconPath) => setSiteSettings({...siteSettings, favicon: faviconPath})}\n                        />\n                      )}\n                      \n                      {!siteSettings.faviconEnabled && (\n                        <div className=\"p-3 bg-gray-100 border border-gray-200 rounded-lg\">\n                          <p className=\"text-sm text-gray-600\">\n                            Favicon is uitgeschakeld. Schakel in om een favicon te uploaden en te beheren.\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"googleAnalyticsId\">Google Analytics ID</Label>\n                      <Input\n                        id=\"googleAnalyticsId\"\n                        value={siteSettings.googleAnalyticsId}\n                        onChange={(e) => setSiteSettings({...siteSettings, googleAnalyticsId: e.target.value})}\n                        placeholder=\"G-XXXXXXXXXX\"\n                      />\n                    </div>\n                  </CardContent>\n                </Card>\n\n                {/* Custom Code */}\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Custom Code</CardTitle>\n                    <CardDescription>Aangepaste CSS en JavaScript code</CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"customCSS\">Custom CSS</Label>\n                      <Textarea\n                        id=\"customCSS\"\n                        value={siteSettings.customCSS}\n                        onChange={(e) => setSiteSettings({...siteSettings, customCSS: e.target.value})}\n                        placeholder=\"/* Aangepaste CSS styling */\"\n                        rows={5}\n                        className=\"font-mono text-sm\"\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"customJS\">Custom JavaScript</Label>\n                      <Textarea\n                        id=\"customJS\"\n                        value={siteSettings.customJS}\n                        onChange={(e) => setSiteSettings({...siteSettings, customJS: e.target.value})}\n                        placeholder=\"// Aangepaste JavaScript code\"\n                        rows={5}\n                        className=\"font-mono text-sm\"\n                      />\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Homepage Content Visibility Controls */}\n              <Card className=\"lg:col-span-2\">\n                <CardHeader>\n                  <CardTitle>Homepage Content Zichtbaarheid</CardTitle>\n                  <CardDescription>Beheer welke secties zichtbaar zijn op de homepage</CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {/* Bestemmingen Sectie */}\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">üèîÔ∏è</div>\n                        <div>\n                          <p className=\"font-medium\">Bestemmingen</p>\n                          <p className=\"text-sm text-gray-500\">Hoofdcards van bestemmingen</p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={siteSettings.showDestinations}\n                        onCheckedChange={(checked) => \n                          setSiteSettings({...siteSettings, showDestinations: checked})\n                        }\n                      />\n                    </div>\n\n                    {/* Motivatie Sectie */}\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">üí´</div>\n                        <div>\n                          <p className=\"font-medium\">Motivatie Sectie</p>\n                          <p className=\"text-sm text-gray-500\">Call-to-action banner</p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={siteSettings.showMotivation}\n                        onCheckedChange={(checked) => \n                          setSiteSettings({...siteSettings, showMotivation: checked})\n                        }\n                      />\n                    </div>\n\n                    {/* Hoogtepunten Sectie */}\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">‚ú®</div>\n                        <div>\n                          <p className=\"font-medium\">Hoogtepunten</p>\n                          <p className=\"text-sm text-gray-500\">Featured highlights grid</p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={siteSettings.showHighlights}\n                        onCheckedChange={(checked) => \n                          setSiteSettings({...siteSettings, showHighlights: checked})\n                        }\n                      />\n                    </div>\n\n                    {/* Ontdek Meer Sectie */}\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">üìÑ</div>\n                        <div>\n                          <p className=\"font-medium\">Ontdek Meer</p>\n                          <p className=\"text-sm text-gray-500\">Template-gebaseerde pagina's</p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={siteSettings.showOntdekMeer}\n                        onCheckedChange={(checked) => \n                          setSiteSettings({...siteSettings, showOntdekMeer: checked})\n                        }\n                      />\n                    </div>\n\n                    {/* Reizen Sectie */}\n                    <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"text-2xl\">üìñ</div>\n                        <div>\n                          <p className=\"font-medium\">Reizen</p>\n                          <p className=\"text-sm text-gray-500\">Reizen sectie</p>\n                        </div>\n                      </div>\n                      <Switch\n                        checked={siteSettings.showGuides}\n                        onCheckedChange={(checked) => \n                          setSiteSettings({...siteSettings, showGuides: checked})\n                        }\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <p className=\"text-sm text-blue-800\">\n                      <strong>üí° Tip:</strong> Uitgeschakelde secties worden volledig verborgen op de homepage. \n                      Content blijft wel beschikbaar via directe links en in de admin interface.\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <div className=\"text-sm text-gray-600 pt-4 border-t\">\n                <p>üí° Tip: Gebruik de achtergrond afbeelding voor een mooie header op je website</p>\n                <p>üé® Custom CSS en JavaScript worden automatisch geladen op alle pagina's</p>\n                <p>üìä Google Analytics tracking wordt actief zodra je een geldig tracking ID invult</p>\n              </div>\n            </TabsContent>\n          )}\n\n          {/* Pages Tab Content */}\n          {currentUser?.canCreateContent && (\n            <TabsContent value=\"pages\" className=\"space-y-6\">\n              <div className=\"flex justify-between items-center\">\n                <div>\n                  <h2 className=\"text-2xl font-semibold\">Pagina's</h2>\n                  <p className=\"text-gray-600\">Beheer je statische pagina's</p>\n                </div>\n                <Button variant=\"outline\" onClick={() => setShowCreatePage(true)}>\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Nieuwe Pagina\n                </Button>\n              </div>\n              \n              <PageManagement templates={templatesQuery.data || []} />\n            </TabsContent>\n          )}\n\n          {/* Templates Tab Content */}\n          <TabsContent value=\"templates\" className=\"space-y-6\">\n            {currentUser && currentUser.role !== 'admin' ? (\n              <Card>\n                <CardContent className=\"p-6 text-center\">\n                  <p className=\"text-gray-600\">Je hebt geen toegang tot deze functie. Alleen administrators kunnen templates beheren.</p>\n                </CardContent>\n              </Card>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-center\">\n                  <div>\n                    <h2 className=\"text-2xl font-semibold\">Templates</h2>\n                    <p className=\"text-gray-600\">Beheer templates voor pagina's en content</p>\n                  </div>\n                  <Button variant=\"outline\" onClick={() => setShowCreateTemplate(true)}>\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Nieuwe Template\n                  </Button>\n                </div>\n                \n                <TemplateManagement />\n              </>\n            )}\n          </TabsContent>\n\n        </Tabs>\n\n        {/* Create User Dialog */}\n        {showCreateUser && (\n          <CreateUserDialog \n            open={showCreateUser} \n            onOpenChange={setShowCreateUser}\n            onUserCreated={() => {\n              usersQuery.refetch();\n              setShowCreateUser(false);\n            }}\n          />\n        )}\n\n        {/* Edit User Dialog */}\n        {showEditUser && selectedUser && (\n          <EditUserDialog \n            open={showEditUser} \n            onOpenChange={setShowEditUser}\n            user={selectedUser}\n            onUserUpdated={() => {\n              usersQuery.refetch();\n              setShowEditUser(false);\n            }}\n          />\n        )}\n\n        {/* Reset Password Dialog */}\n        {showResetPassword && selectedUser && (\n          <ResetPasswordDialog \n            open={showResetPassword} \n            onOpenChange={setShowResetPassword}\n            user={selectedUser}\n            onPasswordReset={() => {\n              setShowResetPassword(false);\n            }}\n          />\n        )}\n\n        {/* Edit Destination Dialog */}\n        {showEditDestination && selectedDestination && (\n          <EditDestinationDialog \n            open={showEditDestination} \n            onOpenChange={setShowEditDestination}\n            destination={selectedDestination}\n            editData={editDestinationData}\n            setEditData={setEditDestinationData}\n            onSave={() => {\n              destinationsQuery.refetch();\n              setShowEditDestination(false);\n            }}\n          />\n        )}\n\n        {/* View Destination Dialog */}\n        {showViewDestination && selectedDestination && (\n          <ViewDestinationDialog \n            open={showViewDestination} \n            onOpenChange={setShowViewDestination}\n            destination={selectedDestination}\n          />\n        )}\n\n        {/* View Search Config Dialog */}\n        {showViewSearchConfig && selectedSearchConfig && (\n          <ViewSearchConfigDialog \n            open={showViewSearchConfig} \n            onOpenChange={setShowViewSearchConfig}\n            searchConfig={selectedSearchConfig}\n          />\n        )}\n\n        {/* Edit Guide Dialog */}\n        {showEditGuide && selectedGuide && (\n          <EditGuideDialog \n            open={showEditGuide} \n            onOpenChange={setShowEditGuide}\n            guide={selectedGuide}\n            editData={editGuideData}\n            setEditData={setEditGuideData}\n            onSave={() => {\n              guidesQuery.refetch();\n              setShowEditGuide(false);\n            }}\n          />\n        )}\n\n        {/* View Guide Dialog */}\n        {showViewGuide && selectedGuide && (\n          <ViewGuideDialog \n            open={showViewGuide} \n            onOpenChange={setShowViewGuide}\n            guide={selectedGuide}\n          />\n        )}\n\n        {/* Template Dialogs */}\n        {showCreateTemplate && (\n          <CreateTemplateDialog \n            open={showCreateTemplate} \n            onOpenChange={setShowCreateTemplate}\n            onTemplateCreated={() => {\n              templatesQuery.refetch();\n              setShowCreateTemplate(false);\n            }}\n          />\n        )}\n\n        {showEditTemplate && selectedTemplate && (\n          <EditTemplateDialog \n            open={showEditTemplate} \n            onOpenChange={setShowEditTemplate}\n            template={selectedTemplate}\n            onTemplateUpdated={() => {\n              templatesQuery.refetch();\n              setShowEditTemplate(false);\n            }}\n          />\n        )}\n\n        {showViewTemplate && selectedTemplate && (\n          <ViewTemplateDialog \n            open={showViewTemplate} \n            onOpenChange={setShowViewTemplate}\n            template={selectedTemplate}\n          />\n        )}\n\n        {/* Page Dialogs */}\n        {showCreatePage && (\n          <CreatePageDialog \n            open={showCreatePage} \n            onOpenChange={setShowCreatePage}\n            templates={templatesQuery.data || []}\n            onPageCreated={() => {\n              pagesQuery.refetch();\n              setShowCreatePage(false);\n            }}\n          />\n        )}\n\n        {showEditPage && selectedPage && (\n          <EditPageDialog \n            open={showEditPage} \n            onOpenChange={setShowEditPage}\n            page={selectedPage}\n            templates={templatesQuery.data || []}\n            onPageUpdated={() => {\n              pagesQuery.refetch();\n              setShowEditPage(false);\n            }}\n          />\n        )}\n\n        {showViewPage && selectedPage && (\n          <ViewPageDialog \n            open={showViewPage} \n            onOpenChange={setShowViewPage}\n            page={selectedPage}\n          />\n        )}\n\n        {/* Highlights Dialogs */}\n        {showCreateHighlight && (\n          <CreateHighlightDialog \n            open={showCreateHighlight} \n            onOpenChange={setShowCreateHighlight}\n            onHighlightCreated={() => {\n              highlightsQuery.refetch();\n              setShowCreateHighlight(false);\n            }}\n          />\n        )}\n\n        {showEditHighlight && selectedHighlight && (\n          <EditHighlightDialog \n            open={showEditHighlight} \n            onOpenChange={setShowEditHighlight}\n            highlight={selectedHighlight}\n            editData={editHighlightData}\n            setEditData={setEditHighlightData}\n            onSave={() => {\n              highlightsQuery.refetch();\n              setShowEditHighlight(false);\n            }}\n          />\n        )}\n\n        {showViewHighlight && selectedHighlight && (\n          <ViewHighlightDialog \n            open={showViewHighlight} \n            onOpenChange={setShowViewHighlight}\n            highlight={selectedHighlight}\n          />\n        )}\n\n        {/* Create Destination Dialog */}\n        {showCreateDestination && (\n          <CreateDestinationDialog \n            open={showCreateDestination} \n            onOpenChange={setShowCreateDestination}\n            onDestinationCreated={() => {\n              destinationsQuery.refetch();\n              setShowCreateDestination(false);\n            }}\n          />\n        )}\n\n        {/* Create Guide Dialog */}\n        {showCreateGuide && (\n          <CreateGuideDialog \n            open={showCreateGuide} \n            onOpenChange={setShowCreateGuide}\n            onGuideCreated={() => {\n              guidesQuery.refetch();\n              setShowCreateGuide(false);\n            }}\n          />\n        )}\n\n        {/* Activity Create Dialog */}\n        {showCreateActivity && (\n          <CreateActivityDialog \n            open={showCreateActivity} \n            onOpenChange={setShowCreateActivity}\n            onActivityCreated={() => {\n              activitiesQuery.refetch();\n              setShowCreateActivity(false);\n            }}\n          />\n        )}\n\n        {/* Activity Edit Dialog */}\n        {showEditActivity && selectedActivity && (\n          <EditActivityDialog \n            open={showEditActivity} \n            onOpenChange={setShowEditActivity}\n            activity={selectedActivity}\n            onActivityUpdated={() => {\n              activitiesQuery.refetch();\n              setShowEditActivity(false);\n            }}\n          />\n        )}\n\n        {/* Activity View Dialog */}\n        {showViewActivity && selectedActivity && (\n          <ViewActivityDialog \n            open={showViewActivity} \n            onOpenChange={setShowViewActivity}\n            activity={selectedActivity}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Image Cropper Dialog Component\nfunction ImageCropperDialog({ imagePath, onCroppedImage, destination }: {\n  imagePath: string;\n  onCroppedImage: (croppedImagePath: string) => void;\n  destination?: string;\n}) {\n  const [open, setOpen] = useState(false);\n  const [crop, setCrop] = useState<Crop>({\n    unit: '%',\n    width: 90,\n    height: 41, // 90/2.2 ‚âà 41% voor 2.2:1 aspect ratio\n    x: 5,\n    y: 30\n  });\n  const [completedCrop, setCompletedCrop] = useState<PixelCrop>();\n  const [aspect, setAspect] = useState<number>(2.2); // Default site header aspect ratio\n  const [scale, setScale] = useState(1);\n  const [rotate, setRotate] = useState(0);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n  const { toast } = useToast();\n\n  // Berekend gebaseerd op site header: py-24 = 6rem (96px) padding boven en onder\n  // Typische viewport: 1920x1080 - 192px padding = 888px effectieve hoogte\n  // Aspect ratio: 1920/888 ‚âà 2.16:1 voor desktop\n  // Voor responsief ontwerp gebruiken we 2.2:1 als optimaal\n  const aspectRatios = [\n    { name: 'Site Header (2.2:1)', value: 2.2 }, // Exact match voor site headers\n    { name: 'Wide Header (2.5:1)', value: 2.5 },\n    { name: 'Banner (3:1)', value: 3 },\n    { name: 'Widescreen (16:9)', value: 16/9 },\n    { name: 'Landscape (4:3)', value: 4/3 },\n    { name: 'Square (1:1)', value: 1 },\n    { name: 'Portrait (3:4)', value: 3/4 },\n    { name: 'Vrije vorm', value: 0 }\n  ];\n\n  const updateCropForAspectRatio = (newAspect: number, imageWidth?: number, imageHeight?: number) => {\n    const imgWidth = imageWidth || imgRef.current?.width || 800;\n    const imgHeight = imageHeight || imgRef.current?.height || 600;\n    \n    if (newAspect > 0) {\n      const cropWidth = 90;\n      const cropHeight = (cropWidth / newAspect) * (imgWidth / imgHeight);\n      const cropY = Math.max(0, (100 - cropHeight) / 2);\n      \n      const newCrop: Crop = {\n        unit: '%',\n        width: cropWidth,\n        height: Math.min(cropHeight, 95),\n        x: 5,\n        y: cropY\n      };\n      setCrop(newCrop);\n    } else {\n      // Vrije vorm\n      setCrop({\n        unit: '%',\n        width: 50,\n        height: 50,\n        x: 25,\n        y: 25\n      });\n    }\n  };\n\n  const onImageLoad = (e: React.SyntheticEvent<HTMLImageElement>) => {\n    const { width, height } = e.currentTarget;\n    updateCropForAspectRatio(aspect, width, height);\n  };\n\n  const handleAspectChange = (newAspect: number) => {\n    setAspect(newAspect);\n    updateCropForAspectRatio(newAspect);\n  };\n\n  const getCroppedImg = async (\n    image: HTMLImageElement,\n    crop: PixelCrop,\n    scale: number,\n    rotate: number\n  ): Promise<string> => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    \n    if (!ctx) {\n      throw new Error('No 2d context');\n    }\n    \n    // Exacte header afmetingen - gebaseerd op werkelijke CSS py-24 padding\n    const HEADER_WIDTH = 1920;\n    const HEADER_HEIGHT = 873; // Exact 2.2:1 ratio zoals in werkelijke header\n\n    canvas.width = HEADER_WIDTH;\n    canvas.height = HEADER_HEIGHT;\n\n    ctx.imageSmoothingQuality = 'high';\n\n    const scaleX = image.naturalWidth / image.width;\n    const scaleY = image.naturalHeight / image.height;\n\n    // Bereken crop coordinaten in natuurlijke afmetingen\n    const sourceX = crop.x * scaleX;\n    const sourceY = crop.y * scaleY;\n    const sourceWidth = crop.width * scaleX;\n    const sourceHeight = crop.height * scaleY;\n\n    // Vul het hele canvas met de gecroppte afbeelding - geen zwarte randen\n    ctx.fillStyle = '#000000';\n    ctx.fillRect(0, 0, HEADER_WIDTH, HEADER_HEIGHT);\n    \n    // Bereken optimale schaling om het canvas te vullen terwijl aspect ratio behouden blijft\n    const scaleToFitWidth = HEADER_WIDTH / sourceWidth;\n    const scaleToFitHeight = HEADER_HEIGHT / sourceHeight;\n    const scaleToFit = Math.max(scaleToFitWidth, scaleToFitHeight) * scale;\n    \n    const scaledWidth = sourceWidth * scaleToFit;\n    const scaledHeight = sourceHeight * scaleToFit;\n    \n    // Centreer de afbeelding\n    const offsetX = (HEADER_WIDTH - scaledWidth) / 2;\n    const offsetY = (HEADER_HEIGHT - scaledHeight) / 2;\n\n    ctx.save();\n    \n    // Rotatie toepassen rond het midden van het canvas\n    if (rotate !== 0) {\n      ctx.translate(HEADER_WIDTH / 2, HEADER_HEIGHT / 2);\n      ctx.rotate((rotate * Math.PI) / 180);\n      ctx.translate(-HEADER_WIDTH / 2, -HEADER_HEIGHT / 2);\n    }\n    \n    // Teken de gecroppte afbeelding om het hele canvas te vullen\n    ctx.drawImage(\n      image,\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n      offsetX,\n      offsetY,\n      scaledWidth,\n      scaledHeight\n    );\n    \n    ctx.restore();\n\n    return new Promise((resolve, reject) => {\n      canvas.toBlob(\n        (blob) => {\n          if (!blob) {\n            reject(new Error('Canvas is empty'));\n            return;\n          }\n          resolve(URL.createObjectURL(blob));\n        },\n        'image/jpeg',\n        0.95\n      );\n    });\n  };\n\n  const handleCropComplete = async () => {\n    if (!completedCrop || !imgRef.current) return;\n\n    setIsProcessing(true);\n    try {\n      const croppedImageUrl = await getCroppedImg(\n        imgRef.current,\n        completedCrop,\n        scale,\n        rotate\n      );\n\n      // Upload de gecroppte afbeelding\n      const response = await fetch(croppedImageUrl);\n      const blob = await response.blob();\n      \n      const formData = new FormData();\n      const pathParts = imagePath.split('/');\n      let destinationFolder = destination;\n      \n      // Als destination niet is opgegeven, probeer het uit het path te halen\n      if (!destinationFolder) {\n        destinationFolder = pathParts[pathParts.length - 2]; // Get destination from path\n      }\n      \n      const originalName = pathParts[pathParts.length - 1];\n      const baseName = originalName.split('.')[0];\n      const filename = `${baseName}-cropped-${Date.now()}`; // Geen extensie, server voegt .jpg toe\n      \n      formData.append('image', blob, filename);\n      if (destinationFolder) {\n        formData.append('destination', destinationFolder);\n      }\n      formData.append('fileName', filename);\n\n      const uploadResponse = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n        credentials: 'include',\n      });\n\n      if (!uploadResponse.ok) {\n        throw new Error('Upload failed');\n      }\n\n      const result = await uploadResponse.json();\n      \n      toast({\n        title: \"Succes\",\n        description: \"Afbeelding is succesvol gecroppt en opgeslagen\",\n      });\n\n      onCroppedImage(result.path);\n      setOpen(false);\n    } catch (error) {\n      console.error('Error cropping image:', error);\n      toast({\n        title: \"Fout\",\n        description: \"Er ging iets mis bij het croppen van de afbeelding\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const resetCrop = () => {\n    setScale(1);\n    setRotate(0);\n    updateCropForAspectRatio(aspect);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"flex-1 text-xs\"\n        >\n          <CropIcon className=\"h-3 w-3 mr-1\" />\n          Crop\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Afbeelding Croppen & Bewerken</DialogTitle>\n          <DialogDescription>\n            Selecteer het gewenste gebied van de afbeelding. De uitvoer wordt altijd 1920x873 pixels (2.2:1) voor perfecte header weergave.\n            Gebruik de crop, scale en rotate tools om de afbeelding optimaal uit te lijnen.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Crop Area */}\n          <div className=\"lg:col-span-2 space-y-4\">\n            <div className=\"border rounded-lg p-4 bg-gray-50\">\n              <ReactCrop\n                crop={crop}\n                onChange={(c) => setCrop(c)}\n                onComplete={(c) => setCompletedCrop(c)}\n                aspect={aspect > 0 ? aspect : undefined}\n                minHeight={50}\n                className=\"max-w-full\"\n              >\n                <img\n                  ref={imgRef}\n                  alt=\"Crop me\"\n                  src={imagePath}\n                  onLoad={onImageLoad}\n                  style={{\n                    transform: `scale(${scale}) rotate(${rotate}deg)`,\n                    maxWidth: '100%',\n                    maxHeight: '400px'\n                  }}\n                />\n              </ReactCrop>\n            </div>\n\n            {/* Preview */}\n            {completedCrop && imgRef.current && (\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-medium\">Preview (vaste header afmetingen: 1920x873px)</Label>\n                <div className=\"border rounded-lg p-2 bg-white\">\n                  <div \n                    className=\"w-full bg-gray-100 rounded overflow-hidden relative\"\n                    style={{ \n                      aspectRatio: '2.2',\n                      height: '120px'\n                    }}\n                  >\n                    <canvas\n                      ref={(canvas) => {\n                        if (canvas && completedCrop && imgRef.current) {\n                          const ctx = canvas.getContext('2d');\n                          if (ctx) {\n                            const previewWidth = 240;\n                            const previewHeight = Math.round(previewWidth / 2.2); // Exact 2.2:1 ratio\n                            \n                            canvas.width = previewWidth;\n                            canvas.height = previewHeight;\n                            \n                            ctx.imageSmoothingQuality = 'high';\n                            \n                            const scaleX = imgRef.current.naturalWidth / imgRef.current.width;\n                            const scaleY = imgRef.current.naturalHeight / imgRef.current.height;\n                            \n                            const sourceX = completedCrop.x * scaleX;\n                            const sourceY = completedCrop.y * scaleY;\n                            const sourceWidth = completedCrop.width * scaleX;\n                            const sourceHeight = completedCrop.height * scaleY;\n                            \n                            // Vul achtergrond\n                            ctx.fillStyle = '#000000';\n                            ctx.fillRect(0, 0, previewWidth, previewHeight);\n                            \n                            // Bereken schaling om canvas te vullen (zoals echte crop)\n                            const scaleToFitWidth = previewWidth / completedCrop.width;\n                            const scaleToFitHeight = previewHeight / completedCrop.height;\n                            const scaleToFit = Math.max(scaleToFitWidth, scaleToFitHeight) * scale;\n                            \n                            const scaledWidth = completedCrop.width * scaleToFit;\n                            const scaledHeight = completedCrop.height * scaleToFit;\n                            \n                            const offsetX = (previewWidth - scaledWidth) / 2;\n                            const offsetY = (previewHeight - scaledHeight) / 2;\n                            \n                            ctx.save();\n                            \n                            // Rotatie toepassen\n                            if (rotate !== 0) {\n                              ctx.translate(previewWidth / 2, previewHeight / 2);\n                              ctx.rotate((rotate * Math.PI) / 180);\n                              ctx.translate(-previewWidth / 2, -previewHeight / 2);\n                            }\n                            \n                            ctx.drawImage(\n                              imgRef.current,\n                              sourceX,\n                              sourceY,\n                              sourceWidth,\n                              sourceHeight,\n                              offsetX,\n                              offsetY,\n                              scaledWidth,\n                              scaledHeight\n                            );\n                            \n                            ctx.restore();\n                            \n                            // Overlay voor realistische preview\n                            ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\n                            ctx.fillRect(0, 0, previewWidth, previewHeight);\n                            \n                            // Tekst overlay\n                            ctx.fillStyle = 'white';\n                            ctx.font = 'bold 12px Arial';\n                            ctx.textAlign = 'center';\n                            ctx.fillText('Ontdek Polen', previewWidth / 2, previewHeight / 2 - 8);\n                            ctx.font = '10px Arial';\n                            ctx.fillText('Header Preview', previewWidth / 2, previewHeight / 2 + 8);\n                          }\n                        }\n                      }}\n                      className=\"w-full h-full rounded\"\n                    />\n                  </div>\n                </div>\n                <div className=\"text-xs text-gray-600 bg-blue-50 p-2 rounded\">\n                  üí° <strong>Vaste afmetingen:</strong> De gecroppte afbeelding wordt altijd opgeslagen als 1920x873 pixels, \n                  perfect voor header weergave. Gebruik de crop, scale en rotate tools om de afbeelding optimaal uit te lijnen.\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Controls */}\n          <div className=\"space-y-6\">\n            <div className=\"space-y-3\">\n              <Label className=\"text-sm font-medium\">Aspect Ratio</Label>\n              <Select value={aspect.toString()} onValueChange={(value) => handleAspectChange(Number(value))}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {aspectRatios.map((ratio) => (\n                    <SelectItem key={ratio.value} value={ratio.value.toString()}>\n                      {ratio.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-3\">\n              <Label className=\"text-sm font-medium\">Schaal: {scale.toFixed(1)}x</Label>\n              <input\n                type=\"range\"\n                min=\"0.5\"\n                max=\"2\"\n                step=\"0.1\"\n                value={scale}\n                onChange={(e) => setScale(Number(e.target.value))}\n                className=\"w-full\"\n              />\n            </div>\n\n            <div className=\"space-y-3\">\n              <Label className=\"text-sm font-medium\">Rotatie: {rotate}¬∞</Label>\n              <input\n                type=\"range\"\n                min=\"-180\"\n                max=\"180\"\n                step=\"1\"\n                value={rotate}\n                onChange={(e) => setRotate(Number(e.target.value))}\n                className=\"w-full\"\n              />\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={resetCrop}\n                className=\"flex-1\"\n              >\n                <RotateCcw className=\"h-4 w-4 mr-2\" />\n                Reset\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setRotate(rotate - 90)}\n                className=\"flex-1\"\n              >\n                <RotateCw className=\"h-4 w-4 mr-2\" />\n                Draai\n              </Button>\n            </div>\n\n            <div className=\"pt-4 border-t\">\n              <div className=\"space-y-2 text-sm text-gray-600\">\n                <p><strong>Header (2.5:1)</strong> - Optimaal voor website headers</p>\n                <p><strong>Banner (3:1)</strong> - Breed banner formaat</p>\n                <p><strong>Widescreen (16:9)</strong> - Modern scherm formaat</p>\n                <p><strong>Vrije vorm</strong> - Geen vaste verhoudingen</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            onClick={() => setOpen(false)}\n          >\n            Annuleren\n          </Button>\n          <Button\n            onClick={handleCropComplete}\n            disabled={!completedCrop || isProcessing}\n          >\n            {isProcessing ? (\n              <>\n                <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                Verwerken...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                Crop & Opslaan\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Herbruikbare afbeelding upload component\nfunction HeaderImageSelector({ destination, currentImage, onImageSelect }: {\n  destination: string;\n  currentImage: string;\n  onImageSelect: (imagePath: string, altText: string) => void;\n}) {\n  const [availableImages, setAvailableImages] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showGallery, setShowGallery] = useState(false);\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (destination && showGallery) {\n      setIsLoading(true);\n      fetch(`/api/admin/header-images/${destination}`, {\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          // Ensure data is an array\n          setAvailableImages(Array.isArray(data) ? data : []);\n          setIsLoading(false);\n        })\n        .catch(error => {\n          console.error('Error fetching header images:', error);\n          setAvailableImages([]);\n          setIsLoading(false);\n        });\n    }\n  }, [destination, showGallery]);\n\n  const handleDeleteImage = async (imagePath: string, imageName: string) => {\n    if (!confirm(`Weet je zeker dat je \"${imageName}\" wilt verwijderen?`)) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/admin/images/delete', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ imagePath })\n      });\n\n      if (!response.ok) {\n        throw new Error('Fout bij verwijderen afbeelding');\n      }\n\n      // Refresh de gallery\n      const updatedImages = availableImages.filter(img => img.path !== imagePath);\n      setAvailableImages(updatedImages);\n      \n      // Als het huidige image is verwijderd, clear de selectie\n      if (currentImage === imagePath) {\n        onImageSelect('', '');\n      }\n\n      toast({\n        title: \"Succesvol verwijderd\",\n        description: `${imageName} is verwijderd`,\n        variant: \"default\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Fout bij verwijderen\",\n        description: \"Er is een fout opgetreden bij het verwijderen van de afbeelding\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  if (!destination) return null;\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center justify-between\">\n        <Label>Selecteer Header Afbeelding</Label>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowGallery(!showGallery)}\n        >\n          <ImageIcon className=\"h-4 w-4 mr-2\" />\n          {showGallery ? 'Verberg Galerie' : 'Toon Beschikbare Afbeeldingen'}\n        </Button>\n      </div>\n\n      {showGallery && (\n        <div className=\"border rounded-lg p-4 bg-white\">\n          {isLoading ? (\n            <div className=\"text-center py-4\">\n              <p className=\"text-gray-500\">Afbeeldingen laden...</p>\n            </div>\n          ) : availableImages.length === 0 ? (\n            <div className=\"text-center py-4\">\n              <p className=\"text-gray-500\">Geen header afbeeldingen gevonden voor {destination}</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n              {availableImages.map((image, index) => (\n                <div key={index} className=\"relative\">\n                  <div \n                    className={`relative h-24 w-full rounded-md overflow-hidden border cursor-pointer hover:border-blue-500 transition-colors ${\n                      currentImage === image.path ? 'border-blue-500 border-2' : 'border-gray-300'\n                    }`}\n                    onClick={() => onImageSelect(image.path, `${image.name} header afbeelding`)}\n                    style={{\n                      backgroundImage: `url('${image.path}')`,\n                      backgroundSize: 'cover',\n                      backgroundPosition: 'center'\n                    }}\n                  >\n                    {/* Overlay voor consistentie met header */}\n                    <div className=\"absolute inset-0 bg-black bg-opacity-30\"></div>\n                    \n                    {/* Tekst overlay voor realistische preview */}\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white text-center z-10\">\n                      <div className=\"text-xs font-bold mb-1\">Ontdek Polen</div>\n                      <div className=\"text-xs opacity-90\">Mooie plekken in {destination} ontdekken</div>\n                    </div>\n                    \n                    {/* Verborgen img voor fallback error handling */}\n                    <img \n                      src={image.path} \n                      alt={image.name}\n                      className=\"hidden\"\n                      onError={(e) => {\n                        const parent = e.currentTarget.parentElement;\n                        if (parent) {\n                          parent.style.backgroundImage = 'none';\n                          parent.style.backgroundColor = '#e5e7eb';\n                          parent.innerHTML = '<div class=\"flex items-center justify-center h-full text-gray-500 text-xs\">Fout bij laden</div>';\n                        }\n                      }}\n                    />\n                    {currentImage === image.path && (\n                      <div className=\"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center z-20\">\n                        <div className=\"bg-blue-500 text-white text-xs px-2 py-1 rounded font-bold\">\n                          ‚úì Geselecteerd\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-center mt-1 text-gray-600\">{image.name}</p>\n                  <div className=\"flex gap-1 mt-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"flex-1 text-xs\"\n                      onClick={() => onImageSelect(image.path, `${image.name} header afbeelding`)}\n                    >\n                      <Eye className=\"h-3 w-3 mr-1\" />\n                      Selecteer\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"text-xs text-red-600 hover:text-red-700\"\n                      onClick={() => handleDeleteImage(image.path, image.name)}\n                    >\n                      <Trash2 className=\"h-3 w-3\" />\n                    </Button>\n                    <ImageCropperDialog\n                      imagePath={image.path}\n                      destination={destination}\n                      onCroppedImage={(croppedPath) => {\n                        onImageSelect(croppedPath, `${image.name} header afbeelding (gecroppt)`);\n                        // Refresh de gallery om de nieuwe afbeelding te laten zien\n                        setShowGallery(false);\n                        setTimeout(() => {\n                          setShowGallery(true);\n                        }, 100);\n                      }}\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction ImageUploadField({ label, value, onChange, placeholder, fileName, destination, entityId, entityName }: {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  placeholder: string;\n  fileName?: string;\n  destination?: string;\n  entityId?: string | number;\n  entityName?: string;\n}) {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    try {\n      const result = await uploadFile({ \n        file, \n        fileName, \n        destination,\n        type: 'image',\n        entityId,\n        entityName\n      });\n      onChange(result.imagePath || '');\n    } catch (error) {\n      // Error handling is done in uploadFile utility\n    }\n\n    // Reset input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <Label>{label}</Label>\n      <div className=\"flex gap-2\">\n        <Input\n          placeholder={placeholder}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"flex-1\"\n        />\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => fileInputRef.current?.click()}\n          className=\"shrink-0\"\n        >\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Upload\n        </Button>\n        {value && (\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => onChange('')}\n            className=\"shrink-0\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        )}\n      </div>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileUpload}\n        className=\"hidden\"\n      />\n      {value && (\n        <div className=\"text-sm text-gray-500\">\n          Huidige afbeelding: {value}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction SiteImageUploadField({ label, value, onChange, imageType }: {\n  label: string;\n  value: string;\n  onChange: (imagePath: string) => void;\n  imageType: 'background' | 'logo' | 'social';\n}) {\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [showImageList, setShowImageList] = useState(false);\n\n  const imageQuery = useQuery({\n    queryKey: ['/api/site-images', imageType],\n    queryFn: () => fetch(`/api/site-images/${imageType}`).then(res => res.json())\n  });\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    try {\n      const result = await uploadFile({ \n        file, \n        fileName: `${imageType}-${Date.now()}`, \n        destination: imageType,\n        type: 'image' \n      });\n      onChange(result.imagePath || '');\n      \n      // Refresh image list\n      imageQuery.refetch();\n    } catch (error) {\n      // Error handling is done in uploadFile utility\n    }\n\n    // Reset input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteImage = async (filename: string) => {\n    try {\n      const response = await fetch(`/api/site-images/${imageType}/${filename}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n\n      if (!response.ok) {\n        throw new Error('Delete failed');\n      }\n\n      toast({\n        title: \"Succes\",\n        description: \"Afbeelding succesvol verwijderd!\",\n      });\n\n      // Clear current value if deleted file was selected\n      if (value.includes(filename)) {\n        onChange('');\n      }\n\n      // Refresh image list\n      imageQuery.refetch();\n    } catch (error) {\n      console.error('Delete error:', error);\n      toast({\n        title: \"Verwijder fout\",\n        description: \"Er is een fout opgetreden bij het verwijderen van de afbeelding\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const imageFiles = imageQuery.data || [];\n  const typeLabels = {\n    background: 'Achtergrond',\n    logo: 'Logo',\n    social: 'Social Media'\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <Label>{label}</Label>\n      <div className=\"flex gap-2\">\n        <Input\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder={`/${imageType}-afbeelding.jpg`}\n          className=\"flex-1\"\n        />\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => fileInputRef.current?.click()}\n          className=\"shrink-0\"\n        >\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Upload\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowImageList(!showImageList)}\n          className=\"shrink-0\"\n        >\n          {showImageList ? (\n            <>\n              <Eye className=\"h-4 w-4 mr-1\" />\n              Verberg\n            </>\n          ) : (\n            <>\n              <FolderOpen className=\"h-4 w-4 mr-1\" />\n              Bekijk ({imageFiles.length})\n            </>\n          )}\n        </Button>\n      </div>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileUpload}\n        className=\"hidden\"\n      />\n\n      {showImageList && (\n        <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"font-medium\">Beschikbare {typeLabels[imageType]} Afbeeldingen</h4>\n            <span className=\"text-sm text-gray-500\">{imageFiles.length} bestand(en)</span>\n          </div>\n          {imageFiles.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-12 h-12 mx-auto mb-3 border-2 border-dashed border-gray-300 rounded flex items-center justify-center\">\n                <ImageIcon className=\"h-6 w-6 text-gray-400\" />\n              </div>\n              <p className=\"text-gray-500 mb-2\">Geen {typeLabels[imageType].toLowerCase()} afbeeldingen gevonden</p>\n              <p className=\"text-xs text-gray-400\">Upload een afbeelding om te beginnen</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 gap-3\">\n              {imageFiles.map((file: any) => (\n                <div key={file.name} className=\"flex items-center justify-between p-3 bg-white rounded border hover:border-blue-300 transition-colors\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-16 h-16 border rounded overflow-hidden bg-gray-50 flex items-center justify-center\">\n                      <img\n                        src={file.path}\n                        alt={file.name}\n                        className=\"w-full h-full object-cover\"\n                        onError={(e) => {\n                          e.currentTarget.style.display = 'none';\n                          const parent = e.currentTarget.parentElement;\n                          if (parent && !parent.querySelector('.fallback-icon')) {\n                            const fallbackIcon = document.createElement('div');\n                            fallbackIcon.className = 'fallback-icon text-xs text-gray-400 flex items-center justify-center w-full h-full';\n                            fallbackIcon.innerHTML = '<svg class=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clip-rule=\"evenodd\"></path></svg>';\n                            parent.appendChild(fallbackIcon);\n                          }\n                        }}\n                      />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-medium text-sm truncate\">{file.name}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        {(file.size / 1024).toFixed(1)} KB ‚Ä¢ \n                        {file.dimensions && ` ${file.dimensions} ‚Ä¢ `}\n                        {new Date(file.lastModified).toLocaleDateString('nl-NL')}\n                      </p>\n                    </div>\n                    {value === file.path && (\n                      <span className=\"text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">\n                        Actief\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => onChange(file.path)}\n                      disabled={value === file.path}\n                    >\n                      {value === file.path ? 'Geselecteerd' : 'Selecteer'}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => handleDeleteImage(file.name)}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction FaviconUploadField({ label, value, onChange }: {\n  label: string;\n  value: string;\n  onChange: (faviconPath: string) => void;\n}) {\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [showFaviconList, setShowFaviconList] = useState(false);\n\n  const faviconQuery = useQuery({\n    queryKey: ['/api/favicons'],\n    queryFn: () => fetch('/api/favicons').then(res => res.json())\n  });\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    try {\n      const result = await uploadFile({ \n        file, \n        fileName: file.name.replace('.ico', ''), \n        type: 'favicon' \n      });\n      onChange(result.faviconPath || '');\n      \n      // Refresh favicon list\n      faviconQuery.refetch();\n    } catch (error) {\n      // Error handling is done in uploadFile utility\n    }\n\n    // Reset input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteFavicon = async (filename: string) => {\n    try {\n      const response = await fetch(`/api/favicons/${filename}`, {\n        method: 'DELETE',\n        credentials: 'include',\n      });\n\n      if (!response.ok) {\n        throw new Error('Delete failed');\n      }\n\n      toast({\n        title: \"Succes\",\n        description: \"Favicon succesvol verwijderd!\",\n      });\n\n      // Clear current value if deleted file was selected\n      if (value === `/${filename}`) {\n        onChange('');\n      }\n\n      // Refresh favicon list\n      faviconQuery.refetch();\n    } catch (error) {\n      console.error('Delete error:', error);\n      toast({\n        title: \"Verwijder fout\",\n        description: \"Er is een fout opgetreden bij het verwijderen van de favicon\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const faviconFiles = faviconQuery.data || [];\n\n  return (\n    <div className=\"space-y-2\">\n      <Label>{label}</Label>\n      <div className=\"flex gap-2\">\n        <Input\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          placeholder=\"/favicon.ico\"\n          className=\"flex-1\"\n        />\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => fileInputRef.current?.click()}\n          className=\"shrink-0\"\n        >\n          <Upload className=\"h-4 w-4 mr-2\" />\n          Upload .ico\n        </Button>\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowFaviconList(!showFaviconList)}\n          className=\"shrink-0\"\n        >\n          {showFaviconList ? (\n            <>\n              <Eye className=\"h-4 w-4 mr-1\" />\n              Verberg\n            </>\n          ) : (\n            <>\n              <FolderOpen className=\"h-4 w-4 mr-1\" />\n              Bekijk ({faviconFiles.length})\n            </>\n          )}\n        </Button>\n      </div>\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\".ico\"\n        onChange={handleFileUpload}\n        className=\"hidden\"\n      />\n\n      {showFaviconList && (\n        <div className=\"mt-4 p-4 border rounded-lg bg-gray-50\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h4 className=\"font-medium\">Beschikbare Favicon Bestanden</h4>\n            <span className=\"text-sm text-gray-500\">{faviconFiles.length} bestand(en)</span>\n          </div>\n          {faviconFiles.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <div className=\"w-12 h-12 mx-auto mb-3 border-2 border-dashed border-gray-300 rounded flex items-center justify-center\">\n                <span className=\"text-gray-400 text-xs font-bold\">ICO</span>\n              </div>\n              <p className=\"text-gray-500 mb-2\">Geen favicon bestanden gevonden</p>\n              <p className=\"text-xs text-gray-400\">Upload een .ico bestand om te beginnen</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {faviconFiles.map((file: any) => (\n                <div key={file.name} className=\"flex items-center justify-between p-3 bg-white rounded border hover:border-blue-300 transition-colors\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-8 h-8 border rounded flex items-center justify-center bg-gray-50\">\n                      <img\n                        src={file.path}\n                        alt={file.name}\n                        className=\"w-6 h-6 object-contain\"\n                        onError={(e) => {\n                          // Fallback: toon een bestand icoon als de favicon niet kan worden geladen\n                          e.currentTarget.style.display = 'none';\n                          const parent = e.currentTarget.parentNode as HTMLElement;\n                          if (parent && !parent.querySelector('.fallback-icon')) {\n                            const fallbackIcon = document.createElement('div');\n                            fallbackIcon.className = 'fallback-icon text-gray-400 text-xs font-bold';\n                            fallbackIcon.textContent = 'ICO';\n                            parent.appendChild(fallbackIcon);\n                          }\n                        }}\n                      />\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{file.name}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        {formatFileSize(file.size)} ‚Ä¢ {new Date(file.lastModified).toLocaleDateString('nl-NL', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric',\n                          hour: '2-digit',\n                          minute: '2-digit'\n                        })}\n                      </p>\n                      <p className=\"text-xs text-blue-600\">{file.path}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => onChange(file.path)}\n                      className=\"text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\n                    >\n                      Selecteer\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"destructive\"\n                      onClick={() => handleDeleteFavicon(file.name)}\n                      className=\"hover:bg-red-600\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {value && (\n        <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 border rounded flex items-center justify-center bg-white\">\n              <img\n                src={value}\n                alt=\"Current favicon\"\n                className=\"w-6 h-6 object-contain\"\n                onError={(e) => {\n                  e.currentTarget.style.display = 'none';\n                  const parent = e.currentTarget.parentNode as HTMLElement;\n                  if (parent && !parent.querySelector('.fallback-current')) {\n                    const fallbackIcon = document.createElement('div');\n                    fallbackIcon.className = 'fallback-current text-gray-400 text-xs font-bold';\n                    fallbackIcon.textContent = 'ICO';\n                    parent.appendChild(fallbackIcon);\n                  }\n                }}\n              />\n            </div>\n            <div>\n              <p className=\"font-medium text-blue-900\">Huidige favicon</p>\n              <p className=\"text-sm text-blue-700\">{value}</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Component voor nieuwe gebruiker aanmaken\nfunction CreateUserDialog({ open, onOpenChange, onUserCreated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  onUserCreated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n    role: 'user',\n    canCreateContent: true,\n    canEditContent: true,\n    canDeleteContent: false,\n    canManageUsers: false,\n  });\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await fetch('/api/users', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Gebruiker succesvol aangemaakt\" });\n        onUserCreated();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Gebruiker Aanmaken</DialogTitle>\n          <DialogDescription>\n            Voeg een nieuwe gebruiker toe aan het systeem\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"username\">Gebruikersnaam</Label>\n            <Input\n              id=\"username\"\n              value={formData.username}\n              onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"password\">Wachtwoord</Label>\n            <Input\n              id=\"password\"\n              type=\"password\"\n              value={formData.password}\n              onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"role\">Rol</Label>\n            <Select value={formData.role} onValueChange={(value) => setFormData({ ...formData, role: value })}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecteer rol\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"user\">Gebruiker</SelectItem>\n                <SelectItem value=\"admin\">Administrator</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"space-y-4\">\n            <Label>Permissies</Label>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canCreateContent\"\n                  checked={formData.canCreateContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canCreateContent: checked })}\n                />\n                <Label htmlFor=\"canCreateContent\">Content aanmaken</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canEditContent\"\n                  checked={formData.canEditContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canEditContent: checked })}\n                />\n                <Label htmlFor=\"canEditContent\">Content bewerken</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canDeleteContent\"\n                  checked={formData.canDeleteContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canDeleteContent: checked })}\n                />\n                <Label htmlFor=\"canDeleteContent\">Content verwijderen</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canManageUsers\"\n                  checked={formData.canManageUsers}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canManageUsers: checked })}\n                />\n                <Label htmlFor=\"canManageUsers\">Gebruikers beheren</Label>\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Aanmaken</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor gebruiker bewerken\nfunction EditUserDialog({ open, onOpenChange, user, onUserUpdated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  user: any;\n  onUserUpdated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    username: user?.username || '',\n    role: user?.role || 'user',\n    canCreateContent: user?.canCreateContent || false,\n    canEditContent: user?.canEditContent || false,\n    canDeleteContent: user?.canDeleteContent || false,\n    canManageUsers: user?.canManageUsers || false,\n  });\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await fetch(`/api/users/${user.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Gebruiker succesvol bijgewerkt\" });\n        onUserUpdated();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Gebruiker Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de gegevens van {user?.username}\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"username\">Gebruikersnaam</Label>\n            <Input\n              id=\"username\"\n              value={formData.username}\n              onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"role\">Rol</Label>\n            <Select value={formData.role} onValueChange={(value) => setFormData({ ...formData, role: value })}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecteer rol\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"user\">Gebruiker</SelectItem>\n                <SelectItem value=\"admin\">Administrator</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          <div className=\"space-y-4\">\n            <Label>Permissies</Label>\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canCreateContent\"\n                  checked={formData.canCreateContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canCreateContent: checked })}\n                />\n                <Label htmlFor=\"canCreateContent\">Content aanmaken</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canEditContent\"\n                  checked={formData.canEditContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canEditContent: checked })}\n                />\n                <Label htmlFor=\"canEditContent\">Content bewerken</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canDeleteContent\"\n                  checked={formData.canDeleteContent}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canDeleteContent: checked })}\n                />\n                <Label htmlFor=\"canDeleteContent\">Content verwijderen</Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Switch \n                  id=\"canManageUsers\"\n                  checked={formData.canManageUsers}\n                  onCheckedChange={(checked) => setFormData({ ...formData, canManageUsers: checked })}\n                />\n                <Label htmlFor=\"canManageUsers\">Gebruikers beheren</Label>\n              </div>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Bijwerken</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor wachtwoord reset\nfunction ResetPasswordDialog({ open, onOpenChange, user, onPasswordReset }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  user: any;\n  onPasswordReset: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (formData.newPassword !== formData.confirmPassword) {\n      toast({ title: \"Fout\", description: \"Wachtwoorden komen niet overeen\", variant: \"destructive\" });\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/users/${user.id}/reset-password`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Wachtwoord succesvol gereset\" });\n        onPasswordReset();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>Wachtwoord Reset</DialogTitle>\n          <DialogDescription>\n            Reset het wachtwoord voor {user?.username}\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"newPassword\">Nieuw Wachtwoord</Label>\n            <Input\n              id=\"newPassword\"\n              type=\"password\"\n              value={formData.newPassword}\n              onChange={(e) => setFormData({ ...formData, newPassword: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"confirmPassword\">Bevestig Wachtwoord</Label>\n            <Input\n              id=\"confirmPassword\"\n              type=\"password\"\n              value={formData.confirmPassword}\n              onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n              required\n            />\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Reset Wachtwoord</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor bestemming bewerken\nfunction EditDestinationDialog({ open, onOpenChange, destination, editData, setEditData, onSave }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  destination: any;\n  editData: any;\n  setEditData: (data: any) => void;\n  onSave: () => void;\n}) {\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await apiRequest(`/api/destinations/${destination.id}`, {\n        method: 'PUT',\n        body: JSON.stringify(editData)\n      });\n      \n      // Invalidate cache to refresh data\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/destinations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/destinations'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/destinations/homepage'] });\n      \n      toast({ title: \"Succes\", description: \"Bestemming succesvol bijgewerkt\" });\n      onSave();\n    } catch (error) {\n      console.error('Error updating destination:', error);\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden bij het bijwerken van de bestemming\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Bestemming Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de gegevens van {destination?.name}\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Naam</Label>\n            <Input\n              id=\"name\"\n              value={editData.name}\n              onChange={(e) => setEditData({ ...editData, name: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"location\">Plaats/Locatie</Label>\n            <Input\n              id=\"location\"\n              value={editData.location || ''}\n              onChange={(e) => setEditData({ ...editData, location: e.target.value })}\n              placeholder=\"Bijv. Krakow, Warschau\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"ranking\">Ranking (volgorde - lagere nummers eerst)</Label>\n            <Input\n              id=\"ranking\"\n              type=\"number\"\n              value={editData.ranking || 0}\n              onChange={(e) => setEditData({ ...editData, ranking: parseInt(e.target.value) || 0 })}\n              placeholder=\"0\"\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Beschrijving</Label>\n            <Textarea\n              id=\"description\"\n              value={editData.description}\n              onChange={(e) => setEditData({ ...editData, description: e.target.value })}\n              required\n            />\n          </div>\n          <ImageUploadField\n            label=\"Afbeelding\"\n            value={editData.image}\n            onChange={(value) => setEditData({ ...editData, image: value })}\n            placeholder=\"/images/destinations/bestemming.jpg\"\n            fileName={editData.name}\n            destination=\"destinations\"\n          />\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"alt\">Alt-tekst</Label>\n            <Input\n              id=\"alt\"\n              value={editData.alt}\n              onChange={(e) => setEditData({ ...editData, alt: e.target.value })}\n              placeholder=\"Beschrijving van de afbeelding\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"content\">Content (Markdown)</Label>\n            <Textarea\n              id=\"content\"\n              className=\"min-h-32\"\n              value={editData.content}\n              onChange={(e) => setEditData({ ...editData, content: e.target.value })}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"link\">Link (optioneel)</Label>\n            <Input\n              id=\"link\"\n              value={editData.link || ''}\n              onChange={(e) => setEditData({ ...editData, link: e.target.value })}\n              placeholder=\"Bijv. /krakow-bezoeken of https://example.com\"\n            />\n            <p className=\"text-sm text-gray-500\">\n              Link waar de afbeelding naartoe moet leiden. Gebruik interne links (bijv. /pagina) of externe links (bijv. https://website.com)\n            </p>\n          </div>\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"featured\"\n                checked={editData.featured}\n                onCheckedChange={(checked) => setEditData({ ...editData, featured: checked })}\n              />\n              <Label htmlFor=\"featured\">Featured</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"published\"\n                checked={editData.published}\n                onCheckedChange={(checked) => setEditData({ ...editData, published: checked })}\n              />\n              <Label htmlFor=\"published\">Gepubliceerd</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"showOnHomepage\"\n                checked={editData.showOnHomepage !== false}\n                onCheckedChange={(checked) => setEditData({ ...editData, showOnHomepage: checked })}\n              />\n              <Label htmlFor=\"showOnHomepage\">Toon op Homepage</Label>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Opslaan</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor bestemming bekijken\nfunction ViewDestinationDialog({ open, onOpenChange, destination }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  destination: any;\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[700px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{destination?.name}</DialogTitle>\n          <DialogDescription>\n            Vooruitblik van de bestemming\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          {destination?.image && (\n            <div className=\"w-full\">\n              <h3 className=\"font-semibold mb-2\">Afbeelding</h3>\n              <div className=\"relative h-48 w-full rounded-md overflow-hidden border\">\n                <img \n                  src={destination.image} \n                  alt={destination.name || 'Bestemming afbeelding'}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                    e.currentTarget.nextElementSibling.style.display = 'flex';\n                  }}\n                />\n                <div className=\"hidden w-full h-full bg-gray-200 items-center justify-center\">\n                  <span className=\"text-gray-500\">Afbeelding kon niet geladen worden: {destination.image}</span>\n                </div>\n              </div>\n            </div>\n          )}\n          <div>\n            <h3 className=\"font-semibold mb-2\">Beschrijving</h3>\n            <p className=\"text-gray-700\">{destination?.description}</p>\n          </div>\n          {destination?.content && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Content</h3>\n              <div className=\"bg-gray-50 p-4 rounded-md\">\n                <pre className=\"whitespace-pre-wrap text-sm\">{destination.content}</pre>\n              </div>\n            </div>\n          )}\n          <div className=\"flex gap-2\">\n            {destination?.featured && <Badge variant=\"secondary\">Featured</Badge>}\n            <Badge variant={destination?.published ? \"default\" : \"outline\"}>\n              {destination?.published ? \"Gepubliceerd\" : \"Concept\"}\n            </Badge>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button onClick={() => onOpenChange(false)}>Sluiten</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor zoek configuratie bekijken\nfunction ViewSearchConfigDialog({ open, onOpenChange, searchConfig }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  searchConfig: any;\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[700px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{searchConfig?.context}</DialogTitle>\n          <DialogDescription>\n            Vooruitblik van de zoek configuratie\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <h3 className=\"font-semibold mb-2\">Context</h3>\n            <p className=\"text-gray-700\">{searchConfig?.context}</p>\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-2\">Placeholder Tekst</h3>\n            <p className=\"text-gray-700\">{searchConfig?.placeholderText}</p>\n          </div>\n          <div>\n            <h3 className=\"font-semibold mb-2\">Zoekbereik</h3>\n            <p className=\"text-gray-700 capitalize\">{searchConfig?.searchScope}</p>\n          </div>\n          {searchConfig?.customInstructions && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Aangepaste Instructies</h3>\n              <div className=\"bg-gray-50 p-4 rounded-md\">\n                <pre className=\"whitespace-pre-wrap text-sm\">{searchConfig.customInstructions}</pre>\n              </div>\n            </div>\n          )}\n          {searchConfig?.redirectPattern && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Redirect Pattern</h3>\n              <div className=\"bg-gray-50 p-4 rounded-md\">\n                <code className=\"text-sm\">{searchConfig.redirectPattern}</code>\n              </div>\n            </div>\n          )}\n          <div className=\"flex gap-2 flex-wrap\">\n            <Badge variant={searchConfig?.isActive ? \"default\" : \"outline\"}>\n              {searchConfig?.isActive ? \"Actief\" : \"Inactief\"}\n            </Badge>\n            <Badge variant=\"outline\" className=\"capitalize\">\n              {searchConfig?.searchScope}\n            </Badge>\n            {searchConfig?.enableLocationFilter && (\n              <Badge variant=\"secondary\">üìç Locatie filter</Badge>\n            )}\n            {searchConfig?.enableCategoryFilter && (\n              <Badge variant=\"secondary\">üè∑Ô∏è Categorie filter</Badge>\n            )}\n            {searchConfig?.enableHighlights && (\n              <Badge variant=\"secondary\">‚ú® Hoogtepunten</Badge>\n            )}\n            {searchConfig?.enableGuides && (\n              <Badge variant=\"secondary\">üìñ Reisgidsen</Badge>\n            )}\n          </div>\n        </div>\n        <DialogFooter>\n          <Button onClick={() => onOpenChange(false)}>Sluiten</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor reisgids bewerken\nfunction EditGuideDialog({ open, onOpenChange, guide, editData, setEditData, onSave }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  guide: any;\n  editData: any;\n  setEditData: (data: any) => void;\n  onSave: () => void;\n}) {\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      await apiRequest(`/api/guides/${guide.id}`, {\n        method: 'PUT',\n        body: JSON.stringify(editData)\n      });\n      \n      // Invalidate cache to refresh data\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/guides'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/guides'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/guides/homepage'] });\n      \n      toast({ title: \"Succes\", description: \"Reisgids succesvol bijgewerkt\" });\n      onSave();\n    } catch (error) {\n      console.error('Error updating guide:', error);\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden bij het bijwerken van de reisgids\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[600px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Reisgids Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de gegevens van {guide?.title}\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"title\">Titel</Label>\n            <Input\n              id=\"title\"\n              value={editData.title}\n              onChange={(e) => setEditData({ ...editData, title: e.target.value })}\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"description\">Beschrijving</Label>\n            <Textarea\n              id=\"description\"\n              value={editData.description}\n              onChange={(e) => setEditData({ ...editData, description: e.target.value })}\n              required\n            />\n          </div>\n          <ImageUploadField\n            label=\"Afbeelding\"\n            value={editData.image}\n            onChange={(value) => setEditData({ ...editData, image: value })}\n            placeholder=\"/images/guides/reisgids.jpg\"\n            fileName={editData.title}\n            destination=\"guides\"\n          />\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"alt\">Alt-tekst</Label>\n            <Input\n              id=\"alt\"\n              value={editData.alt}\n              onChange={(e) => setEditData({ ...editData, alt: e.target.value })}\n              placeholder=\"Beschrijving van de afbeelding\"\n              required\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"content\">Content (Markdown)</Label>\n            <Textarea\n              id=\"content\"\n              className=\"min-h-32\"\n              value={editData.content}\n              onChange={(e) => setEditData({ ...editData, content: e.target.value })}\n            />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"link\">Link (optioneel)</Label>\n            <Input\n              id=\"link\"\n              value={editData.link || ''}\n              onChange={(e) => setEditData({ ...editData, link: e.target.value })}\n              placeholder=\"Bijv. /krakow-bezoeken of https://example.com\"\n            />\n            <p className=\"text-sm text-gray-500\">\n              Link waar de afbeelding naartoe moet leiden. Gebruik interne links (bijv. /pagina) of externe links (bijv. https://website.com)\n            </p>\n          </div>\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"featured\"\n                checked={editData.featured}\n                onCheckedChange={(checked) => setEditData({ ...editData, featured: checked })}\n              />\n              <Label htmlFor=\"featured\">Featured</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"published\"\n                checked={editData.published}\n                onCheckedChange={(checked) => setEditData({ ...editData, published: checked })}\n              />\n              <Label htmlFor=\"published\">Gepubliceerd</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"showOnHomepage\"\n                checked={editData.showOnHomepage !== false}\n                onCheckedChange={(checked) => setEditData({ ...editData, showOnHomepage: checked })}\n              />\n              <Label htmlFor=\"showOnHomepage\">Toon op Homepage</Label>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Opslaan</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor reisgids bekijken\nfunction ViewGuideDialog({ open, onOpenChange, guide }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void;\n  guide: any;\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-[700px] max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{guide?.title}</DialogTitle>\n          <DialogDescription>\n            Vooruitblik van de reisgids\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          {guide?.image && (\n            <div className=\"w-full\">\n              <h3 className=\"font-semibold mb-2\">Afbeelding</h3>\n              <div className=\"relative h-48 w-full rounded-md overflow-hidden border\">\n                <img \n                  src={guide.image} \n                  alt={guide.title || 'Reisgids afbeelding'}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                    e.currentTarget.nextElementSibling.style.display = 'flex';\n                  }}\n                />\n                <div className=\"hidden w-full h-full bg-gray-200 items-center justify-center\">\n                  <span className=\"text-gray-500\">Afbeelding kon niet geladen worden: {guide.image}</span>\n                </div>\n              </div>\n            </div>\n          )}\n          <div>\n            <h3 className=\"font-semibold mb-2\">Beschrijving</h3>\n            <p className=\"text-gray-700\">{guide?.description}</p>\n          </div>\n          {guide?.content && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Content</h3>\n              <div className=\"bg-gray-50 p-4 rounded-md\">\n                <pre className=\"whitespace-pre-wrap text-sm\">{guide.content}</pre>\n              </div>\n            </div>\n          )}\n          <div className=\"flex gap-2\">\n            {guide?.featured && <Badge variant=\"secondary\">Featured</Badge>}\n            <Badge variant={guide?.published ? \"default\" : \"outline\"}>\n              {guide?.published ? \"Gepubliceerd\" : \"Concept\"}\n            </Badge>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button onClick={() => onOpenChange(false)}>Sluiten</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Component voor wachtwoord wijzigen\nfunction ChangePasswordForm() {\n  const [formData, setFormData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (formData.newPassword !== formData.confirmPassword) {\n      toast({ title: \"Fout\", description: \"Wachtwoorden komen niet overeen\", variant: \"destructive\" });\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/auth/change-password', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Wachtwoord succesvol gewijzigd\" });\n        setFormData({ currentPassword: '', newPassword: '', confirmPassword: '' });\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"currentPassword\">Huidig Wachtwoord</Label>\n        <Input\n          id=\"currentPassword\"\n          type=\"password\"\n          value={formData.currentPassword}\n          onChange={(e) => setFormData({ ...formData, currentPassword: e.target.value })}\n          required\n        />\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"newPassword\">Nieuw Wachtwoord</Label>\n        <Input\n          id=\"newPassword\"\n          type=\"password\"\n          value={formData.newPassword}\n          onChange={(e) => setFormData({ ...formData, newPassword: e.target.value })}\n          required\n        />\n      </div>\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"confirmPassword\">Bevestig Nieuw Wachtwoord</Label>\n        <Input\n          id=\"confirmPassword\"\n          type=\"password\"\n          value={formData.confirmPassword}\n          onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}\n          required\n        />\n      </div>\n      <Button type=\"submit\" className=\"w-full\">Wachtwoord Wijzigen</Button>\n    </form>\n  );\n}\n\n// Template Management Components (placeholder voor toekomstige implementatie)\nfunction TemplateManagement() {\n  const templatesQuery = useQuery({ queryKey: ['/api/admin/templates'] });\n  const [showViewTemplate, setShowViewTemplate] = useState(false);\n  const [showEditTemplate, setShowEditTemplate] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState<any>(null);\n  const { toast } = useToast();\n\n  if (templatesQuery.isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"text-center py-8\">\n            <p>Templates laden...</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const templates = templatesQuery.data || [];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-blue-600\">{templates.length}</p>\n              <p className=\"text-sm text-gray-600\">Totaal Templates</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-green-600\">{templates.filter(t => t.isActive).length}</p>\n              <p className=\"text-sm text-gray-600\">Actieve Templates</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-orange-600\">{templates.filter(t => !t.isActive).length}</p>\n              <p className=\"text-sm text-gray-600\">Inactieve Templates</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Templates List */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Templates</CardTitle>\n          <CardDescription>Beheer je content templates met variabelen ondersteuning</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {templates.length === 0 ? (\n              <div className=\"text-center py-8 text-gray-500\">\n                <p>Nog geen templates aangemaakt</p>\n              </div>\n            ) : (\n              templates.map((template: any) => (\n                <div key={template.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-medium\">{template.name}</h3>\n                    <p className=\"text-sm text-gray-600\">{template.description}</p>\n                    <div className=\"flex gap-2 mt-2\">\n                      <Badge variant={template.isActive ? \"default\" : \"outline\"}>\n                        {template.isActive ? \"Actief\" : \"Inactief\"}\n                      </Badge>\n                      <Badge variant=\"outline\">\n                        Gebruikt door {template.pageCount || 0} pagina's\n                      </Badge>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={() => {\n                        setSelectedTemplate(template);\n                        setShowViewTemplate(true);\n                      }}\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </Button>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={() => {\n                        setSelectedTemplate(template);\n                        setShowEditTemplate(true);\n                      }}\n                    >\n                      <Edit className=\"h-4 w-4\" />\n                    </Button>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={async () => {\n                        try {\n                          const newTemplate = {\n                            ...template,\n                            name: `${template.name} (Kopie)`,\n                            id: undefined\n                          };\n                          await apiRequest('/api/admin/templates', {\n                            method: 'POST',\n                            body: JSON.stringify(newTemplate)\n                          });\n                          toast({ title: \"Succes\", description: \"Template gekopieerd\" });\n                          templatesQuery.refetch();\n                        } catch (error) {\n                          toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n                        }\n                      }}\n                    >\n                      <Copy className=\"h-4 w-4\" />\n                    </Button>\n                    <Button \n                      variant=\"outline\" \n                      size=\"sm\"\n                      onClick={async () => {\n                        if (confirm('Weet je zeker dat je deze template wilt verwijderen?')) {\n                          try {\n                            await apiRequest(`/api/admin/templates/${template.id}`, { method: 'DELETE' });\n                            toast({ title: \"Succes\", description: \"Template verwijderd\" });\n                            templatesQuery.refetch();\n                          } catch (error) {\n                            toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n                          }\n                        }\n                      }}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          {/* Template Variables Info */}\n          <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">Beschikbare Variabelen:</h4>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-blue-800\">\n              <code>&#123;&#123;title&#125;&#125;</code>\n              <code>&#123;&#123;description&#125;&#125;</code>\n              <code>&#123;&#123;metaTitle&#125;&#125;</code>\n              <code>&#123;&#123;metaDescription&#125;&#125;</code>\n              <code>&#123;&#123;metaKeywords&#125;&#125;</code>\n              <code>&#123;&#123;slug&#125;&#125;</code>\n              <code>&#123;&#123;author&#125;&#125;</code>\n              <code>&#123;&#123;date&#125;&#125;</code>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Template View Dialog */}\n      {showViewTemplate && selectedTemplate && (\n        <ViewTemplateDialog \n          open={showViewTemplate} \n          onOpenChange={setShowViewTemplate}\n          template={selectedTemplate}\n        />\n      )}\n\n      {/* Template Edit Dialog */}\n      {showEditTemplate && selectedTemplate && (\n        <EditTemplateDialog \n          open={showEditTemplate} \n          onOpenChange={setShowEditTemplate}\n          template={selectedTemplate}\n          onTemplateUpdated={() => {\n            templatesQuery.refetch();\n            setShowEditTemplate(false);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\n// Template Dialog Components\nfunction CreateTemplateDialog({ open, onOpenChange, onTemplateCreated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  onTemplateCreated: () => void; \n}) {\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    content: '',\n    defaultMetaTitle: '',\n    defaultMetaDescription: '',\n    defaultMetaKeywords: '',\n    isActive: true\n  });\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await apiRequest('/api/admin/templates', {\n        method: 'POST',\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Template succesvol aangemaakt\" });\n        onTemplateCreated();\n        setFormData({\n          name: '',\n          description: '',\n          content: '',\n          defaultMetaTitle: '',\n          defaultMetaDescription: '',\n          defaultMetaKeywords: '',\n          isActive: true\n        });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Template Aanmaken</DialogTitle>\n          <DialogDescription>\n            Maak een nieuwe template aan met variabelen ondersteuning\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"templateName\">Template Naam</Label>\n              <Input\n                id=\"templateName\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"Bijv. Travel Destination Template\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"templateDescription\">Beschrijving</Label>\n              <Input\n                id=\"templateDescription\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                placeholder=\"Beschrijf het doel van deze template\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"templateContent\">Template Content</Label>\n            <Textarea\n              id=\"templateContent\"\n              value={formData.content}\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n              placeholder=\"# {{title}}&#10;&#10;{{description}}&#10;&#10;## Inhoud&#10;&#10;Gebruik variabelen zoals {{title}}, {{description}}, {{metaDescription}}\"\n              rows={12}\n              className=\"font-mono text-sm\"\n              required\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"defaultMetaTitle\">Standaard Meta Title</Label>\n              <Input\n                id=\"defaultMetaTitle\"\n                value={formData.defaultMetaTitle}\n                onChange={(e) => setFormData({ ...formData, defaultMetaTitle: e.target.value })}\n                placeholder=\"{{title}} - Site Naam\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"defaultMetaDescription\">Standaard Meta Description</Label>\n              <Input\n                id=\"defaultMetaDescription\"\n                value={formData.defaultMetaDescription}\n                onChange={(e) => setFormData({ ...formData, defaultMetaDescription: e.target.value })}\n                placeholder=\"{{description}}\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"defaultMetaKeywords\">Standaard Meta Keywords</Label>\n              <Input\n                id=\"defaultMetaKeywords\"\n                value={formData.defaultMetaKeywords}\n                onChange={(e) => setFormData({ ...formData, defaultMetaKeywords: e.target.value })}\n                placeholder=\"{{title}}, polen, reizen\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <Switch\n              id=\"isActive\"\n              checked={formData.isActive}\n              onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}\n            />\n            <Label htmlFor=\"isActive\">Template actief maken</Label>\n          </div>\n\n          <div className=\"p-4 bg-blue-50 rounded-lg\">\n            <h4 className=\"font-medium text-blue-900 mb-2\">Beschikbare Variabelen:</h4>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-blue-800\">\n              <code>&#123;&#123;title&#125;&#125;</code>\n              <code>&#123;&#123;description&#125;&#125;</code>\n              <code>&#123;&#123;metaTitle&#125;&#125;</code>\n              <code>&#123;&#123;metaDescription&#125;&#125;</code>\n              <code>&#123;&#123;metaKeywords&#125;&#125;</code>\n              <code>&#123;&#123;slug&#125;&#125;</code>\n              <code>&#123;&#123;author&#125;&#125;</code>\n              <code>&#123;&#123;date&#125;&#125;</code>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Template Aanmaken</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction EditTemplateDialog({ open, onOpenChange, template, onTemplateUpdated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  template: any;\n  onTemplateUpdated: () => void; \n}) {\n  const [formData, setFormData] = useState({\n    name: template?.name || '',\n    description: template?.description || '',\n    content: template?.content || '',\n    defaultMetaTitle: template?.defaultMetaTitle || '',\n    defaultMetaDescription: template?.defaultMetaDescription || '',\n    defaultMetaKeywords: template?.defaultMetaKeywords || '',\n    isActive: template?.isActive || false\n  });\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (template) {\n      setFormData({\n        name: template.name || '',\n        description: template.description || '',\n        content: template.content || '',\n        defaultMetaTitle: template.defaultMetaTitle || '',\n        defaultMetaDescription: template.defaultMetaDescription || '',\n        defaultMetaKeywords: template.defaultMetaKeywords || '',\n        isActive: template.isActive || false\n      });\n    }\n  }, [template]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await apiRequest(`/api/admin/templates/${template.id}`, {\n        method: 'PUT',\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Template succesvol bijgewerkt\" });\n        onTemplateUpdated();\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Template Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de template \"{template?.name}\"\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editTemplateName\">Template Naam</Label>\n              <Input\n                id=\"editTemplateName\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editTemplateDescription\">Beschrijving</Label>\n              <Input\n                id=\"editTemplateDescription\"\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"editTemplateContent\">Template Content</Label>\n            <Textarea\n              id=\"editTemplateContent\"\n              value={formData.content}\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n              rows={12}\n              className=\"font-mono text-sm\"\n              required\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editDefaultMetaTitle\">Standaard Meta Title</Label>\n              <Input\n                id=\"editDefaultMetaTitle\"\n                value={formData.defaultMetaTitle}\n                onChange={(e) => setFormData({ ...formData, defaultMetaTitle: e.target.value })}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editDefaultMetaDescription\">Standaard Meta Description</Label>\n              <Input\n                id=\"editDefaultMetaDescription\"\n                value={formData.defaultMetaDescription}\n                onChange={(e) => setFormData({ ...formData, defaultMetaDescription: e.target.value })}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editDefaultMetaKeywords\">Standaard Meta Keywords</Label>\n              <Input\n                id=\"editDefaultMetaKeywords\"\n                value={formData.defaultMetaKeywords}\n                onChange={(e) => setFormData({ ...formData, defaultMetaKeywords: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <Switch\n              id=\"editIsActive\"\n              checked={formData.isActive}\n              onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}\n            />\n            <Label htmlFor=\"editIsActive\">Template actief</Label>\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Wijzigingen Opslaan</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction ViewTemplateDialog({ open, onOpenChange, template }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  template: any; \n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{template?.name}</DialogTitle>\n          <DialogDescription>{template?.description}</DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div className=\"flex gap-2\">\n            <Badge variant={template?.isActive ? \"default\" : \"outline\"}>\n              {template?.isActive ? \"Actief\" : \"Inactief\"}\n            </Badge>\n          </div>\n\n          <div>\n            <h3 className=\"font-semibold mb-2\">Template Content</h3>\n            <div className=\"bg-gray-50 p-4 rounded-md\">\n              <pre className=\"whitespace-pre-wrap text-sm font-mono\">{template?.content}</pre>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Title</h4>\n              <p className=\"text-sm text-gray-600\">{template?.defaultMetaTitle || 'Geen standaard waarde'}</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Description</h4>\n              <p className=\"text-sm text-gray-600\">{template?.defaultMetaDescription || 'Geen standaard waarde'}</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Keywords</h4>\n              <p className=\"text-sm text-gray-600\">{template?.defaultMetaKeywords || 'Geen standaard waarde'}</p>\n            </div>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button onClick={() => onOpenChange(false)}>Sluiten</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Page Dialog Components\nfunction CreatePageDialog({ open, onOpenChange, templates, onPageCreated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  templates: any[];\n  onPageCreated: () => void; \n}) {\n  const [formData, setFormData] = useState({\n    title: '',\n    slug: '',\n    content: '',\n    metaTitle: '',\n    metaDescription: '',\n    metaKeywords: '',\n    template: '',\n    published: false,\n    featured: false,\n    ranking: 0\n  });\n  const { toast } = useToast();\n\n  const generateSlug = (title: string) => {\n    return title\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s-]/g, '')\n      .replace(/\\s+/g, '-')\n      .replace(/-+/g, '-')\n      .trim();\n  };\n\n  const handleTitleChange = (title: string) => {\n    setFormData(prev => ({\n      ...prev,\n      title,\n      slug: generateSlug(title)\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await apiRequest('/api/admin/pages', {\n        method: 'POST',\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Pagina succesvol aangemaakt\" });\n        onPageCreated();\n        setFormData({\n          title: '',\n          slug: '',\n          content: '',\n          metaTitle: '',\n          metaDescription: '',\n          metaKeywords: '',\n          template: '',\n          published: false,\n          featured: false,\n          ranking: 0\n        });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Pagina Aanmaken</DialogTitle>\n          <DialogDescription>\n            Maak een nieuwe pagina aan met template ondersteuning\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pageTitle\">Pagina Titel</Label>\n              <Input\n                id=\"pageTitle\"\n                value={formData.title}\n                onChange={(e) => handleTitleChange(e.target.value)}\n                placeholder=\"Bijv. Amsterdam Bezoeken\"\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pageSlug\">URL Slug</Label>\n              <Input\n                id=\"pageSlug\"\n                value={formData.slug}\n                onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n                placeholder=\"amsterdam-bezoeken\"\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"pageTemplate\">Template</Label>\n            <Select value={formData.template} onValueChange={(value) => setFormData({ ...formData, template: value })}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecteer een template\" />\n              </SelectTrigger>\n              <SelectContent>\n                {templates.filter(t => t.isActive).map((template) => (\n                  <SelectItem key={template.id} value={template.name}>\n                    {template.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"pageContent\">Pagina Content</Label>\n            <Textarea\n              id=\"pageContent\"\n              value={formData.content}\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n              placeholder=\"Schrijf je pagina content hier. Als je een template gebruikt, wordt deze content samengevoegd met de template.\"\n              rows={12}\n              required\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pageMetaTitle\">Meta Title</Label>\n              <Input\n                id=\"pageMetaTitle\"\n                value={formData.metaTitle}\n                onChange={(e) => setFormData({ ...formData, metaTitle: e.target.value })}\n                placeholder=\"SEO titel voor deze pagina\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pageMetaDescription\">Meta Description</Label>\n              <Input\n                id=\"pageMetaDescription\"\n                value={formData.metaDescription}\n                onChange={(e) => setFormData({ ...formData, metaDescription: e.target.value })}\n                placeholder=\"SEO beschrijving voor deze pagina\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"pageMetaKeywords\">Meta Keywords</Label>\n              <Input\n                id=\"pageMetaKeywords\"\n                value={formData.metaKeywords}\n                onChange={(e) => setFormData({ ...formData, metaKeywords: e.target.value })}\n                placeholder=\"SEO keywords, gescheiden door komma's\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"published\"\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({ ...formData, published: checked })}\n              />\n              <Label htmlFor=\"published\">Pagina publiceren</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"featured\"\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({ ...formData, featured: checked })}\n              />\n              <Label htmlFor=\"featured\">Featured</Label>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"pageRanking\">Volgorde (ranking)</Label>\n            <Input\n              id=\"pageRanking\"\n              type=\"number\"\n              value={formData.ranking}\n              onChange={(e) => setFormData({ ...formData, ranking: parseInt(e.target.value) || 0 })}\n              placeholder=\"0\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Pagina Aanmaken</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction EditPageDialog({ open, onOpenChange, page, templates, onPageUpdated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  page: any;\n  templates: any[];\n  onPageUpdated: () => void; \n}) {\n  const [formData, setFormData] = useState({\n    title: page?.title || '',\n    slug: page?.slug || '',\n    content: page?.content || '',\n    metaTitle: page?.metaTitle || '',\n    metaDescription: page?.metaDescription || '',\n    metaKeywords: page?.metaKeywords || '',\n    template: page?.template || '',\n    headerImage: page?.headerImage || '',\n    headerImageAlt: page?.headerImageAlt || '',\n    highlightSections: page?.highlightSections || '[]',\n    published: page?.published || false,\n    featured: page?.featured || false,\n    ranking: page?.ranking || 0\n  });\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (page) {\n      setFormData({\n        title: page.title || '',\n        slug: page.slug || '',\n        content: page.content || '',\n        metaTitle: page.metaTitle || '',\n        metaDescription: page.metaDescription || '',\n        metaKeywords: page.metaKeywords || '',\n        template: page.template || '',\n        headerImage: page.headerImage || '',\n        headerImageAlt: page.headerImageAlt || '',\n        highlightSections: page.highlightSections || '[]',\n        published: page.published || false,\n        featured: page.featured || false,\n        ranking: page.ranking || 0\n      });\n    }\n  }, [page]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const response = await apiRequest(`/api/admin/pages/${page.id}`, {\n        method: 'PUT',\n        body: JSON.stringify(formData),\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Pagina succesvol bijgewerkt\" });\n        onPageUpdated();\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Pagina Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de pagina \"{page?.title}\"\n          </DialogDescription>\n        </DialogHeader>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageTitle\">Pagina Titel</Label>\n              <Input\n                id=\"editPageTitle\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageSlug\">URL Slug</Label>\n              <Input\n                id=\"editPageSlug\"\n                value={formData.slug}\n                onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"editPageTemplate\">Template</Label>\n            <Select value={formData.template} onValueChange={(value) => setFormData({ ...formData, template: value })}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Selecteer een template\" />\n              </SelectTrigger>\n              <SelectContent>\n                {templates.filter(t => t.isActive).map((template) => (\n                  <SelectItem key={template.id} value={template.name}>\n                    {template.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Header Afbeelding Upload/Delete */}\n          <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n            <div className=\"flex items-center gap-2\">\n              <ImageIcon className=\"h-5 w-5 text-gray-600\" />\n              <h3 className=\"font-semibold\">Header Afbeelding</h3>\n            </div>\n            \n            {/* Current Header Image Preview - Exacte header weergave */}\n            {formData.headerImage && (\n              <div className=\"space-y-2\">\n                <div className=\"text-sm font-medium text-gray-700 mb-2\">Header Voorbeeld (exacte weergave):</div>\n                <div \n                  className=\"relative h-40 w-full rounded-md overflow-hidden border\"\n                  style={{\n                    backgroundImage: `url('${formData.headerImage}')`,\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center'\n                  }}\n                >\n                  {/* Exacte overlay zoals in echte header */}\n                  <div className=\"absolute inset-0 bg-black bg-opacity-30\"></div>\n                  \n                  {/* Exacte tekst zoals in echte header */}\n                  <div className=\"absolute inset-0 flex flex-col items-center justify-center text-white text-center z-10\">\n                    <h1 className=\"text-xl font-bold mb-2 font-inter\">\n                      Ontdek Polen\n                    </h1>\n                    <p className=\"text-base opacity-90 font-inter\">\n                      Mooie plekken in {formData.title} ontdekken\n                    </p>\n                  </div>\n                  \n                  {/* Verborgen img voor error handling */}\n                  <img \n                    src={formData.headerImage} \n                    alt={formData.headerImageAlt || 'Header afbeelding'}\n                    className=\"hidden\"\n                    onError={(e) => {\n                      const parent = e.currentTarget.parentElement;\n                      if (parent) {\n                        parent.style.backgroundImage = 'none';\n                        parent.style.backgroundColor = '#e5e7eb';\n                        parent.innerHTML = `<div class=\"flex items-center justify-center h-full text-gray-500 text-sm\">Afbeelding niet gevonden: ${formData.headerImage}</div>`;\n                      }\n                    }}\n                  />\n                </div>\n                <Button \n                  type=\"button\"\n                  variant=\"outline\" \n                  size=\"sm\"\n                  className=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n                  onClick={() => setFormData({ ...formData, headerImage: '', headerImageAlt: '' })}\n                >\n                  <Trash2 className=\"h-4 w-4 mr-2\" />\n                  Header Afbeelding Verwijderen\n                </Button>\n              </div>\n            )}\n\n            {/* Header Image Selection */}\n            <HeaderImageSelector\n              destination={formData.slug}\n              currentImage={formData.headerImage}\n              onImageSelect={(imagePath, altText) => setFormData({ ...formData, headerImage: imagePath, headerImageAlt: altText })}\n            />\n\n            {/* Upload New Header Image */}\n            <ImageUploadField\n              label={formData.headerImage ? \"Nieuwe Header Afbeelding Uploaden\" : \"Header Afbeelding Uploaden\"}\n              value={formData.headerImage}\n              onChange={(value) => setFormData({ ...formData, headerImage: value })}\n              placeholder=\"/images/destinations/pagina-header.jpg\"\n              fileName={`${formData.slug || formData.title}-header`}\n            />\n\n            {/* Header Image Alt Text */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageHeaderImageAlt\">Header Afbeelding Alt-tekst</Label>\n              <Input\n                id=\"editPageHeaderImageAlt\"\n                value={formData.headerImageAlt}\n                onChange={(e) => setFormData({ ...formData, headerImageAlt: e.target.value })}\n                placeholder=\"Beschrijving van de header afbeelding\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"editPageContent\">Pagina Content</Label>\n            <Textarea\n              id=\"editPageContent\"\n              value={formData.content}\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n              rows={12}\n              required\n            />\n          </div>\n\n          {/* Highlight Secties */}\n          <div className=\"space-y-2\">\n            <Label>Hoogtepunten Secties</Label>\n            <p className=\"text-sm text-gray-600\">\n              Voeg hoogtepunten toe die getoond worden onder de header (zoals op de homepage)\n            </p>\n            <Textarea\n              value={formData.highlightSections}\n              onChange={(e) => setFormData({ ...formData, highlightSections: e.target.value })}\n              className=\"min-h-[150px] font-mono text-sm\"\n              placeholder={`[\n  {\n    \"title\": \"Voorbeeld Locatie\",\n    \"description\": \"Beschrijving van deze mooie plek\",\n    \"image\": \"/images/example.jpg\",\n    \"alt\": \"Alternatieve tekst voor afbeelding\"\n  }\n]`}\n            />\n            <p className=\"text-xs text-gray-500\">\n              JSON format: Array van objecten met title, description, image en alt velden\n            </p>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageMetaTitle\">Meta Title</Label>\n              <Input\n                id=\"editPageMetaTitle\"\n                value={formData.metaTitle}\n                onChange={(e) => setFormData({ ...formData, metaTitle: e.target.value })}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageMetaDescription\">Meta Description</Label>\n              <Input\n                id=\"editPageMetaDescription\"\n                value={formData.metaDescription}\n                onChange={(e) => setFormData({ ...formData, metaDescription: e.target.value })}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"editPageMetaKeywords\">Meta Keywords</Label>\n              <Input\n                id=\"editPageMetaKeywords\"\n                value={formData.metaKeywords}\n                onChange={(e) => setFormData({ ...formData, metaKeywords: e.target.value })}\n              />\n            </div>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"editPublished\"\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({ ...formData, published: checked })}\n              />\n              <Label htmlFor=\"editPublished\">Pagina publiceren</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                id=\"editFeatured\"\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({ ...formData, featured: checked })}\n              />\n              <Label htmlFor=\"editFeatured\">Featured</Label>\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"editPageRanking\">Volgorde (ranking)</Label>\n            <Input\n              id=\"editPageRanking\"\n              type=\"number\"\n              value={formData.ranking}\n              onChange={(e) => setFormData({ ...formData, ranking: parseInt(e.target.value) || 0 })}\n            />\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\">Wijzigingen Opslaan</Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction ViewPageDialog({ open, onOpenChange, page }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  page: any; \n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>{page?.title}</DialogTitle>\n          <DialogDescription>/{page?.slug}</DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div className=\"flex gap-2\">\n            <Badge variant={page?.published ? \"default\" : \"outline\"}>\n              {page?.published ? \"Gepubliceerd\" : \"Concept\"}\n            </Badge>\n            {page?.featured && <Badge variant=\"secondary\">Featured</Badge>}\n            <Badge variant=\"outline\">{page?.template}</Badge>\n          </div>\n\n          {/* Header Image Preview */}\n          {page?.headerImage && (\n            <div>\n              <h3 className=\"font-semibold mb-2\">Header Afbeelding</h3>\n              <div className=\"relative h-32 w-full rounded-md overflow-hidden border\">\n                <img \n                  src={page.headerImage} \n                  alt={page.headerImageAlt || 'Header afbeelding'}\n                  className=\"w-full h-full object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                    e.currentTarget.nextElementSibling.style.display = 'flex';\n                  }}\n                />\n                <div className=\"hidden w-full h-full bg-gray-200 items-center justify-center\">\n                  <span className=\"text-gray-500 text-sm\">Afbeelding niet gevonden: {page.headerImage}</span>\n                </div>\n              </div>\n              <p className=\"text-sm text-gray-600 mt-1\">{page.headerImageAlt || 'Geen alt-tekst'}</p>\n            </div>\n          )}\n\n          <div>\n            <h3 className=\"font-semibold mb-2\">Content</h3>\n            <div className=\"bg-gray-50 p-4 rounded-md\">\n              <pre className=\"whitespace-pre-wrap text-sm\">{page?.content}</pre>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Title</h4>\n              <p className=\"text-sm text-gray-600\">{page?.metaTitle || 'Geen meta title'}</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Description</h4>\n              <p className=\"text-sm text-gray-600\">{page?.metaDescription || 'Geen meta description'}</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-1\">Meta Keywords</h4>\n              <p className=\"text-sm text-gray-600\">{page?.metaKeywords || 'Geen meta keywords'}</p>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <h4 className=\"font-medium mb-1\">Template</h4>\n              <p className=\"text-sm text-gray-600\">{page?.template}</p>\n            </div>\n            <div>\n              <h4 className=\"font-medium mb-1\">Ranking</h4>\n              <p className=\"text-sm text-gray-600\">{page?.ranking}</p>\n            </div>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button onClick={() => onOpenChange(false)}>Sluiten</Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nfunction PageManagement({ templates }: { templates: any[] }) {\n  const pagesQuery = useQuery({ queryKey: ['/api/admin/pages'] });\n  const deletedPagesQuery = useQuery({ queryKey: ['/api/admin/pages/deleted'] });\n  const [showRecycleBin, setShowRecycleBin] = useState(false);\n  const [showViewPage, setShowViewPage] = useState(false);\n  const [showEditPage, setShowEditPage] = useState(false);\n  const [selectedPage, setSelectedPage] = useState<any>(null);\n  const { toast } = useToast();\n\n  if (pagesQuery.isLoading) {\n    return (\n      <Card>\n        <CardContent className=\"p-6\">\n          <div className=\"text-center py-8\">\n            <p>Pagina's laden...</p>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const pages = pagesQuery.data || [];\n  const deletedPages = deletedPagesQuery.data || [];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics */}\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-blue-600\">{pages.length}</p>\n              <p className=\"text-sm text-gray-600\">Actieve Pagina's</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-green-600\">{pages.filter(p => p.published).length}</p>\n              <p className=\"text-sm text-gray-600\">Gepubliceerd</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-orange-600\">{deletedPages.length}</p>\n              <p className=\"text-sm text-gray-600\">In Prullenbak</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Pages List */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle>Pagina's</CardTitle>\n            <div className=\"flex gap-2\">\n              <Button \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => setShowRecycleBin(!showRecycleBin)}\n              >\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                {showRecycleBin ? 'Actieve Pagina\\'s' : 'Prullenbak'}\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {!showRecycleBin ? (\n            <div className=\"space-y-4\">\n              {pages.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <p>Nog geen pagina's aangemaakt</p>\n                </div>\n              ) : (\n                pages.map((page: any) => (\n                  <div key={page.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium\">{page.title}</h3>\n                      <p className=\"text-sm text-gray-600\">/{page.slug}</p>\n                      <div className=\"flex gap-2 mt-2\">\n                        <Badge variant={page.published ? \"default\" : \"outline\"}>\n                          {page.published ? \"Gepubliceerd\" : \"Concept\"}\n                        </Badge>\n                        {page.featured && <Badge variant=\"secondary\">Featured</Badge>}\n                        <Badge variant=\"outline\">{page.template}</Badge>\n                      </div>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => {\n                          setSelectedPage(page);\n                          setShowViewPage(true);\n                        }}\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => {\n                          setSelectedPage(page);\n                          setShowEditPage(true);\n                        }}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={async () => {\n                          try {\n                            await apiRequest(`/api/admin/pages/${page.id}`, { method: 'DELETE' });\n                            toast({ title: \"Succes\", description: \"Pagina verplaatst naar prullenbak\" });\n                            pagesQuery.refetch();\n                            deletedPagesQuery.refetch();\n                          } catch (error) {\n                            toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n                          }\n                        }}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {deletedPages.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <p>Prullenbak is leeg</p>\n                </div>\n              ) : (\n                deletedPages.map((page: any) => (\n                  <div key={page.id} className=\"flex items-center justify-between p-4 border rounded-lg bg-gray-50\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium text-gray-700\">{page.title}</h3>\n                      <p className=\"text-sm text-gray-500\">Verwijderd op {new Date(page.deletedAt).toLocaleDateString('nl-NL')}</p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={async () => {\n                          try {\n                            await apiRequest(`/api/admin/pages/${page.id}/restore`, { method: 'POST' });\n                            toast({ title: \"Succes\", description: \"Pagina hersteld\" });\n                            pagesQuery.refetch();\n                            deletedPagesQuery.refetch();\n                          } catch (error) {\n                            toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n                          }\n                        }}\n                      >\n                        <RotateCcw className=\"h-4 w-4 mr-2\" />\n                        Herstel\n                      </Button>\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={async () => {\n                          if (confirm('Weet je zeker dat je deze pagina permanent wilt verwijderen?')) {\n                            try {\n                              await apiRequest(`/api/admin/pages/${page.id}/permanent`, { method: 'DELETE' });\n                              toast({ title: \"Succes\", description: \"Pagina permanent verwijderd\" });\n                              deletedPagesQuery.refetch();\n                            } catch (error) {\n                              toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n                            }\n                          }\n                        }}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Page View Dialog */}\n      {showViewPage && selectedPage && (\n        <ViewPageDialog \n          open={showViewPage} \n          onOpenChange={setShowViewPage}\n          page={selectedPage}\n        />\n      )}\n\n      {/* Page Edit Dialog */}\n      {showEditPage && selectedPage && (\n        <EditPageDialog \n          open={showEditPage} \n          onOpenChange={setShowEditPage}\n          page={selectedPage}\n          templates={templates}\n          onPageUpdated={() => {\n            pagesQuery.refetch();\n            setShowEditPage(false);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\n// Activity Delete Function\nasync function handleDeleteActivity(activityId: number, activityName: string, activitiesQuery: any, toast: any) {\n  try {\n    const response = await fetch(`/api/admin/activities/${activityId}/soft-delete`, {\n      method: 'PATCH',\n      credentials: 'include'\n    });\n\n    if (response.ok) {\n      toast({ \n        title: \"Activiteit verwijderd\", \n        description: `${activityName} is naar de prullenbak verplaatst` \n      });\n      activitiesQuery.refetch();\n    } else {\n      throw new Error('Fout bij verwijderen activiteit');\n    }\n  } catch (error) {\n    toast({ \n      title: \"Fout\", \n      description: \"Er is een fout opgetreden bij het verwijderen\", \n      variant: \"destructive\" \n    });\n  }\n}\n\n// Motivation Image Selector Component\nfunction MotivationImageSelector({ \n  currentImage, \n  onImageSelect, \n  onImageUpload \n}: { \n  currentImage: string | null, \n  onImageSelect: (imagePath: string) => void,\n  onImageUpload: (file: File, locationName?: string) => Promise<string>\n}) {\n  const [availableImages, setAvailableImages] = useState<Array<{\n    name: string,\n    path: string,\n    fullPath: string,\n    locationName: string\n  }>>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editingLocation, setEditingLocation] = useState<string | null>(null);\n  const [editLocationName, setEditLocationName] = useState('');\n  const [newImageLocationName, setNewImageLocationName] = useState('');\n  const { toast } = useToast();\n\n  // Load available motivation images\n  useEffect(() => {\n    loadAvailableImages();\n  }, []);\n\n  const loadAvailableImages = async () => {\n    try {\n      // Get all files in motivatie folder with location names\n      const response = await fetch('/api/admin/images/motivatie', {\n        credentials: 'include'\n      });\n      \n      if (response.ok) {\n        const images = await response.json();\n        setAvailableImages(images);\n      }\n    } catch (error) {\n      console.error('Error loading motivation images:', error);\n    }\n  };\n\n  const handleLocationNameUpdate = async (imagePath: string, newLocationName: string) => {\n    try {\n      const response = await fetch('/api/admin/images/motivatie/location', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ imagePath, locationName: newLocationName })\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        \n        toast({ \n          title: \"Succes\", \n          description: result.renamed ? \"Locatie naam en bestand bijgewerkt\" : \"Locatie naam bijgewerkt\"\n        });\n        \n        // Update local state with new image path if file was renamed\n        const finalImagePath = result.newImagePath || imagePath;\n        setAvailableImages(images => \n          images.map(img => \n            img.path === imagePath \n              ? { ...img, path: finalImagePath, locationName: newLocationName }\n              : img\n          )\n        );\n        \n        // If file was renamed and this is the current selected image, update parent\n        if (result.renamed && currentImage === imagePath) {\n          onImageSelect(finalImagePath);\n        }\n        \n        // Invalidate homepage motivation cache to reflect location changes\n        queryClient.invalidateQueries({ queryKey: [\"/api/motivation\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/motivation/image-location\"] });\n        \n        // Refresh the image list to show updated filenames\n        await loadAvailableImages();\n        \n        setEditingLocation(null);\n        setEditLocationName('');\n      } else {\n        throw new Error('Kon locatie naam niet bijwerken');\n      }\n    } catch (error) {\n      toast({ \n        title: \"Fout\", \n        description: \"Kon locatie naam niet bijwerken\", \n        variant: \"destructive\" \n      });\n    }\n  };\n\n  const handleUpload = async (file: File) => {\n    setIsLoading(true);\n    try {\n      await onImageUpload(file, newImageLocationName.trim() || undefined);\n      setNewImageLocationName(''); // Clear the input after successful upload\n      await loadAvailableImages(); // Refresh the list\n    } catch (error) {\n      // Error handling is done in parent\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDelete = async (imagePath: string) => {\n    if (!confirm('Weet je zeker dat je deze afbeelding wilt verwijderen?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('/api/admin/images/delete', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify({ imagePath })\n      });\n\n      if (response.ok) {\n        toast({ \n          title: \"Succes\", \n          description: \"Afbeelding verwijderd\" \n        });\n        \n        // If deleted image was selected, clear selection\n        if (currentImage === imagePath) {\n          onImageSelect('');\n        }\n        \n        await loadAvailableImages(); // Refresh the list\n      } else {\n        throw new Error('Kon afbeelding niet verwijderen');\n      }\n    } catch (error) {\n      toast({ \n        title: \"Fout\", \n        description: \"Kon afbeelding niet verwijderen\", \n        variant: \"destructive\" \n      });\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"space-y-2\">\n        <Label>Motivatie Afbeeldingen</Label>\n        \n        {/* Upload Section */}\n        <div className=\"border rounded-lg p-3 bg-gray-50\">\n          <div className=\"space-y-3\">\n            <div>\n              <Label htmlFor=\"newLocationName\" className=\"text-sm\">Locatie naam (optioneel)</Label>\n              <Input\n                id=\"newLocationName\"\n                type=\"text\"\n                placeholder=\"Bijv. Tatra Mountains, Krakow...\"\n                value={newImageLocationName}\n                onChange={(e) => setNewImageLocationName(e.target.value)}\n                className=\"mt-1\"\n              />\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={(e) => {\n                  const file = e.target.files?.[0];\n                  if (file) {\n                    handleUpload(file);\n                  }\n                }}\n                className=\"hidden\"\n                id=\"motivationImageUpload\"\n              />\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                size=\"sm\"\n                onClick={() => document.getElementById('motivationImageUpload')?.click()}\n                disabled={isLoading}\n                className=\"flex-1\"\n              >\n                <Upload className=\"h-4 w-4 mr-2\" />\n                {isLoading ? 'Uploading...' : 'Upload Nieuwe Afbeelding'}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Current Selection */}\n      {currentImage && (\n        <div className=\"space-y-2\">\n          <Label className=\"text-sm text-gray-600\">Huidige selectie:</Label>\n          <div className=\"relative\">\n            <img \n              src={currentImage} \n              alt=\"Huidige motivatie afbeelding\"\n              className=\"w-full max-w-md h-32 object-cover rounded-md border\"\n              onError={(e) => {\n                e.currentTarget.src = \"/images/motivatie/tatra-valley.jpg\";\n              }}\n            />\n            <div className=\"absolute top-2 right-2\">\n              <Badge variant=\"secondary\" className=\"text-xs\">Actief</Badge>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Available Images Gallery */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-sm text-gray-600\">Beschikbare afbeeldingen ({availableImages.length}):</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {availableImages.map((image, index) => (\n            <div \n              key={index} \n              className={`relative group border rounded-md overflow-hidden transition-all ${\n                currentImage === image.path ? 'ring-2 ring-blue-500' : 'hover:ring-2 hover:ring-gray-300'\n              }`}\n            >\n              <div className=\"cursor-pointer\" onClick={() => onImageSelect(image.path)}>\n                <img \n                  src={image.path} \n                  alt={`Motivatie afbeelding: ${image.locationName}`}\n                  className=\"w-full h-32 object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.src = \"/images/motivatie/tatra-valley.jpg\";\n                  }}\n                />\n                \n                {/* Location name overlay */}\n                <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white p-2\">\n                  {editingLocation === image.path ? (\n                    <div className=\"flex gap-2\" onClick={(e) => e.stopPropagation()}>\n                      <input\n                        type=\"text\"\n                        value={editLocationName}\n                        onChange={(e) => setEditLocationName(e.target.value)}\n                        className=\"flex-1 px-2 py-1 text-xs bg-white text-black rounded\"\n                        placeholder=\"Locatie naam\"\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter') {\n                            handleLocationNameUpdate(image.path, editLocationName);\n                          } else if (e.key === 'Escape') {\n                            setEditingLocation(null);\n                            setEditLocationName('');\n                          }\n                        }}\n                        autoFocus\n                      />\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        variant=\"secondary\"\n                        onClick={() => handleLocationNameUpdate(image.path, editLocationName)}\n                      >\n                        <Check className=\"h-3 w-3\" />\n                      </Button>\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setEditingLocation(null);\n                          setEditLocationName('');\n                        }}\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  ) : (\n                    <div className=\"flex justify-between items-center\">\n                      <span className=\"text-sm font-medium\">{image.locationName}</span>\n                      <Button\n                        type=\"button\"\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        className=\"h-6 w-6 p-0 text-white hover:bg-white hover:text-black\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setEditingLocation(image.path);\n                          setEditLocationName(image.locationName);\n                        }}\n                      >\n                        <Edit className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              {/* Action buttons overlay */}\n              <div className=\"absolute top-0 right-0 p-2\">\n                <div className=\"hidden group-hover:flex gap-2\">\n                  <Button\n                    type=\"button\"\n                    size=\"sm\"\n                    variant=\"secondary\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onImageSelect(image.path);\n                    }}\n                  >\n                    <Check className=\"h-3 w-3\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    size=\"sm\"\n                    variant=\"destructive\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDelete(image.path);\n                    }}\n                  >\n                    <Trash className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              </div>\n              \n              {/* Selected indicator */}\n              {currentImage === image.path && (\n                <div className=\"absolute top-2 left-2\">\n                  <div className=\"bg-blue-500 text-white rounded-full p-1\">\n                    <Check className=\"h-3 w-3\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {availableImages.length === 0 && (\n          <div className=\"text-center py-8 text-gray-500\">\n            <ImageIcon className=\"mx-auto h-12 w-12 mb-2 opacity-50\" />\n            <p>Geen afbeeldingen gevonden</p>\n            <p className=\"text-sm\">Upload een afbeelding om te beginnen</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":355931},"client/src/pages/home.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Search, Settings } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\n\nexport default function Home() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [isSearching, setIsSearching] = useState(false);\n  \n  // Close search handler that preserves ability to re-search\n  const closeSearch = () => {\n    console.log('Closing search overlay');\n    setShowSearchResults(false);\n    setIsSearching(false);\n    // Keep searchQuery and searchResults so user can re-open same search\n  };\n\n  // Helper function to get type-specific styling for search results\n  const getTypeStyles = (type: string) => {\n    switch (type) {\n      case 'destination':\n        return 'bg-green-100 text-green-700';\n      case 'activity':\n        return 'bg-orange-100 text-orange-700';\n      case 'highlight':\n        return 'bg-yellow-100 text-yellow-700';\n      case 'guide':\n        return 'bg-blue-100 text-blue-700';\n      case 'page':\n        return 'bg-purple-100 text-purple-700';\n      case 'template':\n        return 'bg-gray-100 text-gray-700';\n      default:\n        return 'bg-blue-100 text-blue-600';\n    }\n  };\n\n  // Helper function to get user-friendly type labels\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'destination':\n        return 'üèîÔ∏è Bestemmingen';\n      case 'activity':\n        return 'üéØ Activiteiten';\n      case 'highlight':\n        return '‚ú® Hoogtepunten';\n      case 'guide':\n        return 'üìñ Reizen';\n      case 'page':\n        return 'üìÑ Pagina';\n      case 'template':\n        return 'üé® Template';\n      default:\n        return type;\n    }\n  };\n  \n  // Fetch destinations and guides from API (homepage specific)\n  const { data: destinations = [], isLoading: destinationsLoading } = useQuery({\n    queryKey: [\"/api/destinations/homepage\"],\n  });\n  \n  const { data: guides = [], isLoading: guidesLoading } = useQuery({\n    queryKey: [\"/api/guides/homepage\"],\n  });\n\n  const { data: pages = [], isLoading: pagesLoading } = useQuery({\n    queryKey: [\"/api/pages\"],\n  });\n\n  // Fetch featured activities from database (replaces old highlights)\n  const { data: featuredActivities = [], isLoading: featuredLoading } = useQuery({\n    queryKey: [\"/api/admin/activities\"],\n    queryFn: async () => {\n      const response = await fetch('/api/admin/activities');\n      if (!response.ok) {\n        throw new Error('Failed to fetch activities');\n      }\n      const activities = await response.json();\n      // Filter for featured and published activities only\n      return activities.filter(activity => activity.featured === true && activity.published === true);\n    },\n  });\n\n  // Fetch site settings\n  const { data: siteSettings, isLoading: settingsLoading } = useQuery({\n    queryKey: [\"/api/site-settings\"],\n  });\n\n  // Fetch search configuration for homepage context\n  const { data: searchConfig } = useQuery({\n    queryKey: [\"/api/search-config/homepage\"],\n  });\n\n  // Fetch motivation data for CTA section\n  const { data: motivationData } = useQuery({\n    queryKey: [\"/api/motivation\"],\n  });\n\n  // Fetch motivation image location name\n  const { data: motivationImageLocation } = useQuery({\n    queryKey: [\"/api/motivation/image-location\", motivationData?.image],\n    queryFn: async () => {\n      if (!motivationData?.image) return null;\n      const response = await fetch(`/api/motivation/image-location?imagePath=${encodeURIComponent(motivationData.image)}`);\n      if (!response.ok) throw new Error('Failed to fetch location');\n      return response.json();\n    },\n    enabled: !!motivationData?.image,\n  });\n\n  // Update document title and meta tags when site settings change\n  useEffect(() => {\n    if (siteSettings) {\n      document.title = siteSettings.siteName || \"Ontdek Polen\";\n      \n      // Update meta description\n      let metaDescription = document.querySelector('meta[name=\"description\"]');\n      if (!metaDescription) {\n        metaDescription = document.createElement('meta');\n        metaDescription.setAttribute('name', 'description');\n        document.head.appendChild(metaDescription);\n      }\n      metaDescription.setAttribute('content', siteSettings.siteDescription || \"Ontdek de mooiste plekken van Polen\");\n      \n      // Update meta keywords\n      let metaKeywords = document.querySelector('meta[name=\"keywords\"]');\n      if (!metaKeywords) {\n        metaKeywords = document.createElement('meta');\n        metaKeywords.setAttribute('name', 'keywords');\n        document.head.appendChild(metaKeywords);\n      }\n      metaKeywords.setAttribute('content', siteSettings.metaKeywords || \"Polen, reizen, vakantie, bestemmingen\");\n      \n      // Update favicon - handle enabled/disabled state\n      const existingFavicon = document.querySelector('link[rel=\"icon\"]');\n      \n      if (siteSettings.faviconEnabled === true && siteSettings.favicon) {\n        // Favicon enabled and has path - use server route which checks database\n        if (existingFavicon) {\n          existingFavicon.setAttribute('href', '/favicon.ico?' + Date.now()); // Cache bust\n        } else {\n          const newFavicon = document.createElement('link');\n          newFavicon.setAttribute('rel', 'icon');\n          newFavicon.setAttribute('href', '/favicon.ico?' + Date.now()); // Cache bust\n          document.head.appendChild(newFavicon);\n        }\n      } else {\n        // Favicon disabled - remove any existing favicon\n        if (existingFavicon) {\n          existingFavicon.remove();\n        }\n        // Force browser to not show any favicon by using empty data URL\n        const emptyFavicon = document.createElement('link');\n        emptyFavicon.setAttribute('rel', 'icon');\n        emptyFavicon.setAttribute('href', 'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=');\n        document.head.appendChild(emptyFavicon);\n      }\n      \n      // Add custom CSS\n      if (siteSettings.customCSS) {\n        let customStyle = document.querySelector('#custom-site-css');\n        if (!customStyle) {\n          customStyle = document.createElement('style');\n          customStyle.id = 'custom-site-css';\n          document.head.appendChild(customStyle);\n        }\n        customStyle.textContent = siteSettings.customCSS;\n      }\n      \n      // Add custom JavaScript\n      if (siteSettings.customJS) {\n        let customScript = document.querySelector('#custom-site-js');\n        if (!customScript) {\n          customScript = document.createElement('script');\n          customScript.id = 'custom-site-js';\n          document.head.appendChild(customScript);\n        }\n        customScript.textContent = siteSettings.customJS;\n      }\n      \n      // Add Google Analytics\n      if (siteSettings.googleAnalyticsId) {\n        let gaScript = document.querySelector('#google-analytics');\n        if (!gaScript) {\n          gaScript = document.createElement('script');\n          gaScript.id = 'google-analytics';\n          gaScript.async = true;\n          gaScript.src = `https://www.googletagmanager.com/gtag/js?id=${siteSettings.googleAnalyticsId}`;\n          document.head.appendChild(gaScript);\n          \n          const gaConfig = document.createElement('script');\n          gaConfig.textContent = `\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '${siteSettings.googleAnalyticsId}');\n          `;\n          document.head.appendChild(gaConfig);\n        }\n      }\n    }\n  }, [siteSettings]);\n\n  // Filter only published destinations\n  const publishedDestinations = destinations.filter((destination: any) => destination.published);\n  \n  // Filter only published guides\n  const publishedGuides = guides.filter((guide: any) => guide.published);\n  \n  // Filter only published pages\n  const publishedPages = pages.filter((page: any) => page.published);\n  \n  // Show loading state\n  if (destinationsLoading || guidesLoading || pagesLoading || featuredLoading || settingsLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ backgroundColor: \"#f8f6f1\" }}>\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-lg\">Laden...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!searchQuery.trim()) return;\n    \n    console.log('=== SEARCH DEBUG ===');\n    console.log('Starting search for:', searchQuery);\n    console.log('Current showSearchResults:', showSearchResults);\n    console.log('Current searchResults length:', searchResults.length);\n    console.log('Current isSearching:', isSearching);\n    \n    // Always perform fresh search - don't cache results\n    setIsSearching(true);\n    setShowSearchResults(true);\n    \n    try {\n      const searchScope = searchConfig?.searchScope || 'destinations';\n      const url = `/api/search?q=${encodeURIComponent(searchQuery)}&scope=${searchScope}`;\n      console.log('Fetching URL:', url);\n      \n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      console.log('API Response:', data);\n      console.log('Results count:', data.results?.length || 0);\n      \n      setSearchResults(data.results || []);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n      console.log('=== SEARCH COMPLETE ===');\n    }\n  };\n\n  const handlePlanTrip = () => {\n    console.log(\"Planning trip...\");\n    // TODO: Implement trip planning logic\n  };\n\n  const handleReadGuides = () => {\n    console.log(\"Reading guides...\");\n    // TODO: Implement guide reading functionality\n  };\n\n  return (\n    <div className=\"min-h-screen\" style={{ backgroundColor: \"#f8f6f1\" }}>\n      {/* Hero Section */}\n      <header \n        className=\"relative bg-cover bg-center text-white py-24 px-5 text-center\"\n        style={{\n          backgroundImage: siteSettings?.backgroundImage \n            ? `url('${siteSettings.backgroundImage}')` \n            : \"url('/images/header.jpg')\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\"\n        }}\n      >\n        {siteSettings?.headerOverlayEnabled && (\n          <div \n            className=\"absolute inset-0 bg-black\" \n            style={{ opacity: (siteSettings?.headerOverlayOpacity || 30) / 100 }}\n          ></div>\n        )}\n        <div className=\"relative z-10 max-w-4xl mx-auto\">\n          <h1 className=\"text-5xl font-bold mb-3 font-inter\">\n            {siteSettings?.siteName || \"Ontdek Polen\"}\n          </h1>\n          <p className=\"text-xl mb-8 font-inter\">\n            {siteSettings?.siteDescription || \"Mooie plekken in Polen ontdekken\"}\n          </p>\n          \n          <form \n            onSubmit={(e) => {\n              console.log('Form submit event triggered');\n              handleSearch(e);\n            }} \n            className=\"mt-5 mb-5 relative\"\n          >\n            <div className=\"relative inline-block\">\n              <Input\n                type=\"text\"\n                placeholder={searchConfig?.placeholderText || \"Zoek bestemming\"}\n                value={searchQuery}\n                onChange={(e) => {\n                  console.log('Search input changed:', e.target.value);\n                  setSearchQuery(e.target.value);\n                }}\n                onKeyDown={(e) => {\n                  console.log('Key pressed:', e.key);\n                  if (e.key === 'Enter') {\n                    console.log('Enter key detected, form should submit');\n                  }\n                }}\n                className=\"py-3 px-5 w-80 max-w-full border-none rounded-lg text-base text-gray-900 font-inter\"\n              />\n              <Search \n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4 cursor-pointer\" \n                onClick={() => {\n                  console.log('Search icon clicked');\n                  if (searchQuery.trim()) {\n                    const form = document.querySelector('form');\n                    if (form) {\n                      form.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));\n                    }\n                  }\n                }}\n              />\n            </div>\n            {/* Debug state indicator */}\n            {showSearchResults && (\n              <div className=\"absolute top-16 left-0 bg-red-500 text-white px-2 py-1 text-xs rounded\">\n                Search Active: {isSearching ? 'Searching...' : `${searchResults.length} results`}\n              </div>\n            )}\n          </form>\n          \n\n          \n          <Button\n            onClick={handlePlanTrip}\n            className=\"mt-4 py-3 px-6 text-base font-inter hover:opacity-90 transition-all duration-200\"\n            style={{ backgroundColor: \"#2f3e46\" }}\n          >\n            Plan je reis\n          </Button>\n        </div>\n      </header>\n\n      {/* Search Results Overlay */}\n      {showSearchResults && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-40 z-50\"\n          onClick={closeSearch}\n        >\n          <div \n            className=\"absolute top-80 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-2xl p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto border-2 border-blue-200\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Zoekresultaten{searchQuery && ` voor \"${searchQuery}\"`}\n              </h3>\n              <button \n                onClick={closeSearch}\n                className=\"text-gray-500 hover:text-gray-700 text-2xl leading-none\"\n              >\n                √ó\n              </button>\n            </div>\n            \n            {isSearching ? (\n              <div className=\"text-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n                <p className=\"mt-4 text-gray-600\">Zoeken...</p>\n              </div>\n            ) : searchResults.length > 0 ? (\n              <div className=\"space-y-3\">\n                {searchResults.map((result: any) => (\n                  <Link key={result.id} href={result.link || `/${result.slug}`}>\n                    <div className=\"p-4 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-200 transition-all duration-200\">\n                      <div className=\"flex items-center space-x-4\">\n                        {result.image && (\n                          <img \n                            src={result.image} \n                            alt={result.alt || result.name} \n                            className=\"w-16 h-16 object-cover rounded-lg\"\n                          />\n                        )}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900 mb-1\">{result.name || result.title}</h4>\n                          <p className=\"text-sm text-gray-600 mb-2\">{result.description}</p>\n                          <span className={`text-xs px-2 py-1 rounded capitalize ${getTypeStyles(result.type)}`}>\n                            {getTypeLabel(result.type)}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </Link>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-600\">\n                  Geen resultaten gevonden voor \"{searchQuery}\"\n                </p>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  Probeer een andere zoekterm\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Destinations Section */}\n      {siteSettings?.showDestinations && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n        <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n          Bestemmingen\n        </h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5\">\n          {publishedDestinations.map((destination) => {\n            const CardContent = (\n              <Card \n                className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\"\n              >\n                <img\n                  src={destination.image}\n                  alt={destination.alt}\n                  className=\"w-full h-40 object-cover\"\n                />\n                <div className=\"p-4 font-bold font-inter text-gray-900\">\n                  {destination.name}\n                </div>\n              </Card>\n            );\n\n            // OPTIMIZED: Auto-link all destinations to their optimized routes\n            // External links take precedence, then auto-generated destination links\n            if (destination.link && destination.link.startsWith('http')) {\n              // External link - open in new tab\n              return (\n                <a\n                  key={destination.id}\n                  href={destination.link}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {CardContent}\n                </a>\n              );\n            } else {\n              // Auto-link to destination slug (optimized route)\n              // This uses the new destination-first API that tries destinations before pages\n              return (\n                <Link key={destination.id} href={`/${destination.slug}`}>\n                  {CardContent}\n                </Link>\n              );\n            }\n          })}\n        </div>\n        </section>\n      )}\n\n\n\n      {/* CTA Section - Dynamic from Database */}\n      {siteSettings?.showMotivation && motivationData && motivationData.is_published && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <div className=\"flex flex-wrap gap-8 items-center justify-between\">\n            <div className=\"flex-1 min-w-80\">\n              <h2 className=\"text-3xl font-bold mb-4 font-inter text-gray-900\">\n                {motivationData.title || \"Laat je verrassen door het onbekende Polen\"}\n              </h2>\n              <p className=\"text-lg mb-6 font-inter text-gray-700\">\n                {motivationData.description || \"Bezoek historische steden, ontdek natuurparken en verborgen parels. Onze reisgidsen helpen je op weg!\"}\n              </p>\n              <Button\n                onClick={handleReadGuides}\n                className=\"py-3 px-6 text-base font-inter hover:opacity-90 transition-all duration-200\"\n                style={{ backgroundColor: \"#2f3e46\" }}\n              >\n                {motivationData.button_text || \"Lees onze reizen\"}\n              </Button>\n            </div>\n            <div className=\"flex-1 min-w-80 relative\">\n              <img\n                src={motivationData.image || \"/images/motivatie/tatra-valley.jpg\"}\n                alt=\"Motivatie afbeelding\"\n                className=\"w-full rounded-xl shadow-lg\"\n                onError={(e) => {\n                  e.currentTarget.src = \"/images/motivatie/tatra-valley.jpg\";\n                }}\n              />\n              {/* Location name overlay */}\n              {motivationImageLocation?.locationName && (\n                <div className=\"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white px-2 py-1 rounded text-sm font-medium shadow-lg z-10\">\n                  üìç {motivationImageLocation.locationName}\n                </div>\n              )}\n            </div>\n          </div>\n        </section>\n      )}\n\n      {/* Featured Activities Section - From Database */}\n      {siteSettings?.showHighlights && featuredActivities.length > 0 && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n            Hoogtepunten van Polen\n          </h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n            {featuredActivities\n              .sort((a, b) => (a.ranking || 0) - (b.ranking || 0)) // Sort by ranking\n              .map((activity) => {\n                const CardContent = (\n                  <div className=\"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer text-center\">\n                    <img\n                      src={activity.image || '/images/activities/placeholder.svg'}\n                      alt={activity.alt || activity.name}\n                      className=\"w-16 h-16 mx-auto mb-3 object-cover rounded-lg\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/images/activities/placeholder.svg';\n                      }}\n                    />\n                    <h3 className=\"font-bold font-inter text-gray-900 text-sm\">\n                      {activity.name}\n                    </h3>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      üìç {activity.location}\n                    </p>\n                    {activity.category && (\n                      <p className=\"text-xs text-blue-600 mt-1 capitalize\">\n                        {activity.category}\n                      </p>\n                    )}\n                  </div>\n                );\n\n                // Handle external links\n                if (activity.link && activity.link.startsWith('http')) {\n                  return (\n                    <a\n                      key={activity.id}\n                      href={activity.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {CardContent}\n                    </a>\n                  );\n                }\n\n                // Internal link or no link\n                return <div key={activity.id}>{CardContent}</div>;\n              })}\n          </div>\n        </section>\n      )}\n\n      {/* Published Pages */}\n      {siteSettings?.showOntdekMeer && publishedPages.length > 0 && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <div className=\"flex justify-between items-center mb-8\">\n            <h2 className=\"text-3xl font-bold font-inter text-gray-900\">\n              Ontdek Meer\n            </h2>\n            <Link href=\"/ontdek-meer\">\n              <Button\n                variant=\"outline\"\n                className=\"text-gray-900 border-gray-300 hover:bg-gray-100\"\n              >\n                Bekijk Alles\n              </Button>\n            </Link>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\">\n            {publishedPages.map((page) => (\n              <Link href={`/${page.slug}`} key={page.id}>\n                <Card className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\">\n                  <div className=\"p-6\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <h3 className=\"text-xl font-bold font-inter text-gray-900\">\n                        {page.title}\n                      </h3>\n                      {page.featured && (\n                        <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n                          Uitgelicht\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-gray-600 text-sm mb-4 font-inter\">\n                      {page.metaDescription}\n                    </p>\n                    <div className=\"flex items-center text-xs text-gray-500\">\n                      <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded\">\n                        {page.template}\n                      </span>\n                      <span className=\"ml-2\">\n                        {new Date(page.createdAt).toLocaleDateString('nl-NL')}\n                      </span>\n                    </div>\n                  </div>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        </section>\n      )}\n\n      {/* Travel Guides */}\n      {siteSettings?.showGuides && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n          Reizen en Tips\n        </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\">\n            {publishedGuides.map((guide) => {\n            const CardContent = (\n              <Card \n                className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\"\n              >\n                <img\n                  src={guide.image}\n                  alt={guide.alt}\n                  className=\"w-full h-40 object-cover\"\n                />\n                <div className=\"p-4 font-bold font-inter text-gray-900\">\n                  {guide.title}\n                </div>\n              </Card>\n            );\n\n            // If guide has a link, wrap in Link component or external link\n            if (guide.link) {\n              // Check if it's an external link (starts with http)\n              if (guide.link.startsWith('http')) {\n                return (\n                  <a\n                    key={guide.id}\n                    href={guide.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {CardContent}\n                  </a>\n                );\n              } else {\n                // Internal link\n                return (\n                  <Link key={guide.id} href={guide.link}>\n                    {CardContent}\n                  </Link>\n                );\n              }\n            }\n\n            // No link, just return the card\n            return <div key={guide.id}>{CardContent}</div>;\n            })}\n          </div>\n        </section>\n      )}\n\n      {/* Footer */}\n      <footer \n        className=\"text-center py-10 px-5 text-white relative\"\n        style={{ backgroundColor: \"#2f3e46\" }}\n      >\n        {/* Admin Link */}\n        <Link href=\"/admin\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"absolute top-4 right-4 text-white border-white hover:bg-white hover:text-gray-900\"\n          >\n            <Settings className=\"h-4 w-4 mr-2\" />\n            Admin\n          </Button>\n        </Link>\n        \n        <p className=\"font-inter\">\n          &copy; 2025 {siteSettings?.siteName || \"Ontdek Polen\"}. Alle rechten voorbehouden.\n        </p>\n      </footer>\n    </div>\n  );\n}\n","size_bytes":27403},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"STADIUM_1_BACKUP.md":{"content":"# Stadium 1 Backup - Ontdek Polen Travel Website\n\n**Date**: 2025-01-15\n**Status**: ‚úÖ COMPLETE AND STABLE\n\n## Stadium 1 Features Implemented\n\n### Core Website Features\n- ‚úÖ Complete Polish travel website \"Ontdek Polen\" with Dutch interface\n- ‚úÖ Responsive design with mobile-first approach\n- ‚úÖ Modern UI using Tailwind CSS and shadcn/ui components\n- ‚úÖ Dynamic content loading from PostgreSQL database\n\n### Authentication & User Management\n- ‚úÖ Multi-user authentication system \n- ‚úÖ Role-based permissions (admin/editor/viewer)\n- ‚úÖ User creation, editing, and management\n- ‚úÖ Password reset functionality\n- ‚úÖ Session management with PostgreSQL storage\n\n### Content Management System (CMS)\n- ‚úÖ Full CMS for destinations and travel guides\n- ‚úÖ Content creation, editing, and publishing\n- ‚úÖ Image upload and management system\n- ‚úÖ Soft delete system with recycle bin functionality\n- ‚úÖ Content ranking and ordering system\n- ‚úÖ Proactive archiving system for image conflicts\n\n### Database Integration\n- ‚úÖ PostgreSQL database with Neon serverless integration\n- ‚úÖ Drizzle ORM for type-safe database operations\n- ‚úÖ Complete schema with users, destinations, guides, and site_settings tables\n- ‚úÖ Database migrations and schema management\n\n### Site Settings & SEO\n- ‚úÖ Complete site settings CMS system\n- ‚úÖ Dynamic head element management (title, meta, favicon)\n- ‚úÖ Custom CSS and JavaScript injection\n- ‚úÖ Google Analytics integration\n- ‚úÖ Background image management\n- ‚úÖ Logo and social media image settings\n- ‚úÖ **FULLY WORKING**: Frontend integration of all site settings\n\n### Admin Interface\n- ‚úÖ Comprehensive admin panel with tabbed interface\n- ‚úÖ User management (create, edit, delete, role assignment)\n- ‚úÖ Content management (destinations and guides)\n- ‚úÖ Recycle bin with restore and permanent delete\n- ‚úÖ Image management with trash system\n- ‚úÖ Site settings management\n- ‚úÖ Real-time query cache invalidation\n\n### Technical Implementation\n- ‚úÖ Express.js backend with TypeScript\n- ‚úÖ React frontend with Vite build system\n- ‚úÖ TanStack Query for state management\n- ‚úÖ File upload handling with Multer\n- ‚úÖ Input validation with Zod\n- ‚úÖ Error handling and logging\n\n### Recent Fixes & Improvements\n- ‚úÖ Header background images swapped (header.jpg ‚Üî header-background.jpg)\n- ‚úÖ Site settings now dynamically update frontend\n- ‚úÖ Document title changes based on CMS settings\n- ‚úÖ Meta description and keywords dynamically loaded\n- ‚úÖ Favicon dynamically updated from CMS\n- ‚úÖ Custom CSS/JS injection working\n- ‚úÖ Google Analytics auto-integration\n\n## Database Schema (Stadium 1)\n\n### Users Table\n- id (primary key)\n- username (unique)\n- password (hashed)\n- role (admin/editor/viewer)\n- permissions (canCreateContent, canEditContent, canDeleteContent, canManageUsers)\n- created_at, updated_at\n\n### Destinations Table\n- id (primary key)\n- name, slug (unique)\n- description, image, alt\n- published, is_deleted, deleted_at\n- ranking, created_at, updated_at\n\n### Guides Table\n- id (primary key)\n- title, slug (unique)\n- description, image, alt\n- published, is_deleted, deleted_at\n- ranking, created_at, updated_at\n\n### Site Settings Table\n- id (primary key)\n- siteName, siteDescription, metaKeywords\n- favicon, backgroundImage, logoImage, socialMediaImage\n- customCSS, customJS, googleAnalyticsId\n- isActive, created_at, updated_at\n\n## File Structure (Stadium 1)\n\n```\n‚îú‚îÄ‚îÄ client/                 # React frontend\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/ui/  # shadcn/ui components\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # home.tsx, admin.tsx, not-found.tsx\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # useSiteSettings.ts, use-toast.ts\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lib/           # queryClient.ts, utils.ts\n‚îÇ   ‚îú‚îÄ‚îÄ public/images/     # Static images with .trash subfolder\n‚îÇ   ‚îî‚îÄ‚îÄ index.html         # Main HTML template\n‚îú‚îÄ‚îÄ server/                # Express backend\n‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # Main server file\n‚îÇ   ‚îú‚îÄ‚îÄ routes.ts         # API routes\n‚îÇ   ‚îú‚îÄ‚îÄ storage.ts        # Database operations\n‚îÇ   ‚îî‚îÄ‚îÄ db.ts             # Database connection\n‚îú‚îÄ‚îÄ shared/\n‚îÇ   ‚îî‚îÄ‚îÄ schema.ts         # Database schema & validation\n‚îî‚îÄ‚îÄ content/              # CMS content storage\n    ‚îú‚îÄ‚îÄ destinations/     # Destination JSON files\n    ‚îî‚îÄ‚îÄ guides/          # Guide JSON files\n```\n\n## API Endpoints (Stadium 1)\n\n### Authentication\n- POST /api/login\n- POST /api/logout\n- GET /api/auth/status\n\n### Users\n- GET /api/users\n- POST /api/users\n- PATCH /api/users/:id\n- DELETE /api/users/:id\n- POST /api/users/:id/reset-password\n\n### Destinations\n- GET /api/destinations (published only)\n- GET /api/admin/destinations (all)\n- GET /api/admin/destinations/deleted\n- POST /api/admin/destinations\n- PATCH /api/admin/destinations/:id\n- PATCH /api/admin/destinations/:id/soft-delete\n- DELETE /api/admin/destinations/:id\n\n### Guides\n- GET /api/guides (published only)\n- GET /api/admin/guides (all)\n- GET /api/admin/guides/deleted\n- POST /api/admin/guides\n- PATCH /api/admin/guides/:id\n- PATCH /api/admin/guides/:id/soft-delete\n- DELETE /api/admin/guides/:id\n\n### Site Settings\n- GET /api/site-settings\n- PUT /api/admin/site-settings\n\n### Images\n- POST /api/admin/upload-image\n- GET /api/admin/images/trash\n- DELETE /api/admin/images/trash/:filename\n\n## How to Restore Stadium 1\n1. Use current codebase state (as of 2025-01-15)\n2. Database schema is complete and stable\n3. All features are tested and working\n4. Site settings are fully integrated with frontend\n5. Header images are in correct positions\n\n## Next Development Phase (Stadium 2)\nReady for additional features:\n- Search functionality\n- Content filtering and categorization\n- Advanced SEO features\n- User feedback system\n- Enhanced mobile experience\n- Performance optimizations\n- Additional content types\n- Social media integration\n- Newsletter system\n- Advanced analytics\n\n---\n**Stadium 1 Backup Complete** - All core features implemented and tested successfully.","size_bytes":6037},"server/migrate-data.ts":{"content":"import { storage } from \"./storage\";\n\n// Import existing data\nconst destinationsData = [\n  {\n    \"id\": 4,\n    \"name\": \"Bialowieza\",\n    \"slug\": \"bialowieza\",\n    \"image\": \"/images/bialowieza.jpg\",\n    \"alt\": \"Bialowieza\",\n    \"description\": \"Ontdek het laatste oerbos van Europa in Bialowieza, thuisbasis van de Europese bizon\",\n    \"content\": \"# Bialowieza\\n\\nBialowieza Forest is het laatste oerbos van Europa en een UNESCO Werelderfgoedlocatie. Dit unieke natuurgebied herbergt de Europese bizon en vele andere wilde dieren.\\n\\n## Natuur highlights\\n\\n- **Europese bizons** - De koning van het bos, terug van de rand van uitsterven\\n- **Oerbos** - Bomen die honderden jaren oud zijn\\n- **Wilde dieren** - Wolven, lynxen, elanden en meer dan 250 vogelsoorten\\n- **Oude eiken** - Sommige meer dan 500 jaar oud\\n\\n## Activiteiten\\n\\n- **Geleide tours** - Verplicht voor toegang tot het stricte natuurreservaat\\n- **Fietsen** - Prachtige fietspaden door het bos\\n- **Birdwatching** - Ideaal voor vogelliefhebbers\\n- **Natuurfotografie** - Unieke kansen voor wildlife fotografie\\n\\n## Bezoekersinfo\\n\\n- **Toegang** - Alleen met gids toegestaan in het kerngebied\\n- **Beste seizoen** - Mei tot oktober voor beste wildlife kansen\\n- **Kleding** - Stevige schoenen en insectenspray zijn essentieel\\n- **Respect** - Volg altijd de natuurregels en blijf op de paden\\n\\n## Accommodatie\\n\\n- **Bia≈Çowie≈ºa dorp** - Basis voor je bosavontuur\\n- **Lokale guesthouses** - Authentieke ervaring\\n- **Natuurcentrum** - Educatieve tentoonstellingen over het bos\",\n    \"featured\": false,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 3,\n    \"name\": \"Gdansk\",\n    \"slug\": \"gdansk\",\n    \"image\": \"/images/gdansk.jpg\",\n    \"alt\": \"Gdansk\",\n    \"description\": \"Verken Gdansk, de prachtige havenstad met kleurrijke gevels en rijke maritieme geschiedenis\",\n    \"content\": \"# Gdansk\\n\\nGdansk is een prachtige havenstad aan de Oostzee met een rijke geschiedenis en kleurrijke architectuur. De stad speelde een belangrijke rol in de Europese geschiedenis en is de bakermat van de Solidarno≈õƒá-beweging.\\n\\n## Bezienswaardigheden\\n\\n- **D≈Çugi Targ (Lange Markt)** - Het hart van de oude stad met prachtige patriciershuizen\\n- **Artus Court** - Historisch gebouw waar kooplieden elkaar ontmoetten\\n- **St. Mary's Church** - Een van de grootste bakstenen kerken ter wereld\\n- **Crane Gate** - Iconisch symbool van Gdansk aan de Mot≈Çawa rivier\\n- **Westerplatte** - Historische locatie waar WOII begon\\n\\n## Maritime erfgoed\\n\\n- **Nationaal Maritiem Museum** - Ontdek de zeevaartgeschiedenis\\n- **Soldek schip** - Historisch vrachtschip te bezoeken\\n- **Havenwandeling** - Prachtige wandeling langs de rivier\\n\\n## Culinair\\n\\n- **Goldwasser** - Traditionele likeur met goudvlokken\\n- **Verse vis** - Rechtstreeks van de Oostzee\\n- **Poolse amber** - Gdansk staat bekend om amber sieraden\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 1,\n    \"name\": \"Krakow\",\n    \"slug\": \"krakow\",\n    \"image\": \"/images/krakow.jpg\",\n    \"alt\": \"Krakow\",\n    \"description\": \"Ontdek de historische stad Krakow met zijn prachtige marktplein en rijke cultuur\",\n    \"content\": \"# Krakow\\n\\nKrakow is een van de mooiste steden van Polen. De historische binnenstad staat op de UNESCO Werelderfgoedlijst en biedt bezoekers een unieke kijk op de Poolse geschiedenis en cultuur.\\n\\n## Bezienswaardigheden\\n\\n- **Marktplein (Rynek G≈Ç√≥wny)** - Een van de grootste middeleeuwse marktpleinen van Europa\\n- **Wawel Kasteel** - Het symbool van Polen met zijn koninklijke geschiedenis\\n- **Kazimierz** - Het historische Joodse kwartier vol restaurants en caf√©s\\n- **St. Mary's Basiliek** - Beroemd om zijn houten altaar en trompetsignaal\\n\\n## Tips voor je bezoek\\n\\n- Bezoek vroeg in de ochtend voor minder drukte\\n- Proef traditionele pierogi in een lokaal restaurant\\n- Maak een wandeling langs de Wis≈Ça rivier\\n- Neem deel aan een gratis walking tour\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 2,\n    \"name\": \"Tatra Mountains\",\n    \"slug\": \"tatra-mountains\",\n    \"image\": \"/images/tatra.jpg\",\n    \"alt\": \"Tatra Mountains\",\n    \"description\": \"Ervaar de adembenemende Tatra Mountains, perfect voor wandelaars en natuurliefhebbers\",\n    \"content\": \"# Tatra Mountains\\n\\nDe Tatra Mountains vormen de natuurlijke grens tussen Polen en Slowakije. Dit berggebied biedt spectaculaire landschappen, kristalheldere meren en uitdagende wandelpaden.\\n\\n## Hoogtepunten\\n\\n- **Morskie Oko** - Het 'Oog van de Zee', een prachtig bergmeer\\n- **Kasprowy Wierch** - Bereikbaar met de kabelbaan, prachtige uitzichten\\n- **Zakopane** - Charmant bergdorpje aan de voet van de Tatra's\\n- **Wandelpaden** - Van makkelijke wandelingen tot uitdagende bergtochten\\n\\n## Activiteiten\\n\\n- Wandelen en bergbeklimmen\\n- Ski√´n in de winter\\n- Fotograferen van wilde dieren\\n- Bezoek aan traditionele berghutten\\n\\n## Praktische info\\n\\n- Beste tijd: Juni tot september voor wandelen\\n- Neem warme kleding mee (weer kan snel omslaan)\\n- Wandelpaden kunnen druk zijn in het weekend\\n- Respect voor de natuur is essentieel\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  }\n];\n\nconst guidesData = [\n  {\n    \"id\": 1,\n    \"title\": \"3 Dagen in Krakau\",\n    \"slug\": \"3-dagen-in-krakau\",\n    \"image\": \"/images/krakau-dagtrip.jpg\",\n    \"alt\": \"3 Dagen in Krakau\",\n    \"description\": \"Complete reisgids voor een perfecte 3-daagse trip naar Krakau\",\n    \"content\": \"# 3 Dagen in Krakau\\n\\nKrakau is perfect voor een lang weekend. Deze gids helpt je het beste uit je 3 dagen te halen.\\n\\n## Dag 1: Oude Stad\\n\\n### Ochtend\\n- **9:00** - Start op het Marktplein (Rynek G≈Ç√≥wny)\\n- **10:00** - Bezoek St. Mary's Basiliek\\n- **11:00** - Verken de Sukiennice (Cloth Hall)\\n- **12:00** - Koffie in √©√©n van de caf√©s rond het plein\\n\\n### Middag\\n- **13:00** - Lunch bij een traditioneel restaurant\\n- **14:30** - Wandeling naar Wawel Castle\\n- **15:00** - Bezoek Wawel Castle en Cathedral\\n- **17:00** - Wandeling langs de Wis≈Ça rivier\\n\\n### Avond\\n- **19:00** - Diner in Kazimierz (Joods kwartier)\\n- **21:00** - Nightlife in Kazimierz\\n\\n## Dag 2: Kazimierz & Podg√≥rze\\n\\n### Ochtend\\n- **9:00** - Ontbijt in Kazimierz\\n- **10:00** - Bezoek Remuh Synagogue\\n- **11:00** - Wandeling door de Joodse wijk\\n- **12:00** - Bezoek aan de Nieuwe Synagoge\\n\\n### Middag\\n- **13:00** - Lunch in een lokaal restaurant\\n- **14:30** - Wandeling naar Podg√≥rze\\n- **15:00** - Bezoek Schindler's Factory Museum\\n- **17:00** - Wandeling langs de Wis≈Ça\\n\\n### Avond\\n- **19:00** - Diner in de oude stad\\n- **21:00** - Poolse folklore show of opera\\n\\n## Dag 3: Dagtrip of Musea\\n\\n### Optie A: Auschwitz-Birkenau (dag trip)\\n- **7:00** - Vroeg ontbijt\\n- **8:00** - Vertrek naar Auschwitz (1.5 uur)\\n- **10:00-16:00** - Bezoek Auschwitz-Birkenau\\n- **17:30** - Terug in Krakau\\n- **19:00** - Rustig diner\\n\\n### Optie B: Musea in Krakau\\n- **9:00** - Bezoek Nationaal Museum\\n- **11:00** - Bezoek Czartoryski Museum\\n- **13:00** - Lunch\\n- **14:30** - Bezoek ondergrondse markt (Rynek Underground)\\n- **16:00** - Laatste souvenirs kopen\\n- **17:30** - Afscheidsdiner\\n\\n## Praktische Tips\\n\\n### Vervoer\\n- **Lopen** - Centrum is klein en goed te voet te verkennen\\n- **Tram** - Goedkoop openbaar vervoer\\n- **Taxi/Uber** - Beschikbaar maar duurder\\n\\n### Eten\\n- **Pierogi** - Traditionele dumplings, must-try!\\n- **Kielbasa** - Poolse worst\\n- **Zapiekanka** - Pools street food\\n- **Oscypek** - Traditionele bergkaas\\n\\n### Accommodatie\\n- **Oude Stad** - Dichtbij bezienswaardigheden, wel druk\\n- **Kazimierz** - Trendy wijk met veel restaurants\\n- **Podg√≥rze** - Rustiger, iets verder van centrum\\n\\n### Budget (per persoon)\\n- **Budget** - ‚Ç¨40-60 per dag\\n- **Midrange** - ‚Ç¨60-100 per dag\\n- **Luxury** - ‚Ç¨100+ per dag\\n\\n## Niet te missen\\n\\n- Trompetsignaal vanaf St. Mary's toren (elk uur)\\n- Zonsondergang op Wawel Hill\\n- Poolse vodka proeven\\n- Traditionele Poolse muziek\\n- Ambachtelijke souvenirs op het marktplein\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 2,\n    \"title\": \"Roadtrip door het zuiden\",\n    \"slug\": \"roadtrip-door-het-zuiden\",\n    \"image\": \"/images/roadtrip-zuid.jpg\",\n    \"alt\": \"Roadtrip door het zuiden\",\n    \"description\": \"Ontdek Zuid-Polen met deze complete roadtrip gids door de mooiste regio's\",\n    \"content\": \"# Roadtrip door het zuiden van Polen\\n\\nEen 7-daagse roadtrip door Zuid-Polen brengt je langs historische steden, prachtige bergen en charmante dorpjes.\",\n    \"featured\": true,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  },\n  {\n    \"id\": 3,\n    \"title\": \"Verborgen Parels aan zee\",\n    \"slug\": \"verborgen-parels-aan-zee\",\n    \"image\": \"/images/zee-parels.jpg\",\n    \"alt\": \"Verborgen Parels aan zee\",\n    \"description\": \"Ontdek de mooiste verborgen plekjes aan de Poolse Oostzeekust\",\n    \"content\": \"# Verborgen Parels aan de Poolse Oostzeekust\\n\\nDe Poolse Oostzeekust biedt meer dan alleen Gdansk. Ontdek deze verborgen parels voor een authentieke kustervaring.\",\n    \"featured\": false,\n    \"published\": true,\n    \"createdAt\": \"2025-01-13T17:00:00.000Z\"\n  }\n];\n\nasync function migrateData() {\n  console.log(\"Starting data migration...\");\n  \n  try {\n    // Migrate destinations\n    console.log(\"Migrating destinations...\");\n    const existingDestinations = await storage.getAllDestinations();\n    if (existingDestinations.length < destinationsData.length) {\n      // Clear existing data first\n      if (existingDestinations.length > 0) {\n        for (const dest of existingDestinations) {\n          await storage.deleteDestination(dest.id);\n        }\n      }\n      \n      // Insert all destinations\n      for (const dest of destinationsData) {\n        await storage.createDestination({\n          name: dest.name,\n          slug: dest.slug,\n          description: dest.description,\n          image: dest.image,\n          alt: dest.alt,\n          content: dest.content,\n          featured: dest.featured,\n          published: dest.published,\n          createdBy: 1, // admin user\n        });\n        console.log(`Migrated destination: ${dest.name}`);\n      }\n    }\n    \n    // Migrate guides\n    console.log(\"Migrating guides...\");\n    const existingGuides = await storage.getAllGuides();\n    if (existingGuides.length < guidesData.length) {\n      // Clear existing data first\n      if (existingGuides.length > 0) {\n        for (const guide of existingGuides) {\n          await storage.deleteGuide(guide.id);\n        }\n      }\n      \n      // Insert all guides\n      for (const guide of guidesData) {\n        await storage.createGuide({\n          title: guide.title,\n          slug: guide.slug,\n          description: guide.description,\n          image: guide.image,\n          alt: guide.alt,\n          content: guide.content,\n          featured: guide.featured,\n          published: guide.published,\n          createdBy: 1, // admin user\n        });\n        console.log(`Migrated guide: ${guide.title}`);\n      }\n    }\n    \n    console.log(\"Data migration completed successfully!\");\n    \n  } catch (error) {\n    console.error(\"Error during migration:\", error);\n  }\n  \n  process.exit(0);\n}\n\nmigrateData();","size_bytes":11367},"client/src/hooks/useSiteSettings.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport function useSiteSettings() {\n  const { data: siteSettings, isLoading } = useQuery({\n    queryKey: ['/api/site-settings'],\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  });\n\n  return {\n    siteSettings: siteSettings || {\n      siteName: 'Ontdek Polen',\n      siteDescription: 'Mooie plekken in Polen ontdekken',\n      metaKeywords: 'Polen, reizen, vakantie, bestemmingen',\n      favicon: '/favicon.ico',\n      backgroundImage: '',\n      backgroundImageAlt: '',\n      logoImage: '',\n      logoImageAlt: '',\n      socialMediaImage: '',\n      customCSS: '',\n      customJS: '',\n      googleAnalyticsId: '',\n    },\n    isLoading,\n  };\n}","size_bytes":688},"client/src/pages/page.tsx":{"content":"import { useParams } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Search, Settings, ArrowLeft } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\n// Activities section component\nfunction ActivitiesSection({ pageTitle, setSelectedActivityId }: { pageTitle?: string, setSelectedActivityId: (id: string | null) => void }) {\n  const { data: locationActivities, isLoading } = useQuery({\n    queryKey: ['/api/activities/location', pageTitle],\n    queryFn: async () => {\n      if (!pageTitle) return [];\n      const response = await fetch(`/api/activities/location/${encodeURIComponent(pageTitle)}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch activities');\n      }\n      return response.json();\n    },\n    enabled: !!pageTitle,\n  });\n\n  if (isLoading || !locationActivities?.length) {\n    return null;\n  }\n\n  return (\n    <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n      <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n        Activiteiten in {pageTitle}\n      </h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5\">\n        {locationActivities.map((activity: any) => {\n          // Handler for activity click to show details in content section\n          const handleActivityClick = (e: React.MouseEvent) => {\n            e.preventDefault();\n            setSelectedActivityId(activity.id.toString());\n            \n            // Update URL with activity parameter\n            const newUrl = `${window.location.pathname}?activity=${activity.id}`;\n            window.history.pushState({}, '', newUrl);\n            \n            // Scroll to content section smoothly\n            const contentSection = document.getElementById('content-section');\n            if (contentSection) {\n              contentSection.scrollIntoView({ behavior: 'smooth' });\n            }\n          };\n\n          return (\n            <Card \n              key={activity.id}\n              className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\"\n              onClick={handleActivityClick}\n            >\n              {activity.image && (\n                <img\n                  src={activity.image}\n                  alt={activity.alt || activity.name}\n                  className=\"w-full h-40 object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.src = '/images/activities/placeholder.svg';\n                  }}\n                />\n              )}\n              <div className=\"p-4\">\n                <h3 className=\"font-bold font-inter text-gray-900 mb-2\">\n                  {activity.name}\n                </h3>\n                {activity.description && (\n                  <p className=\"text-sm text-gray-600 font-inter line-clamp-2\">\n                    {activity.description}\n                  </p>\n                )}\n                {activity.category && (\n                  <p className=\"text-xs text-gray-500 mt-2 capitalize\">\n                    {activity.category}\n                  </p>\n                )}\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n    </section>\n  );\n}\n\nexport default function Page() {\n  const { slug } = useParams<{ slug: string }>();\n  const [selectedActivityId, setSelectedActivityId] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [isSearching, setIsSearching] = useState(false);\n  \n  // Close search handler that preserves ability to re-search\n  const closeSearch = () => {\n    console.log('Closing search overlay');\n    setShowSearchResults(false);\n    setIsSearching(false);\n    // Keep searchQuery and searchResults so user can re-open same search\n  };\n\n  // Check for activity parameter on page load\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const activityParam = urlParams.get('activity');\n    if (activityParam) {\n      setSelectedActivityId(activityParam);\n    }\n  }, [slug]);\n\n  // Helper function to get type-specific styling for search results\n  const getTypeStyles = (type: string) => {\n    switch (type) {\n      case 'destination':\n        return 'bg-green-100 text-green-700';\n      case 'activity':\n        return 'bg-orange-100 text-orange-700';\n      case 'highlight':\n        return 'bg-yellow-100 text-yellow-700';\n      case 'guide':\n        return 'bg-blue-100 text-blue-700';\n      case 'page':\n        return 'bg-purple-100 text-purple-700';\n      case 'template':\n        return 'bg-gray-100 text-gray-700';\n      default:\n        return 'bg-blue-100 text-blue-600';\n    }\n  };\n\n  // Helper function to get user-friendly type labels\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case 'destination':\n        return 'üèîÔ∏è Bestemmingen';\n      case 'activity':\n        return 'üéØ Activiteiten';\n      case 'highlight':\n        return '‚ú® Hoogtepunten';\n      case 'guide':\n        return 'üìñ Reisgidsen';\n      case 'page':\n        return 'üìÑ Pagina';\n      case 'template':\n        return 'üé® Template';\n      default:\n        return type;\n    }\n  };\n  \n  // Try destinations first, fallback to pages - OPTIMIZED APPROACH\n  const { data: page, isLoading, error } = useQuery({\n    queryKey: ['/api/content', slug],\n    queryFn: async () => {\n      // First try destinations (most likely for Polish travel content)\n      try {\n        const destResponse = await fetch(`/api/destinations/${slug}`);\n        if (destResponse.ok) {\n          const destinationData = await destResponse.json();\n          console.log('Found destination:', destinationData.title);\n          return destinationData;\n        }\n      } catch (error) {\n        console.log('Destination not found, trying pages...');\n      }\n      \n      // Fallback to pages for custom content\n      const pageResponse = await fetch(`/api/pages/${slug}`);\n      if (!pageResponse.ok) {\n        throw new Error('Content not found');\n      }\n      const pageData = await pageResponse.json();\n      console.log('Found page:', pageData.title);\n      return pageData;\n    },\n  });\n\n  // Fetch site settings for consistent styling\n  const { data: siteSettings } = useQuery({\n    queryKey: [\"/api/site-settings\"],\n  });\n\n  // Fetch search configuration for destination context\n  const { data: searchConfig } = useQuery({\n    queryKey: [\"/api/search-config/destination\"],\n  });\n\n  // Fetch location-specific featured activities\n  const { data: locationFeaturedActivities = [] } = useQuery({\n    queryKey: [\"/api/admin/activities\", page?.title],\n    queryFn: async () => {\n      if (!page?.title) return [];\n      const response = await fetch('/api/admin/activities');\n      if (!response.ok) {\n        throw new Error('Failed to fetch activities');\n      }\n      const activities = await response.json();\n      // Filter for featured, published activities that match the location\n      return activities.filter((activity: any) => \n        activity.featured === true && \n        activity.published === true && \n        activity.location === page.title\n      );\n    },\n    enabled: !!page?.title,\n  });\n\n  // Fetch selected activity details if activity ID is present\n  const { data: selectedActivity } = useQuery({\n    queryKey: ['/api/activities', selectedActivityId],\n    queryFn: async () => {\n      if (!selectedActivityId) return null;\n      const response = await fetch(`/api/admin/activities`);\n      if (!response.ok) throw new Error('Failed to fetch activities');\n      const activities = await response.json();\n      return activities.find((a: any) => a.id === parseInt(selectedActivityId));\n    },\n    enabled: !!selectedActivityId,\n  });\n\n  // Update document title and meta tags\n  useEffect(() => {\n    if (page) {\n      document.title = page.metaTitle || `${page.title} | Ontdek Polen`;\n      \n      // Update meta description\n      const metaDescription = document.querySelector('meta[name=\"description\"]');\n      if (metaDescription) {\n        metaDescription.setAttribute('content', page.metaDescription || '');\n      } else {\n        const meta = document.createElement('meta');\n        meta.name = 'description';\n        meta.content = page.metaDescription || '';\n        document.head.appendChild(meta);\n      }\n      \n      // Update meta keywords\n      const metaKeywords = document.querySelector('meta[name=\"keywords\"]');\n      if (metaKeywords) {\n        metaKeywords.setAttribute('content', page.metaKeywords || '');\n      } else {\n        const meta = document.createElement('meta');\n        meta.name = 'keywords';\n        meta.content = page.metaKeywords || '';\n        document.head.appendChild(meta);\n      }\n    }\n    \n    // Apply site-wide favicon from settings\n    const existingFavicon = document.querySelector('link[rel=\"icon\"]');\n    \n    if (siteSettings?.faviconEnabled === true && siteSettings?.favicon) {\n      // Favicon enabled - use server route which checks database\n      if (existingFavicon) {\n        existingFavicon.setAttribute('href', '/favicon.ico?' + Date.now()); // Cache bust\n      } else {\n        const link = document.createElement('link');\n        link.rel = 'icon';\n        link.href = '/favicon.ico?' + Date.now(); // Cache bust\n        document.head.appendChild(link);\n      }\n    } else {\n      // Favicon disabled - remove any existing favicon\n      if (existingFavicon) {\n        existingFavicon.remove();\n      }\n      // Force browser to not show any favicon by using empty data URL\n      const emptyFavicon = document.createElement('link');\n      emptyFavicon.rel = 'icon';\n      emptyFavicon.href = 'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=';\n      document.head.appendChild(emptyFavicon);\n    }\n  }, [page, siteSettings]);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ backgroundColor: \"#f8f6f1\" }}>\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-lg\">Laden...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !page) {\n    return (\n      <div className=\"min-h-screen\" style={{ backgroundColor: \"#f8f6f1\" }}>\n        <div className=\"container mx-auto px-4 py-8\">\n          <Card className=\"max-w-2xl mx-auto p-8 text-center\">\n            <h1 className=\"text-2xl font-bold text-red-600 mb-4\">Pagina niet gevonden</h1>\n            <p className=\"text-gray-600 mb-6\">\n              De pagina die je zoekt bestaat niet of is niet beschikbaar.\n            </p>\n            <Button asChild>\n              <Link href=\"/\">\n                <ArrowLeft className=\"mr-2 h-4 w-4\" />\n                Terug naar home\n              </Link>\n            </Button>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSearch = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!searchQuery.trim()) return;\n    \n    console.log('=== DESTINATION PAGE SEARCH DEBUG ===');\n    console.log('Starting destination page search for:', searchQuery);\n    console.log('Current showSearchResults:', showSearchResults);\n    console.log('Current searchResults length:', searchResults.length);\n    console.log('Current isSearching:', isSearching);\n    console.log('Page title:', page?.title);\n    \n    // Always perform fresh search - don't cache results\n    setIsSearching(true);\n    setShowSearchResults(true);\n    \n    try {\n      // Search scope - for destination pages, search activities or use config\n      const searchScope = searchConfig?.searchScope || 'activities';\n      let url = `/api/search?q=${encodeURIComponent(searchQuery)}&scope=${searchScope}`;\n      \n      // Add location filter if enabled and we have page location info\n      if (searchConfig?.enableLocationFilter && page?.title) {\n        url += `&location=${encodeURIComponent(page.title)}`;\n      }\n      \n      console.log('Fetching URL:', url);\n      const response = await fetch(url);\n      \n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      console.log('API Response:', data);\n      console.log('Results count:', data.results?.length || 0);\n      \n      setSearchResults(data.results || []);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setIsSearching(false);\n      console.log('=== DESTINATION PAGE SEARCH COMPLETE ===');\n    }\n  };\n\n  // Get the background image from database or fallback to default\n  const getBackgroundImage = () => {\n    if (page?.headerImage) {\n      return page.headerImage;\n    }\n    // Fallback to default background images if no header image is set\n    const defaultImages = {\n      'krakow': '/images/destinations/krakow.jpg',\n      'warschau-citytrip': '/images/destinations/tatra.jpg', \n      'tatra-mountains': '/images/destinations/tatra.jpg',\n      'gdansk': '/images/destinations/gdansk.jpg',\n      'bialowieza': '/images/destinations/bialowieza.jpg'\n    };\n    return defaultImages[slug as keyof typeof defaultImages] || '/images/backgrounds/header.jpg';\n  };\n\n  return (\n    <div className=\"min-h-screen\" style={{ backgroundColor: \"#f8f6f1\" }}>\n      {/* Hero Section - with dynamic header image */}\n      <header \n        className=\"relative bg-cover bg-center text-white py-24 px-5 text-center\"\n        style={{\n          backgroundImage: `url('${getBackgroundImage()}')`,\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\"\n        }}\n        role=\"banner\"\n        aria-label={page?.headerImageAlt || `${page?.title} header afbeelding`}\n      >\n        {siteSettings?.headerOverlayEnabled && (\n          <div \n            className=\"absolute inset-0 bg-black\" \n            style={{ opacity: (siteSettings?.headerOverlayOpacity || 30) / 100 }}\n          ></div>\n        )}\n        <div className=\"relative z-10 max-w-4xl mx-auto\">\n          <h1 className=\"text-5xl font-bold mb-3 font-inter\">\n            Ontdek Polen\n          </h1>\n          <p className=\"text-xl mb-8 font-inter\">\n            Mooie plekken in {page.title} ontdekken\n          </p>\n          \n          <form \n            onSubmit={(e) => {\n              console.log('Destination page form submit event triggered');\n              handleSearch(e);\n            }} \n            className=\"mt-5 mb-5 relative\"\n          >\n            <div className=\"relative inline-block\">\n              <Input\n                type=\"text\"\n                placeholder={searchConfig?.placeholderText || \"Zoek activiteiten...\"}\n                value={searchQuery}\n                onChange={(e) => {\n                  console.log('Destination page search input changed:', e.target.value);\n                  setSearchQuery(e.target.value);\n                }}\n                onKeyDown={(e) => {\n                  console.log('Destination page key pressed:', e.key);\n                  if (e.key === 'Enter') {\n                    console.log('Enter key detected, form should submit');\n                  }\n                }}\n                className=\"py-3 px-5 w-80 max-w-full border-none rounded-lg text-base text-gray-900 font-inter\"\n              />\n              <Search \n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4 cursor-pointer\" \n                onClick={() => {\n                  console.log('Destination page search icon clicked');\n                  if (searchQuery.trim()) {\n                    const form = document.querySelector('form');\n                    if (form) {\n                      form.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true }));\n                    }\n                  }\n                }}\n              />\n            </div>\n            {/* Debug state indicator */}\n            {showSearchResults && (\n              <div className=\"absolute top-16 left-0 bg-red-500 text-white px-2 py-1 text-xs rounded\">\n                Search Active: {isSearching ? 'Searching...' : `${searchResults.length} results`}\n              </div>\n            )}\n          </form>\n          \n\n          \n          <Button\n            asChild\n            className=\"mt-4 py-3 px-6 text-base font-inter hover:opacity-90 transition-all duration-200\"\n            style={{ backgroundColor: \"#2f3e46\" }}\n          >\n            <Link href=\"/\">\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Terug naar home\n            </Link>\n          </Button>\n        </div>\n      </header>\n\n      {/* Search Results Overlay */}\n      {showSearchResults && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-40 z-50\"\n          onClick={closeSearch}\n        >\n          <div \n            className=\"absolute top-80 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-2xl p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto border-2 border-blue-200\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">\n                Zoekresultaten{searchQuery && ` voor \"${searchQuery}\"`}\n              </h3>\n              <button \n                onClick={closeSearch}\n                className=\"text-gray-500 hover:text-gray-700 text-2xl leading-none\"\n              >\n                √ó\n              </button>\n            </div>\n            \n            {isSearching ? (\n              <div className=\"text-center py-8\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n                <p className=\"mt-4 text-gray-600\">Zoeken...</p>\n              </div>\n            ) : searchResults.length > 0 ? (\n              <div className=\"space-y-3\">\n                {searchResults.map((result: any) => {\n                  // For activities, create a link with activity parameter instead of external link\n                  const handleActivityClick = (e: React.MouseEvent, activityId: number) => {\n                    e.preventDefault();\n                    setSelectedActivityId(activityId.toString());\n                    \n                    // Update URL without page reload\n                    const newUrl = `${window.location.pathname}?activity=${activityId}`;\n                    window.history.pushState({}, '', newUrl);\n                    \n                    // Close search overlay\n                    closeSearch();\n                    \n                    // Scroll to content section smoothly\n                    setTimeout(() => {\n                      const contentSection = document.getElementById('content-section');\n                      if (contentSection) {\n                        contentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                      }\n                    }, 100);\n                  };\n\n                  return (\n                    <div key={result.id}>\n                      {result.type === 'activity' ? (\n                        <div \n                          className=\"p-4 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-200 transition-all duration-200\"\n                          onClick={(e) => handleActivityClick(e, result.id)}\n                        >\n                          <div className=\"flex items-center space-x-4\">\n                            {result.image && (\n                              <img \n                                src={result.image} \n                                alt={result.alt || result.name} \n                                className=\"w-16 h-16 object-cover rounded-lg\"\n                              />\n                            )}\n                            <div className=\"flex-1\">\n                              <h4 className=\"font-semibold text-gray-900 mb-1\">{result.name || result.title}</h4>\n                              <p className=\"text-sm text-gray-600 mb-2\">{result.description}</p>\n                              <span className={`text-xs px-2 py-1 rounded capitalize ${getTypeStyles(result.type)}`}>\n                                {getTypeLabel(result.type)}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      ) : (\n                        <Link href={result.link || `/${result.slug}`}>\n                          <div className=\"p-4 hover:bg-gray-50 rounded-lg cursor-pointer border border-gray-200 transition-all duration-200\">\n                            <div className=\"flex items-center space-x-4\">\n                              {result.image && (\n                                <img \n                                  src={result.image} \n                                  alt={result.alt || result.name} \n                                  className=\"w-16 h-16 object-cover rounded-lg\"\n                                />\n                              )}\n                              <div className=\"flex-1\">\n                                <h4 className=\"font-semibold text-gray-900 mb-1\">{result.name || result.title}</h4>\n                                <p className=\"text-sm text-gray-600 mb-2\">{result.description}</p>\n                                <span className={`text-xs px-2 py-1 rounded capitalize ${getTypeStyles(result.type)}`}>\n                                  {getTypeLabel(result.type)}\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                        </Link>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-600\">\n                  Geen resultaten gevonden voor \"{searchQuery}\"\n                </p>\n                <p className=\"text-sm text-gray-500 mt-2\">\n                  Probeer een andere zoekterm\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Activities Section - same style as homepage destinations grid */}\n      <ActivitiesSection pageTitle={page?.title} setSelectedActivityId={setSelectedActivityId} />\n\n      {/* Content Section */}\n      <section id=\"content-section\" className=\"py-16 px-5 max-w-6xl mx-auto\">\n        <Card className=\"bg-white rounded-xl shadow-lg border-none p-8\">\n          {selectedActivity ? (\n            // Show selected activity content\n            <div>\n              <div className=\"flex items-center justify-between mb-6\">\n                <h1 className=\"text-3xl font-bold text-gray-900 font-inter\">{selectedActivity.name}</h1>\n                <button\n                  onClick={() => {\n                    setSelectedActivityId(null);\n                    // Remove activity parameter from URL\n                    const newUrl = window.location.pathname;\n                    window.history.pushState({}, '', newUrl);\n                  }}\n                  className=\"text-blue-600 hover:text-blue-800 font-medium\"\n                >\n                  ‚Üê Terug naar {page?.title}\n                </button>\n              </div>\n              \n              {selectedActivity.image && (\n                <img\n                  src={selectedActivity.image}\n                  alt={selectedActivity.alt || selectedActivity.name}\n                  className=\"w-full h-64 object-cover rounded-lg mb-6\"\n                  onError={(e) => {\n                    e.currentTarget.src = '/images/activities/placeholder.svg';\n                  }}\n                />\n              )}\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                <div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2\">Locatie</h3>\n                  <p className=\"text-gray-600\">{selectedActivity.location}</p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2\">Categorie</h3>\n                  <p className=\"text-gray-600\">{selectedActivity.category}</p>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-gray-800 mb-2\">Type</h3>\n                  <p className=\"text-gray-600\">{selectedActivity.activityType}</p>\n                </div>\n              </div>\n\n              <div className=\"mb-6\">\n                <h2 className=\"text-2xl font-semibold text-gray-800 mb-4 font-inter\">Beschrijving</h2>\n                <p className=\"text-gray-700 text-lg leading-relaxed font-inter\">{selectedActivity.description}</p>\n              </div>\n\n              {selectedActivity.content && (\n                <div>\n                  <h2 className=\"text-2xl font-semibold text-gray-800 mb-4 font-inter\">Meer informatie</h2>\n                  <div \n                    className=\"prose prose-lg max-w-none font-inter\"\n                    dangerouslySetInnerHTML={{\n                      __html: selectedActivity.content\n                        .replace(/\\n/g, '<br>')\n                        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-semibold text-gray-900\">$1</strong>')\n                        .replace(/\\*(.*?)\\*/g, '<em class=\"italic text-gray-700\">$1</em>')\n                    }}\n                  />\n                </div>\n              )}\n\n              {selectedActivity.link && (\n                <div className=\"mt-6\">\n                  <a\n                    href={selectedActivity.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    Bezoek website\n                    <svg className=\"ml-2 w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                    </svg>\n                  </a>\n                </div>\n              )}\n            </div>\n          ) : (\n            // Show original page content\n            <div \n              className=\"prose prose-lg max-w-none font-inter\"\n              dangerouslySetInnerHTML={{\n                __html: page.content\n                  .replace(/\\n/g, '<br>')\n                  .replace(/# (.*)/g, '<h1 class=\"text-3xl font-bold mb-6 text-gray-900 font-inter\">$1</h1>')\n                  .replace(/## (.*)/g, '<h2 class=\"text-2xl font-semibold mb-4 text-gray-800 font-inter\">$1</h2>')\n                  .replace(/### (.*)/g, '<h3 class=\"text-xl font-medium mb-3 text-gray-700 font-inter\">$1</h3>')\n                  .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-semibold text-gray-900\">$1</strong>')\n                  .replace(/\\*(.*?)\\*/g, '<em class=\"italic text-gray-700\">$1</em>')\n                  .replace(/- (.*)/g, '<li class=\"mb-2 text-gray-700\">$1</li>')\n                  .replace(/(<li.*<\\/li>)/gs, '<ul class=\"list-disc list-inside mb-6 space-y-2 ml-4\">$1</ul>')\n                  .replace(/---/g, '<hr class=\"my-8 border-gray-200\">')\n              }}\n            />\n          )}\n        </Card>\n      </section>\n\n      {/* Location-specific Featured Activities Section */}\n      {locationFeaturedActivities.length > 0 && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n            Hoogtepunten van {page.title}\n          </h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n            {locationFeaturedActivities\n              .sort((a: any, b: any) => (a.ranking || 0) - (b.ranking || 0))\n              .map((activity: any) => {\n                const CardContent = (\n                  <div className=\"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer text-center\">\n                    <img\n                      src={activity.image || '/images/activities/placeholder.svg'}\n                      alt={activity.alt || activity.name}\n                      className=\"w-16 h-16 mx-auto mb-3 object-cover rounded-lg\"\n                      onError={(e) => {\n                        e.currentTarget.src = '/images/activities/placeholder.svg';\n                      }}\n                    />\n                    <h3 className=\"font-bold font-inter text-gray-900 text-sm\">\n                      {activity.name}\n                    </h3>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      üìç {activity.location}\n                    </p>\n                    {activity.category && (\n                      <p className=\"text-xs text-blue-600 mt-1 capitalize\">\n                        {activity.category}\n                      </p>\n                    )}\n                  </div>\n                );\n\n                // Handle external links\n                if (activity.link && activity.link.startsWith('http')) {\n                  return (\n                    <a\n                      key={activity.id}\n                      href={activity.link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      {CardContent}\n                    </a>\n                  );\n                }\n\n                // Internal activity click handler\n                return (\n                  <div \n                    key={activity.id}\n                    onClick={() => {\n                      setSelectedActivityId(activity.id.toString());\n                      const newUrl = `${window.location.pathname}?activity=${activity.id}`;\n                      window.history.pushState({}, '', newUrl);\n                      const contentSection = document.getElementById('content-section');\n                      if (contentSection) {\n                        contentSection.scrollIntoView({ behavior: 'smooth' });\n                      }\n                    }}\n                  >\n                    {CardContent}\n                  </div>\n                );\n              })}\n          </div>\n        </section>\n      )}\n\n      {/* Footer - exact same as homepage */}\n      <footer \n        className=\"text-center py-10 px-5 text-white relative\"\n        style={{ backgroundColor: \"#2f3e46\" }}\n      >\n        {/* Admin Link */}\n        <Link href=\"/admin\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"absolute top-4 right-4 text-white border-white hover:bg-white hover:text-gray-900\"\n          >\n            <Settings className=\"h-4 w-4 mr-2\" />\n            Admin\n          </Button>\n        </Link>\n        \n        <p className=\"font-inter\">\n          &copy; 2025 {siteSettings?.siteName || \"Ontdek Polen\"}. Alle rechten voorbehouden.\n        </p>\n      </footer>\n    </div>\n  );\n}","size_bytes":31377},"client/src/pages/ontdek-meer.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Search, Settings } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\n\nexport default function OntdekMeer() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  \n  // Fetch destinations and guides from API (homepage specific)\n  const { data: destinations = [], isLoading: destinationsLoading } = useQuery({\n    queryKey: [\"/api/destinations/homepage\"],\n  });\n  \n  const { data: guides = [], isLoading: guidesLoading } = useQuery({\n    queryKey: [\"/api/guides/homepage\"],\n  });\n\n  const { data: pages = [], isLoading: pagesLoading } = useQuery({\n    queryKey: [\"/api/pages\"],\n  });\n\n  // Fetch highlights from database\n  const { data: highlights = [], isLoading: highlightsLoading } = useQuery({\n    queryKey: [\"/api/highlights\"],\n  });\n\n  // Fetch site settings\n  const { data: siteSettings, isLoading: settingsLoading } = useQuery({\n    queryKey: [\"/api/site-settings\"],\n  });\n\n  // Update document title and meta tags when site settings change - CHANGED FOR ONTDEK MEER\n  useEffect(() => {\n    // Changed title for Ontdek Meer page\n    document.title = \"Ontdek Meer - Ontdek Polen\";\n    \n    // Update meta description\n    let metaDescription = document.querySelector('meta[name=\"description\"]');\n    if (!metaDescription) {\n      metaDescription = document.createElement('meta');\n      metaDescription.setAttribute('name', 'description');\n      document.head.appendChild(metaDescription);\n    }\n    metaDescription.setAttribute('content', \"Ontdek alle bestemmingen, reisgidsen en tips voor je reis naar Polen op √©√©n plek\");\n    \n    if (siteSettings) {\n      // Update meta keywords\n      let metaKeywords = document.querySelector('meta[name=\"keywords\"]');\n      if (!metaKeywords) {\n        metaKeywords = document.createElement('meta');\n        metaKeywords.setAttribute('name', 'keywords');\n        document.head.appendChild(metaKeywords);\n      }\n      metaKeywords.setAttribute('content', siteSettings.metaKeywords || \"Polen, reizen, vakantie, bestemmingen\");\n      \n      // Update favicon - handle enabled/disabled state\n      const existingFavicon = document.querySelector('link[rel=\"icon\"]');\n      \n      if (siteSettings.faviconEnabled === true && siteSettings.favicon) {\n        // Favicon enabled and has path - use server route which checks database\n        if (existingFavicon) {\n          existingFavicon.setAttribute('href', '/favicon.ico?' + Date.now()); // Cache bust\n        } else {\n          const newFavicon = document.createElement('link');\n          newFavicon.setAttribute('rel', 'icon');\n          newFavicon.setAttribute('href', '/favicon.ico?' + Date.now()); // Cache bust\n          document.head.appendChild(newFavicon);\n        }\n      } else {\n        // Favicon disabled - remove any existing favicon\n        if (existingFavicon) {\n          existingFavicon.remove();\n        }\n        // Force browser to not show any favicon by using empty data URL\n        const emptyFavicon = document.createElement('link');\n        emptyFavicon.setAttribute('rel', 'icon');\n        emptyFavicon.setAttribute('href', 'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=');\n        document.head.appendChild(emptyFavicon);\n      }\n      \n      // Add custom CSS\n      if (siteSettings.customCSS) {\n        let customStyle = document.querySelector('#custom-site-css');\n        if (!customStyle) {\n          customStyle = document.createElement('style');\n          customStyle.id = 'custom-site-css';\n          document.head.appendChild(customStyle);\n        }\n        customStyle.textContent = siteSettings.customCSS;\n      }\n      \n      // Add custom JavaScript\n      if (siteSettings.customJS) {\n        let customScript = document.querySelector('#custom-site-js');\n        if (!customScript) {\n          customScript = document.createElement('script');\n          customScript.id = 'custom-site-js';\n          document.head.appendChild(customScript);\n        }\n        customScript.textContent = siteSettings.customJS;\n      }\n      \n      // Add Google Analytics\n      if (siteSettings.googleAnalyticsId) {\n        let gaScript = document.querySelector('#google-analytics');\n        if (!gaScript) {\n          gaScript = document.createElement('script');\n          gaScript.id = 'google-analytics';\n          gaScript.async = true;\n          gaScript.src = `https://www.googletagmanager.com/gtag/js?id=${siteSettings.googleAnalyticsId}`;\n          document.head.appendChild(gaScript);\n          \n          const gaConfig = document.createElement('script');\n          gaConfig.textContent = `\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', '${siteSettings.googleAnalyticsId}');\n          `;\n          document.head.appendChild(gaConfig);\n        }\n      }\n    }\n  }, [siteSettings]);\n\n  // Filter only published destinations\n  const publishedDestinations = destinations.filter((destination: any) => destination.published);\n  \n  // Filter only published guides\n  const publishedGuides = guides.filter((guide: any) => guide.published);\n  \n  // Filter only published pages\n  const publishedPages = pages.filter((page: any) => page.published);\n  \n  // Show loading state\n  if (destinationsLoading || guidesLoading || pagesLoading || highlightsLoading || settingsLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\" style={{ backgroundColor: \"#f8f6f1\" }}>\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-lg\">Laden...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log(\"Searching for:\", searchQuery);\n    // TODO: Implement search functionality\n  };\n\n  const handlePlanTrip = () => {\n    console.log(\"Planning trip...\");\n    // TODO: Implement trip planning logic\n  };\n\n  const handleReadGuides = () => {\n    console.log(\"Reading guides...\");\n    // TODO: Implement guide reading functionality\n  };\n\n  return (\n    <div className=\"min-h-screen\" style={{ backgroundColor: \"#f8f6f1\" }}>\n      {/* Hero Section - CHANGED TITLE AND BUTTON */}\n      <header \n        className=\"relative bg-cover bg-center text-white py-24 px-5 text-center\"\n        style={{\n          backgroundImage: siteSettings?.backgroundImage \n            ? `url('${siteSettings.backgroundImage}')` \n            : \"url('/images/header.jpg')\",\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\"\n        }}\n      >\n        {siteSettings?.headerOverlayEnabled && (\n          <div \n            className=\"absolute inset-0 bg-black\" \n            style={{ opacity: (siteSettings?.headerOverlayOpacity || 30) / 100 }}\n          ></div>\n        )}\n        <div className=\"relative z-10 max-w-4xl mx-auto\">\n          <h1 className=\"text-5xl font-bold mb-3 font-inter\">\n            Ontdek Meer\n          </h1>\n          <p className=\"text-xl mb-8 font-inter\">\n            Alle bestemmingen, reisgidsen en tips voor je reis naar Polen\n          </p>\n          \n          <form onSubmit={handleSearch} className=\"mt-5 mb-5\">\n            <div className=\"relative inline-block\">\n              <Input\n                type=\"text\"\n                placeholder=\"Zoek bestemming\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"py-3 px-5 w-80 max-w-full border-none rounded-lg text-base text-gray-900 font-inter\"\n              />\n              <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 h-4 w-4\" />\n            </div>\n          </form>\n          \n          <Link href=\"/\">\n            <Button\n              className=\"mt-2 py-3 px-6 text-base font-inter hover:opacity-90 transition-all duration-200\"\n              style={{ backgroundColor: \"#2f3e46\" }}\n            >\n              Terug naar Home\n            </Button>\n          </Link>\n        </div>\n      </header>\n\n      {/* Destination Grid - EXACT SAME AS HOMEPAGE */}\n      <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mt-8\">\n          {publishedDestinations.map((destination) => {\n            const CardContent = (\n              <Card \n                className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\"\n              >\n                <img\n                  src={destination.image}\n                  alt={destination.alt}\n                  className=\"w-full h-40 object-cover\"\n                />\n                <div className=\"p-4 font-bold font-inter text-gray-900\">\n                  {destination.name}\n                </div>\n              </Card>\n            );\n\n            // If destination has a link, wrap in Link component or external link\n            if (destination.link) {\n              // Check if it's an external link (starts with http)\n              if (destination.link.startsWith('http')) {\n                return (\n                  <a\n                    key={destination.id}\n                    href={destination.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {CardContent}\n                  </a>\n                );\n              } else {\n                // Internal link\n                return (\n                  <Link key={destination.id} href={destination.link}>\n                    {CardContent}\n                  </Link>\n                );\n              }\n            }\n\n            // No link, just return the card\n            return <div key={destination.id}>{CardContent}</div>;\n          })}\n        </div>\n      </section>\n\n      {/* Highlights Section - From Database - EXACT SAME AS HOMEPAGE */}\n      {highlights.length > 0 && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n            Hoogtepunten van Polen\n          </h2>\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n            {highlights.map((highlight) => (\n              <div key={highlight.id} className=\"bg-white rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer text-center\">\n                <img\n                  src={highlight.iconPath}\n                  alt={highlight.name}\n                  className=\"w-16 h-16 mx-auto mb-3\"\n                  onError={(e) => {\n                    e.currentTarget.src = '/images/highlights/placeholder.svg';\n                  }}\n                />\n                <h3 className=\"font-bold font-inter text-gray-900 text-sm\">\n                  {highlight.name}\n                </h3>\n                {highlight.category !== 'general' && (\n                  <p className=\"text-xs text-gray-500 mt-1 capitalize\">\n                    {highlight.category}\n                  </p>\n                )}\n              </div>\n            ))}\n          </div>\n        </section>\n      )}\n\n      {/* CTA Section - EXACT SAME AS HOMEPAGE */}\n      <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n        <div className=\"flex flex-wrap gap-8 items-center justify-between\">\n          <div className=\"flex-1 min-w-80\">\n            <h2 className=\"text-3xl font-bold mb-4 font-inter text-gray-900\">\n              Laat je verrassen door het onbekende Polen\n            </h2>\n            <p className=\"text-lg mb-6 font-inter text-gray-700\">\n              Bezoek historische steden, ontdek natuurparken en verborgen parels. \n              Onze reizen helpen je op weg!\n            </p>\n            <Button\n              onClick={handleReadGuides}\n              className=\"py-3 px-6 text-base font-inter hover:opacity-90 transition-all duration-200\"\n              style={{ backgroundColor: \"#2f3e46\" }}\n            >\n              Lees onze reizen\n            </Button>\n          </div>\n          <div className=\"flex-1 min-w-80\">\n            <img\n              src=\"/images/tatra-vallei.jpg\"\n              alt=\"Tatra Valley\"\n              className=\"w-full rounded-xl shadow-lg\"\n            />\n          </div>\n        </div>\n      </section>\n\n      {/* Published Pages - EXACT SAME AS HOMEPAGE */}\n      {publishedPages.length > 0 && (\n        <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n          <div className=\"flex justify-between items-center mb-8\">\n            <h2 className=\"text-3xl font-bold font-inter text-gray-900\">\n              Ontdek Meer\n            </h2>\n            <Link href=\"/ontdek-meer\">\n              <Button\n                variant=\"outline\"\n                className=\"text-gray-900 border-gray-300 hover:bg-gray-100\"\n              >\n                Bekijk Alles\n              </Button>\n            </Link>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\">\n            {publishedPages.map((page) => (\n              <Link href={`/${page.slug}`} key={page.id}>\n                <Card className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\">\n                  <div className=\"p-6\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <h3 className=\"text-xl font-bold font-inter text-gray-900\">\n                        {page.title}\n                      </h3>\n                      {page.featured && (\n                        <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n                          Uitgelicht\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-gray-600 text-sm mb-4 font-inter\">\n                      {page.metaDescription}\n                    </p>\n                    <div className=\"flex items-center text-xs text-gray-500\">\n                      <span className=\"bg-gray-100 text-gray-800 px-2 py-1 rounded\">\n                        {page.template}\n                      </span>\n                      <span className=\"ml-2\">\n                        {new Date(page.createdAt).toLocaleDateString('nl-NL')}\n                      </span>\n                    </div>\n                  </div>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        </section>\n      )}\n\n      {/* Travel Guides - EXACT SAME AS HOMEPAGE */}\n      <section className=\"py-16 px-5 max-w-6xl mx-auto\">\n        <h2 className=\"text-3xl font-bold mb-8 font-inter text-gray-900\">\n          Reizen en Tips\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5\">\n          {publishedGuides.map((guide) => {\n            const CardContent = (\n              <Card \n                className=\"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 border-none cursor-pointer\"\n              >\n                <img\n                  src={guide.image}\n                  alt={guide.alt}\n                  className=\"w-full h-40 object-cover\"\n                />\n                <div className=\"p-4 font-bold font-inter text-gray-900\">\n                  {guide.title}\n                </div>\n              </Card>\n            );\n\n            // If guide has a link, wrap in Link component or external link\n            if (guide.link) {\n              // Check if it's an external link (starts with http)\n              if (guide.link.startsWith('http')) {\n                return (\n                  <a\n                    key={guide.id}\n                    href={guide.link}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {CardContent}\n                  </a>\n                );\n              } else {\n                // Internal link\n                return (\n                  <Link key={guide.id} href={guide.link}>\n                    {CardContent}\n                  </Link>\n                );\n              }\n            }\n\n            // No link, just return the card\n            return <div key={guide.id}>{CardContent}</div>;\n          })}\n        </div>\n      </section>\n\n      {/* Footer - EXACT SAME AS HOMEPAGE */}\n      <footer \n        className=\"text-center py-10 px-5 text-white relative\"\n        style={{ backgroundColor: \"#2f3e46\" }}\n      >\n        {/* Admin Link */}\n        <Link href=\"/admin\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            className=\"absolute top-4 right-4 text-white border-white hover:bg-white hover:text-gray-900\"\n          >\n            <Settings className=\"h-4 w-4 mr-2\" />\n            Admin\n          </Button>\n        </Link>\n        \n        <p className=\"font-inter\">\n          &copy; 2025 {siteSettings?.siteName || \"Ontdek Polen\"}. Alle rechten voorbehouden.\n        </p>\n      </footer>\n    </div>\n  );\n}","size_bytes":17322},"client/src/components/highlights-dialogs.tsx":{"content":"import { useState } from 'react';\nimport * as React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { Eye, Edit, Plus, Upload } from 'lucide-react';\nimport { uploadFile } from '@/lib/uploadUtils';\n\n// Highlights dialog components\nexport function CreateHighlightDialog({ open, onOpenChange, onHighlightCreated }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  onHighlightCreated: () => void; \n}) {\n  const [formData, setFormData] = useState({\n    name: '',\n    iconPath: '',\n    category: 'general',\n    ranking: 0,\n    active: true,\n    showOnHomepage: true\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const availableIcons = [\n    'wawel-castle', 'krakow-market', 'st-marys', 'kazimierz',\n    'gdansk-church', 'gdansk-market', 'artus-court', 'amber-museum',\n    'morskie-oko', 'gubalowka', 'zakopane', 'rysy-peak',\n    'forest-paths', 'europese-wisent', 'bird-watching', 'nature-museum', 'forest-photography',\n    'warsaw-oldtown', 'warsaw-castle', 'lazienki', 'wilanow'\n  ];\n\n  const categories = [\n    { value: 'general', label: 'Algemeen' },\n    { value: 'historical', label: 'Historisch' },\n    { value: 'nature', label: 'Natuur' },\n    { value: 'cultural', label: 'Cultureel' },\n    { value: 'adventure', label: 'Avontuur' }\n  ];\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name.trim() || !formData.iconPath.trim()) {\n      toast({ title: \"Fout\", description: \"Naam en icon zijn verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/admin/highlights', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Highlight succesvol aangemaakt\" });\n        onHighlightCreated();\n        setFormData({ name: '', iconPath: '', category: 'general', ranking: 0, active: true, showOnHomepage: true });\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Highlight Toevoegen</DialogTitle>\n          <DialogDescription>\n            Voeg een nieuwe highlight toe aan de homepage\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"highlight-name\">Naam <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"highlight-name\"\n                value={formData.name}\n                onChange={(e) => setFormData({...formData, name: e.target.value})}\n                placeholder=\"Bijv. Wawel Kasteel\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"highlight-category\">Categorie</Label>\n              <Select \n                value={formData.category} \n                onValueChange={(value) => setFormData({...formData, category: value})}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {categories.map(cat => (\n                    <SelectItem key={cat.value} value={cat.value}>{cat.label}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"highlight-ranking\">Ranking (volgorde)</Label>\n              <Input\n                id=\"highlight-ranking\"\n                type=\"number\"\n                value={formData.ranking}\n                onChange={(e) => setFormData({...formData, ranking: parseInt(e.target.value) || 0})}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"flex items-center space-x-2 pt-6\">\n              <Switch\n                id=\"highlight-active\"\n                checked={formData.active}\n                onCheckedChange={(checked) => setFormData({...formData, active: checked})}\n              />\n              <Label htmlFor=\"highlight-active\">Actief</Label>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <Switch\n              id=\"highlight-homepage\"\n              checked={formData.showOnHomepage}\n              onCheckedChange={(checked) => setFormData({...formData, showOnHomepage: checked})}\n            />\n            <Label htmlFor=\"highlight-homepage\">Toon op Homepage</Label>\n          </div>\n\n          <div>\n            <Label>Icon selecteren <span className=\"text-red-500\">*</span></Label>\n            <div className=\"grid grid-cols-6 gap-3 mt-2 p-4 border rounded-lg max-h-48 overflow-y-auto\">\n              {availableIcons.map(icon => (\n                <div \n                  key={icon}\n                  className={`p-2 border rounded-lg cursor-pointer hover:bg-gray-50 ${\n                    formData.iconPath === `/images/highlights/${icon}.svg` ? 'border-blue-500 bg-blue-50' : ''\n                  }`}\n                  onClick={() => setFormData({...formData, iconPath: `/images/highlights/${icon}.svg`})}\n                >\n                  <img \n                    src={`/images/highlights/${icon}.svg`} \n                    alt={icon}\n                    className=\"w-8 h-8 mx-auto\"\n                    onError={(e) => {\n                      e.currentTarget.src = '/images/highlights/placeholder.svg';\n                    }}\n                  />\n                  <p className=\"text-xs text-center mt-1 truncate\">{icon}</p>\n                </div>\n              ))}\n            </div>\n            {formData.iconPath && (\n              <div className=\"mt-2 p-2 bg-gray-50 rounded\">\n                <p className=\"text-sm text-gray-600\">Geselecteerd: {formData.iconPath}</p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? 'Bezig...' : 'Highlight Toevoegen'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport function EditHighlightDialogContent({ open, onOpenChange, highlight, editData, setEditData, onSave }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  highlight: any;\n  editData: any;\n  setEditData: (data: any) => void;\n  onSave: () => void;\n}) {\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const availableIcons = [\n    'wawel-castle', 'krakow-market', 'st-marys', 'kazimierz',\n    'gdansk-church', 'gdansk-market', 'artus-court', 'amber-museum',\n    'morskie-oko', 'gubalowka', 'zakopane', 'rysy-peak',\n    'forest-paths', 'europese-wisent', 'bird-watching', 'nature-museum', 'forest-photography',\n    'warsaw-oldtown', 'warsaw-castle', 'lazienki', 'wilanow'\n  ];\n\n  const categories = [\n    { value: 'general', label: 'Algemeen' },\n    { value: 'historical', label: 'Historisch' },\n    { value: 'nature', label: 'Natuur' },\n    { value: 'cultural', label: 'Cultureel' },\n    { value: 'adventure', label: 'Avontuur' }\n  ];\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editData.name.trim() || !editData.iconPath.trim()) {\n      toast({ title: \"Fout\", description: \"Naam en icon zijn verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/admin/highlights/${highlight.id}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(editData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Highlight succesvol bijgewerkt\" });\n        onSave();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\">\n        <DialogHeader>\n          <DialogTitle>Highlight Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de highlight: {highlight?.name}\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"edit-highlight-name\">Naam <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"edit-highlight-name\"\n                value={editData.name}\n                onChange={(e) => setEditData({...editData, name: e.target.value})}\n                placeholder=\"Bijv. Wawel Kasteel\"\n                required\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"edit-highlight-category\">Categorie</Label>\n              <Select \n                value={editData.category} \n                onValueChange={(value) => setEditData({...editData, category: value})}\n              >\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {categories.map(cat => (\n                    <SelectItem key={cat.value} value={cat.value}>{cat.label}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"edit-highlight-ranking\">Ranking (volgorde)</Label>\n              <Input\n                id=\"edit-highlight-ranking\"\n                type=\"number\"\n                value={editData.ranking}\n                onChange={(e) => setEditData({...editData, ranking: parseInt(e.target.value) || 0})}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"flex items-center space-x-2 pt-6\">\n              <Switch\n                id=\"edit-highlight-active\"\n                checked={editData.active}\n                onCheckedChange={(checked) => setEditData({...editData, active: checked})}\n              />\n              <Label htmlFor=\"edit-highlight-active\">Actief</Label>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            <Switch\n              id=\"edit-highlight-homepage\"\n              checked={editData.showOnHomepage}\n              onCheckedChange={(checked) => setEditData({...editData, showOnHomepage: checked})}\n            />\n            <Label htmlFor=\"edit-highlight-homepage\">Toon op Homepage</Label>\n          </div>\n\n          <div>\n            <Label>Icon selecteren <span className=\"text-red-500\">*</span></Label>\n            <div className=\"grid grid-cols-6 gap-3 mt-2 p-4 border rounded-lg max-h-48 overflow-y-auto\">\n              {availableIcons.map(icon => (\n                <div \n                  key={icon}\n                  className={`p-2 border rounded-lg cursor-pointer hover:bg-gray-50 ${\n                    editData.iconPath === `/images/highlights/${icon}.svg` ? 'border-blue-500 bg-blue-50' : ''\n                  }`}\n                  onClick={() => setEditData({...editData, iconPath: `/images/highlights/${icon}.svg`})}\n                >\n                  <img \n                    src={`/images/highlights/${icon}.svg`} \n                    alt={icon}\n                    className=\"w-8 h-8 mx-auto\"\n                    onError={(e) => {\n                      e.currentTarget.src = '/images/highlights/placeholder.svg';\n                    }}\n                  />\n                  <p className=\"text-xs text-center mt-1 truncate\">{icon}</p>\n                </div>\n              ))}\n            </div>\n            {editData.iconPath && (\n              <div className=\"mt-2 p-2 bg-gray-50 rounded\">\n                <p className=\"text-sm text-gray-600\">Geselecteerd: {editData.iconPath}</p>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? 'Bezig...' : 'Highlight Opslaan'}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Simple Button-based dialogs for use in other interfaces\nexport function ViewHighlightDialog({ highlight }: { highlight: any }) {\n  const [open, setOpen] = useState(false);\n  \n  return (\n    <>\n      <Button \n        size=\"sm\" \n        variant=\"outline\"\n        onClick={() => setOpen(true)}\n        className=\"text-xs\"\n      >\n        <Eye className=\"h-3 w-3\" />\n      </Button>\n      <ViewHighlightDialogContent open={open} onOpenChange={setOpen} highlight={highlight} />\n    </>\n  );\n}\n\nexport function EditHighlightDialog({ highlight, onUpdate }: { highlight: any; onUpdate: () => void }) {\n  const [open, setOpen] = useState(false);\n  const [editData, setEditData] = useState({\n    name: highlight?.name || '',\n    iconPath: highlight?.iconPath || '',\n    category: highlight?.category || 'general',\n    ranking: highlight?.ranking || 0,\n    active: highlight?.active || true,\n    showOnHomepage: highlight?.showOnHomepage || true\n  });\n\n  // Update editData when highlight changes\n  React.useEffect(() => {\n    if (highlight) {\n      setEditData({\n        name: highlight.name || '',\n        iconPath: highlight.iconPath || '',\n        category: highlight.category || 'general',\n        ranking: highlight.ranking || 0,\n        active: highlight.active || true,\n        showOnHomepage: highlight.showOnHomepage || true\n      });\n    }\n  }, [highlight]);\n\n  return (\n    <>\n      <Button \n        size=\"sm\" \n        variant=\"outline\"\n        onClick={() => setOpen(true)}\n        className=\"text-xs\"\n      >\n        <Edit className=\"h-3 w-3\" />\n      </Button>\n      <EditHighlightDialogContent \n        open={open} \n        onOpenChange={setOpen}\n        highlight={highlight}\n        editData={editData}\n        setEditData={setEditData}\n        onSave={() => {\n          onUpdate();\n          setOpen(false);\n        }}\n      />\n    </>\n  );\n}\n\nexport function ViewHighlightDialogContent({ open, onOpenChange, highlight }: { \n  open: boolean; \n  onOpenChange: (open: boolean) => void; \n  highlight: any;\n}) {\n  const categories = {\n    'general': 'Algemeen',\n    'historical': 'Historisch', \n    'nature': 'Natuur',\n    'cultural': 'Cultureel',\n    'adventure': 'Avontuur'\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle>Highlight Details</DialogTitle>\n          <DialogDescription>\n            Bekijk de details van deze highlight\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-center p-6 bg-gray-50 rounded-lg\">\n            <img\n              src={highlight.iconPath}\n              alt={highlight.name}\n              className=\"w-16 h-16\"\n              onError={(e) => {\n                e.currentTarget.src = '/images/highlights/placeholder.svg';\n              }}\n            />\n          </div>\n\n          <div className=\"grid gap-3\">\n            <div>\n              <Label className=\"text-sm font-medium text-gray-500\">Naam</Label>\n              <p className=\"text-lg font-semibold\">{highlight.name}</p>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Categorie</Label>\n                <p>{categories[highlight.category] || highlight.category}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Ranking</Label>\n                <p>#{highlight.ranking}</p>\n              </div>\n            </div>\n\n            <div>\n              <Label className=\"text-sm font-medium text-gray-500\">Status</Label>\n              <div className=\"flex gap-2 mt-1\">\n                <Badge variant={highlight.active ? \"default\" : \"outline\"}>\n                  {highlight.active ? \"‚úÖ Actief\" : \"‚ùå Inactief\"}\n                </Badge>\n                <Badge variant={highlight.showOnHomepage ? \"default\" : \"outline\"}>\n                  {highlight.showOnHomepage ? \"üè† Homepage\" : \"üö´ Niet homepage\"}\n                </Badge>\n              </div>\n            </div>\n\n            <div>\n              <Label className=\"text-sm font-medium text-gray-500\">Icon Path</Label>\n              <p className=\"text-sm font-mono bg-gray-100 p-2 rounded\">{highlight.iconPath}</p>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Sluiten\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Image Upload Field component\nfunction ImageUploadField({ label, value, onChange, placeholder, fileName, destination, entityId, entityName }: {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n  fileName?: string;\n  destination?: string;\n  entityId?: string | number;\n  entityName?: string;\n}) {\n  const [isUploading, setIsUploading] = useState(false);\n  const { toast } = useToast();\n\n  const handleFileUpload = async (file: File) => {\n    setIsUploading(true);\n    try {\n      const result = await uploadFile({\n        file,\n        fileName,\n        destination: destination || 'destinations',\n        type: 'image',\n        entityId,\n        entityName\n      });\n      onChange(result.imagePath || '');\n      toast({ title: \"Success\", description: \"Afbeelding succesvol ge√ºpload\" });\n    } catch (error) {\n      toast({ title: \"Error\", description: \"Upload mislukt\", variant: \"destructive\" });\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  return (\n    <div>\n      <Label htmlFor={`upload-${label}`}>{label}</Label>\n      <div className=\"flex gap-2\">\n        <Input\n          id={`upload-${label}`}\n          type=\"text\"\n          placeholder={placeholder || \"/images/destinations/example.jpg\"}\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"flex-1\"\n        />\n        <Button\n          type=\"button\"\n          variant=\"outline\"\n          size=\"sm\"\n          disabled={isUploading}\n          onClick={() => document.getElementById(`file-${label}`)?.click()}\n        >\n          {isUploading ? \"Uploading...\" : <Upload className=\"h-4 w-4\" />}\n        </Button>\n        <input\n          id={`file-${label}`}\n          type=\"file\"\n          accept=\"image/*\"\n          className=\"hidden\"\n          onChange={(e) => {\n            const file = e.target.files?.[0];\n            if (file) handleFileUpload(file);\n          }}\n        />\n      </div>\n      {value && (\n        <div className=\"mt-2\">\n          <img src={value} alt=\"Preview\" className=\"h-32 w-48 object-cover rounded border\" />\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Create Destination Dialog\nexport function CreateDestinationDialog({ open, onOpenChange, onDestinationCreated }: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onDestinationCreated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    name: '',\n    location: '',\n    description: '',\n    content: '',\n    image: '',\n    alt: '',\n    link: '',\n    ranking: 0,\n    featured: false,\n    published: true,\n    showOnHomepage: true\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name.trim() || !formData.description.trim() || !formData.image.trim() || !formData.alt.trim()) {\n      toast({ title: \"Fout\", description: \"Naam, beschrijving, afbeelding en alt-tekst zijn verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/admin/destinations', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Bestemming succesvol aangemaakt\" });\n        onDestinationCreated();\n        setFormData({\n          name: '',\n          location: '',\n          description: '',\n          content: '',\n          image: '',\n          alt: '',\n          link: '',\n          ranking: 0,\n          featured: false,\n          published: true,\n          showOnHomepage: true\n        });\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Bestemming Toevoegen</DialogTitle>\n          <DialogDescription>\n            Voeg een nieuwe bestemming toe aan je website\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"dest-name\">Naam <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"dest-name\"\n                placeholder=\"Bijv. Warsaw\"\n                value={formData.name}\n                onChange={(e) => setFormData({...formData, name: e.target.value})}\n                className={!formData.name.trim() ? \"border-red-300\" : \"\"}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"dest-location\">Plaats/Locatie</Label>\n              <Input\n                id=\"dest-location\"\n                placeholder=\"Bijv. Krakow, Warschau\"\n                value={formData.location}\n                onChange={(e) => setFormData({...formData, location: e.target.value})}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"dest-ranking\">Ranking (volgorde)</Label>\n            <Input\n              id=\"dest-ranking\"\n              type=\"number\"\n              placeholder=\"0\"\n              value={formData.ranking}\n              onChange={(e) => setFormData({...formData, ranking: parseInt(e.target.value) || 0})}\n            />\n          </div>\n\n          <ImageUploadField\n            label=\"Afbeelding *\"\n            value={formData.image}\n            onChange={(value) => setFormData({...formData, image: value})}\n            placeholder=\"/images/destinations/warsaw.jpg\"\n            fileName={formData.name}\n            destination=\"destinations\"\n          />\n\n          <div>\n            <Label htmlFor=\"dest-alt\">Alt-tekst *</Label>\n            <Input\n              id=\"dest-alt\"\n              placeholder=\"Bijv. Krakow marktplein\"\n              value={formData.alt}\n              onChange={(e) => setFormData({...formData, alt: e.target.value})}\n              className={!formData.alt.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"dest-description\">Beschrijving <span className=\"text-red-500\">*</span></Label>\n            <Textarea\n              id=\"dest-description\"\n              placeholder=\"Beschrijf waarom deze bestemming de moeite waard is...\"\n              value={formData.description}\n              onChange={(e) => setFormData({...formData, description: e.target.value})}\n              rows={3}\n              className={!formData.description.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"dest-content\">Volledige inhoud</Label>\n            <Textarea\n              id=\"dest-content\"\n              placeholder=\"Uitgebreide beschrijving van de bestemming...\"\n              value={formData.content}\n              onChange={(e) => setFormData({...formData, content: e.target.value})}\n              rows={5}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"dest-link\">Link (optioneel)</Label>\n            <Input\n              id=\"dest-link\"\n              placeholder=\"Bijv. /krakow-bezoeken of https://example.com\"\n              value={formData.link}\n              onChange={(e) => setFormData({...formData, link: e.target.value})}\n            />\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Link waar de afbeelding naartoe moet leiden. Gebruik interne links (bijv. /pagina) of externe links (bijv. https://website.com)\n            </p>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"dest-featured\"\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({...formData, featured: checked})}\n              />\n              <Label htmlFor=\"dest-featured\">Featured</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"dest-published\"\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({...formData, published: checked})}\n              />\n              <Label htmlFor=\"dest-published\">Publiceren</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"dest-homepage\"\n                checked={formData.showOnHomepage}\n                onCheckedChange={(checked) => setFormData({...formData, showOnHomepage: checked})}\n              />\n              <Label htmlFor=\"dest-homepage\">Homepage</Label>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Bezig...\" : <><Plus className=\"h-4 w-4 mr-2\" /> Bestemming Aanmaken</>}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Create Guide Dialog\nexport function CreateGuideDialog({ open, onOpenChange, onGuideCreated }: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onGuideCreated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    content: '',\n    image: '',\n    alt: '',\n    link: '',\n    ranking: 0,\n    featured: false,\n    published: true,\n    showOnHomepage: true\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate all required fields (same as old tab)\n    if (!formData.title.trim()) {\n      toast({ title: \"Validatie fout\", description: \"Titel is verplicht\", variant: \"destructive\" });\n      return;\n    }\n    \n    if (!formData.description.trim()) {\n      toast({ title: \"Validatie fout\", description: \"Beschrijving is verplicht\", variant: \"destructive\" });\n      return;\n    }\n    \n    if (!formData.image.trim()) {\n      toast({ title: \"Validatie fout\", description: \"Afbeelding is verplicht\", variant: \"destructive\" });\n      return;\n    }\n    \n    if (!formData.alt.trim()) {\n      toast({ title: \"Validatie fout\", description: \"Alt-tekst is verplicht\", variant: \"destructive\" });\n      return;\n    }\n    \n    if (!formData.content.trim()) {\n      toast({ title: \"Validatie fout\", description: \"Content is verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/guides', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Reisgids succesvol aangemaakt\" });\n        onGuideCreated();\n        setFormData({\n          title: '',\n          description: '',\n          content: '',\n          image: '',\n          alt: '',\n          link: '',\n          ranking: 0,\n          featured: false,\n          published: true,\n          showOnHomepage: true\n        });\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Reisgids Toevoegen</DialogTitle>\n          <DialogDescription>\n            Voeg een nieuwe reisgids toe aan je website\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"guide-title\">Titel <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"guide-title\"\n              placeholder=\"Bijv. 3 Dagen in Krakau\"\n              value={formData.title}\n              onChange={(e) => setFormData({...formData, title: e.target.value})}\n              className={!formData.title.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"guide-ranking\">Ranking (volgorde)</Label>\n            <Input\n              id=\"guide-ranking\"\n              type=\"number\"\n              placeholder=\"0\"\n              value={formData.ranking}\n              onChange={(e) => setFormData({...formData, ranking: parseInt(e.target.value) || 0})}\n            />\n          </div>\n\n          <ImageUploadField\n            label=\"Afbeelding *\"\n            value={formData.image}\n            onChange={(value) => setFormData({...formData, image: value})}\n            placeholder=\"/images/guides/krakau-gids.jpg\"\n            fileName={formData.title}\n            destination=\"guides\"\n          />\n\n          <div>\n            <Label htmlFor=\"guide-alt\">Alt-tekst <span className=\"text-red-500\">*</span></Label>\n            <Input\n              id=\"guide-alt\"\n              placeholder=\"Bijv. Krakau reisgids afbeelding\"\n              value={formData.alt}\n              onChange={(e) => setFormData({...formData, alt: e.target.value})}\n              className={!formData.alt.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"guide-description\">Beschrijving <span className=\"text-red-500\">*</span></Label>\n            <Textarea\n              id=\"guide-description\"\n              placeholder=\"Beschrijf wat deze reisgids bevat...\"\n              value={formData.description}\n              onChange={(e) => setFormData({...formData, description: e.target.value})}\n              rows={3}\n              className={!formData.description.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"guide-content\">Volledige inhoud <span className=\"text-red-500\">*</span></Label>\n            <Textarea\n              id=\"guide-content\"\n              placeholder=\"Uitgebreide inhoud van de reisgids...\"\n              value={formData.content}\n              onChange={(e) => setFormData({...formData, content: e.target.value})}\n              rows={5}\n              className={!formData.content.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"guide-link\">Link (optioneel)</Label>\n            <Input\n              id=\"guide-link\"\n              placeholder=\"Bijv. /krakau-gids of https://example.com\"\n              value={formData.link}\n              onChange={(e) => setFormData({...formData, link: e.target.value})}\n            />\n            <p className=\"text-sm text-gray-500 mt-1\">\n              Link waar de afbeelding naartoe moet leiden\n            </p>\n          </div>\n\n          <div className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"guide-featured\"\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({...formData, featured: checked})}\n              />\n              <Label htmlFor=\"guide-featured\">Featured</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"guide-published\"\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({...formData, published: checked})}\n              />\n              <Label htmlFor=\"guide-published\">Publiceren</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch \n                id=\"guide-homepage\"\n                checked={formData.showOnHomepage}\n                onCheckedChange={(checked) => setFormData({...formData, showOnHomepage: checked})}\n              />\n              <Label htmlFor=\"guide-homepage\">Homepage</Label>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Bezig...\" : <><Plus className=\"h-4 w-4 mr-2\" /> Reisgids Aanmaken</>}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Create Activity Dialog\nexport function CreateActivityDialog({ open, onOpenChange, onActivityCreated }: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onActivityCreated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    name: '',\n    location: '',\n    category: '',\n    activityType: '',\n    description: '',\n    image: '',\n    alt: '',\n    content: '',\n    link: '',\n    featured: false,\n    published: true,\n    ranking: 0\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name.trim() || !formData.description.trim() || !formData.location.trim()) {\n      toast({ title: \"Fout\", description: \"Naam, locatie en beschrijving zijn verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch('/api/admin/activities', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Activiteit succesvol aangemaakt\" });\n        onActivityCreated();\n        setFormData({\n          name: '',\n          location: '',\n          category: '',\n          activityType: '',\n          description: '',\n          image: '',\n          alt: '',\n          content: '',\n          link: '',\n          featured: false,\n          published: true,\n          ranking: 0\n        });\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Nieuwe Activiteit Toevoegen</DialogTitle>\n          <DialogDescription>\n            Voeg een nieuwe activiteit toe zoals musea, bergen, restaurants of accommodatie\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"activity-name\">Naam <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"activity-name\"\n                placeholder=\"Bijv. Wawel Kasteel\"\n                value={formData.name}\n                onChange={(e) => setFormData({...formData, name: e.target.value})}\n                className={!formData.name.trim() ? \"border-red-300\" : \"\"}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"activity-location\">Locatie <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"activity-location\"\n                placeholder=\"Bijv. Krakow\"\n                value={formData.location}\n                onChange={(e) => setFormData({...formData, location: e.target.value})}\n                className={!formData.location.trim() ? \"border-red-300\" : \"\"}\n              />\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"activity-category\">Categorie</Label>\n              <Select value={formData.category} onValueChange={(value) => setFormData({...formData, category: value})}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecteer categorie\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Museum\">Museum</SelectItem>\n                  <SelectItem value=\"Natuur\">Natuur</SelectItem>\n                  <SelectItem value=\"Restaurant\">Restaurant</SelectItem>\n                  <SelectItem value=\"Accommodatie\">Accommodatie</SelectItem>\n                  <SelectItem value=\"Historisch\">Historisch</SelectItem>\n                  <SelectItem value=\"Berg\">Berg</SelectItem>\n                  <SelectItem value=\"Plein\">Plein</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"activity-type\">Type</Label>\n              <Input\n                id=\"activity-type\"\n                placeholder=\"Bijv. Kasteel, Restaurant, B&B\"\n                value={formData.activityType}\n                onChange={(e) => setFormData({...formData, activityType: e.target.value})}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"activity-description\">Beschrijving <span className=\"text-red-500\">*</span></Label>\n            <Textarea\n              id=\"activity-description\"\n              placeholder=\"Korte beschrijving van de activiteit...\"\n              value={formData.description}\n              onChange={(e) => setFormData({...formData, description: e.target.value})}\n              className={!formData.description.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"activity-content\">Uitgebreide Content</Label>\n            <Textarea\n              id=\"activity-content\"\n              placeholder=\"Uitgebreide beschrijving, geschiedenis, tips...\"\n              value={formData.content}\n              onChange={(e) => setFormData({...formData, content: e.target.value})}\n              rows={4}\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <ImageUploadField\n                label=\"Afbeelding\"\n                value={formData.image}\n                onChange={(value) => setFormData({...formData, image: value})}\n                placeholder=\"/images/activities/example.jpg\"\n                fileName={`${formData.name.toLowerCase().replace(/\\s+/g, '-')}-${Date.now()}`}\n                destination=\"activities\"\n                entityId=\"new\"\n                entityName={formData.name}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"activity-alt\">Alt tekst</Label>\n              <Input\n                id=\"activity-alt\"\n                placeholder=\"Beschrijving van de afbeelding\"\n                value={formData.alt}\n                onChange={(e) => setFormData({...formData, alt: e.target.value})}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"activity-link\">Website Link</Label>\n            <Input\n              id=\"activity-link\"\n              placeholder=\"https://example.com\"\n              value={formData.link}\n              onChange={(e) => setFormData({...formData, link: e.target.value})}\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div>\n              <Label htmlFor=\"activity-ranking\">Ranking</Label>\n              <Input\n                id=\"activity-ranking\"\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                value={formData.ranking}\n                onChange={(e) => setFormData({...formData, ranking: parseInt(e.target.value) || 0})}\n              />\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({...formData, featured: checked})}\n              />\n              <Label>Uitgelicht</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({...formData, published: checked})}\n              />\n              <Label>Gepubliceerd</Label>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Bezig...\" : <><Plus className=\"h-4 w-4 mr-2\" /> Activiteit Aanmaken</>}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// Edit Activity Dialog\nexport function EditActivityDialog({ open, onOpenChange, activity, onActivityUpdated }: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  activity: any;\n  onActivityUpdated: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    name: activity?.name || '',\n    location: activity?.location || '',\n    category: activity?.category || '',\n    activityType: activity?.activityType || '',\n    description: activity?.description || '',\n    image: activity?.image || '',\n    alt: activity?.alt || '',\n    content: activity?.content || '',\n    link: activity?.link || '',\n    featured: activity?.featured || false,\n    published: activity?.published || true,\n    ranking: activity?.ranking || 0\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const { toast } = useToast();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name.trim() || !formData.description.trim() || !formData.location.trim()) {\n      toast({ title: \"Fout\", description: \"Naam, locatie en beschrijving zijn verplicht\", variant: \"destructive\" });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const response = await fetch(`/api/admin/activities/${activity.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      if (response.ok) {\n        toast({ title: \"Succes\", description: \"Activiteit succesvol bijgewerkt\" });\n        onActivityUpdated();\n      } else {\n        const error = await response.json();\n        toast({ title: \"Fout\", description: error.message, variant: \"destructive\" });\n      }\n    } catch (error) {\n      toast({ title: \"Fout\", description: \"Er is een fout opgetreden\", variant: \"destructive\" });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Activiteit Bewerken</DialogTitle>\n          <DialogDescription>\n            Bewerk de details van \"{activity?.name}\"\n          </DialogDescription>\n        </DialogHeader>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"edit-activity-name\">Naam <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"edit-activity-name\"\n                placeholder=\"Bijv. Wawel Kasteel\"\n                value={formData.name}\n                onChange={(e) => setFormData({...formData, name: e.target.value})}\n                className={!formData.name.trim() ? \"border-red-300\" : \"\"}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"edit-activity-location\">Locatie <span className=\"text-red-500\">*</span></Label>\n              <Input\n                id=\"edit-activity-location\"\n                placeholder=\"Bijv. Krakow\"\n                value={formData.location}\n                onChange={(e) => setFormData({...formData, location: e.target.value})}\n                className={!formData.location.trim() ? \"border-red-300\" : \"\"}\n              />\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label htmlFor=\"edit-activity-category\">Categorie</Label>\n              <Select value={formData.category} onValueChange={(value) => setFormData({...formData, category: value})}>\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Selecteer categorie\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Museum\">Museum</SelectItem>\n                  <SelectItem value=\"Natuur\">Natuur</SelectItem>\n                  <SelectItem value=\"Restaurant\">Restaurant</SelectItem>\n                  <SelectItem value=\"Accommodatie\">Accommodatie</SelectItem>\n                  <SelectItem value=\"Historisch\">Historisch</SelectItem>\n                  <SelectItem value=\"Berg\">Berg</SelectItem>\n                  <SelectItem value=\"Plein\">Plein</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"edit-activity-type\">Type</Label>\n              <Input\n                id=\"edit-activity-type\"\n                placeholder=\"Bijv. Kasteel, Restaurant, B&B\"\n                value={formData.activityType}\n                onChange={(e) => setFormData({...formData, activityType: e.target.value})}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"edit-activity-description\">Beschrijving <span className=\"text-red-500\">*</span></Label>\n            <Textarea\n              id=\"edit-activity-description\"\n              placeholder=\"Korte beschrijving van de activiteit...\"\n              value={formData.description}\n              onChange={(e) => setFormData({...formData, description: e.target.value})}\n              className={!formData.description.trim() ? \"border-red-300\" : \"\"}\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"edit-activity-content\">Uitgebreide Content</Label>\n            <Textarea\n              id=\"edit-activity-content\"\n              placeholder=\"Uitgebreide beschrijving, geschiedenis, tips...\"\n              value={formData.content}\n              onChange={(e) => setFormData({...formData, content: e.target.value})}\n              rows={4}\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <ImageUploadField\n                label=\"Afbeelding\"\n                value={formData.image}\n                onChange={(value) => setFormData({...formData, image: value})}\n                placeholder=\"/images/activities/example.jpg\"\n                fileName={`${formData.name.toLowerCase().replace(/\\s+/g, '-')}-${Date.now()}`}\n                destination=\"activities\"\n                entityId={activity?.id}\n                entityName={formData.name}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"edit-activity-alt\">Alt tekst</Label>\n              <Input\n                id=\"edit-activity-alt\"\n                placeholder=\"Beschrijving van de afbeelding\"\n                value={formData.alt}\n                onChange={(e) => setFormData({...formData, alt: e.target.value})}\n              />\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"edit-activity-link\">Website Link</Label>\n            <Input\n              id=\"edit-activity-link\"\n              placeholder=\"https://example.com\"\n              value={formData.link}\n              onChange={(e) => setFormData({...formData, link: e.target.value})}\n            />\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div>\n              <Label htmlFor=\"edit-activity-ranking\">Ranking</Label>\n              <Input\n                id=\"edit-activity-ranking\"\n                type=\"number\"\n                min=\"0\"\n                max=\"100\"\n                value={formData.ranking}\n                onChange={(e) => setFormData({...formData, ranking: parseInt(e.target.value) || 0})}\n              />\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                checked={formData.featured}\n                onCheckedChange={(checked) => setFormData({...formData, featured: checked})}\n              />\n              <Label>Uitgelicht</Label>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Switch\n                checked={formData.published}\n                onCheckedChange={(checked) => setFormData({...formData, published: checked})}\n              />\n              <Label>Gepubliceerd</Label>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2\">\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Annuleren\n            </Button>\n            <Button type=\"submit\" disabled={isLoading}>\n              {isLoading ? \"Bezig...\" : <><Edit className=\"h-4 w-4 mr-2\" /> Activiteit Bijwerken</>}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// View Activity Dialog\nexport function ViewActivityDialog({ open, onOpenChange, activity }: {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  activity: any;\n}) {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Activiteit Details</DialogTitle>\n          <DialogDescription>\n            Bekijk de details van \"{activity?.name}\"\n          </DialogDescription>\n        </DialogHeader>\n        \n        <div className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label className=\"font-medium\">Naam</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.name || 'Niet ingevuld'}</p>\n            </div>\n            <div>\n              <Label className=\"font-medium\">Locatie</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.location || 'Niet ingevuld'}</p>\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div>\n              <Label className=\"font-medium\">Categorie</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.category || 'Niet ingevuld'}</p>\n            </div>\n            <div>\n              <Label className=\"font-medium\">Type</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.activityType || 'Niet ingevuld'}</p>\n            </div>\n          </div>\n\n          <div>\n            <Label className=\"font-medium\">Beschrijving</Label>\n            <p className=\"text-sm text-gray-600 whitespace-pre-wrap\">{activity?.description || 'Niet ingevuld'}</p>\n          </div>\n\n          {activity?.content && (\n            <div>\n              <Label className=\"font-medium\">Uitgebreide Content</Label>\n              <p className=\"text-sm text-gray-600 whitespace-pre-wrap\">{activity.content}</p>\n            </div>\n          )}\n\n          {activity?.image && (\n            <div>\n              <Label className=\"font-medium\">Afbeelding</Label>\n              <div className=\"mt-2\">\n                <img \n                  src={activity.image} \n                  alt={activity.alt || activity.name}\n                  className=\"max-w-full h-48 object-cover rounded-md border\"\n                />\n              </div>\n            </div>\n          )}\n\n          {activity?.link && (\n            <div>\n              <Label className=\"font-medium\">Website Link</Label>\n              <p className=\"text-sm text-blue-600 hover:underline\">\n                <a href={activity.link} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {activity.link}\n                </a>\n              </p>\n            </div>\n          )}\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div>\n              <Label className=\"font-medium\">Ranking</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.ranking || 0}</p>\n            </div>\n            <div>\n              <Label className=\"font-medium\">Uitgelicht</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.featured ? 'Ja' : 'Nee'}</p>\n            </div>\n            <div>\n              <Label className=\"font-medium\">Status</Label>\n              <p className=\"text-sm text-gray-600\">{activity?.published ? 'Gepubliceerd' : 'Concept'}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end\">\n          <Button type=\"button\" onClick={() => onOpenChange(false)}>\n            Sluiten\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":55911},"client/src/lib/uploadUtils.ts":{"content":"// Unified upload utilities to prevent code duplication\nimport { toast } from \"@/hooks/use-toast\";\n\nexport interface UploadResult {\n  success: boolean;\n  imagePath?: string;\n  faviconPath?: string;\n  fileName?: string;\n  message?: string;\n}\n\nexport interface UploadOptions {\n  file: File;\n  fileName?: string;\n  destination?: string;\n  type?: 'image' | 'favicon';\n  entityId?: string | number;\n  entityName?: string;\n  locationName?: string;\n}\n\nexport const uploadFile = async (options: UploadOptions): Promise<UploadResult> => {\n  const { file, fileName, destination, type = 'image', entityId, entityName, locationName } = options;\n  \n  try {\n    // Validate file based on type\n    if (type === 'favicon') {\n      if (!file.name.toLowerCase().endsWith('.ico')) {\n        throw new Error('Alleen .ico bestanden zijn toegestaan voor favicons');\n      }\n      if (file.size > 1024 * 1024) { // 1MB limit\n        throw new Error('Favicon moet kleiner zijn dan 1MB');\n      }\n    } else {\n      if (!file.type.startsWith('image/')) {\n        throw new Error('Selecteer een geldig afbeelding bestand');\n      }\n      if (file.size > 5 * 1024 * 1024) { // 5MB limit\n        throw new Error('Afbeelding moet kleiner zijn dan 5MB');\n      }\n    }\n\n    const formData = new FormData();\n    \n    if (type === 'favicon') {\n      formData.append('favicon', file);\n      if (fileName) {\n        formData.append('fileName', fileName.replace('.ico', ''));\n      }\n    } else {\n      formData.append('image', file);\n      // For motivatie uploads with locationName, don't send fileName\n      if (fileName && fileName.trim() && !(destination === 'motivatie' && locationName)) {\n        formData.append('fileName', fileName.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-'));\n      }\n      if (destination) {\n        formData.append('destination', destination);\n      }\n      if (entityId) {\n        formData.append('entityId', entityId.toString());\n      }\n      if (entityName) {\n        formData.append('entityName', entityName);\n      }\n      if (locationName) {\n        formData.append('locationName', locationName);\n      }\n    }\n\n    const endpoint = type === 'favicon' ? '/api/upload/favicon' : '/api/upload';\n    \n    const response = await fetch(endpoint, {\n      method: 'POST',\n      body: formData,\n      credentials: 'include',\n    });\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      throw new Error(result.message || 'Upload gefaald');\n    }\n\n    if (result.success || type === 'favicon') {\n      toast({ \n        title: \"Succes\", \n        description: type === 'favicon' \n          ? \"Favicon succesvol ge√ºpload!\"\n          : `Afbeelding succesvol ge√ºpload als ${result.fileName || file.name}` \n      });\n      return result;\n    } else {\n      throw new Error(result.message || 'Upload gefaald');\n    }\n  } catch (error) {\n    console.error('Upload error:', error);\n    const errorMessage = error instanceof Error ? error.message : \"Er is een fout opgetreden tijdens uploaden\";\n    \n    toast({ \n      title: \"Upload fout\", \n      description: errorMessage,\n      variant: \"destructive\" \n    });\n    \n    throw new Error(errorMessage);\n  }\n};\n\nexport const validateFileType = (file: File, type: 'image' | 'favicon'): boolean => {\n  if (type === 'favicon') {\n    return file.name.toLowerCase().endsWith('.ico');\n  }\n  return file.type.startsWith('image/');\n};\n\nexport const validateFileSize = (file: File, type: 'image' | 'favicon'): boolean => {\n  const maxSize = type === 'favicon' ? 1024 * 1024 : 5 * 1024 * 1024;\n  return file.size <= maxSize;\n};\n\n// Specific function for uploading images to folders (like motivatie, backgrounds, etc.)\nexport const uploadImageToFolder = async (\n  file: File, \n  destination: string, \n  fileName: string = '', \n  entityName: string = '',\n  locationName?: string\n): Promise<string> => {\n  try {\n    // For motivatie images with locationName, don't use fileName to allow server to generate from locationName\n    const finalFileName = (destination === 'motivatie' && locationName) ? '' : (fileName || '');\n    \n    const result = await uploadFile({\n      file,\n      fileName: finalFileName,\n      destination,\n      type: 'image',\n      entityName,\n      locationName\n    });\n\n    if (result.success && result.imagePath) {\n      return result.imagePath;\n    } else {\n      throw new Error(result.message || 'Upload gefaald');\n    }\n  } catch (error) {\n    console.error('uploadImageToFolder error:', error);\n    throw error;\n  }\n};","size_bytes":4504},"cleanup-orphaned-images.js":{"content":"#!/usr/bin/env node\n\nimport fs from 'fs';\nimport path from 'path';\nimport { execSync } from 'child_process';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconsole.log('üßπ Cleaning up orphaned image files...');\n\n// Get all image files in the guides and destinations directories\nconst imagesDir = path.join(__dirname, 'client', 'public', 'images');\nconst guidesDir = path.join(imagesDir, 'guides');\nconst destinationsDir = path.join(imagesDir, 'destinations');\n\n// Get database content to check which images are still referenced\ntry {\n  // Get all image references from the database\n  const dbQuery = `\n    SELECT image FROM guides WHERE image IS NOT NULL AND image != ''\n    UNION ALL\n    SELECT image FROM destinations WHERE image IS NOT NULL AND image != '';\n  `;\n  \n  console.log('üìã Checking database for image references...');\n  \n  // Get referenced images from database\n  const result = execSync(`psql \"${process.env.DATABASE_URL}\" -t -c \"${dbQuery}\"`, { encoding: 'utf8' });\n  const referencedImages = result\n    .split('\\n')\n    .map(line => line.trim())\n    .filter(line => line && line !== '')\n    .map(imagePath => {\n      // Convert database path to filename\n      return path.basename(imagePath);\n    });\n\n  console.log(`Found ${referencedImages.length} images referenced in database`);\n\n  // Check guides directory\n  if (fs.existsSync(guidesDir)) {\n    const guideFiles = fs.readdirSync(guidesDir).filter(file => \n      file.endsWith('.jpg') || file.endsWith('.jpeg') || file.endsWith('.png')\n    );\n    \n    console.log(`\\nüìÅ Checking ${guideFiles.length} files in guides directory...`);\n    \n    let deletedCount = 0;\n    for (const file of guideFiles) {\n      if (!referencedImages.includes(file)) {\n        const filePath = path.join(guidesDir, file);\n        try {\n          fs.unlinkSync(filePath);\n          console.log(`‚ùå Deleted orphaned guide image: ${file}`);\n          deletedCount++;\n        } catch (error) {\n          console.error(`Error deleting ${file}:`, error.message);\n        }\n      } else {\n        console.log(`‚úÖ Keeping referenced image: ${file}`);\n      }\n    }\n    \n    console.log(`Deleted ${deletedCount} orphaned guide images`);\n  }\n\n  // Check destinations directory\n  if (fs.existsSync(destinationsDir)) {\n    const destFiles = fs.readdirSync(destinationsDir).filter(file => \n      file.endsWith('.jpg') || file.endsWith('.jpeg') || file.endsWith('.png')\n    );\n    \n    console.log(`\\nüìÅ Checking ${destFiles.length} files in destinations directory...`);\n    \n    let deletedCount = 0;\n    for (const file of destFiles) {\n      if (!referencedImages.includes(file)) {\n        const filePath = path.join(destinationsDir, file);\n        try {\n          fs.unlinkSync(filePath);\n          console.log(`‚ùå Deleted orphaned destination image: ${file}`);\n          deletedCount++;\n        } catch (error) {\n          console.error(`Error deleting ${file}:`, error.message);\n        }\n      } else {\n        console.log(`‚úÖ Keeping referenced image: ${file}`);\n      }\n    }\n    \n    console.log(`Deleted ${deletedCount} orphaned destination images`);\n  }\n\n  console.log('\\nüéâ Cleanup completed!');\n  \n} catch (error) {\n  console.error('Error during cleanup:', error.message);\n  process.exit(1);\n}","size_bytes":3341}}}